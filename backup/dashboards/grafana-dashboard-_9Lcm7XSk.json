{
  "meta": {
    "type": "db",
    "canSave": true,
    "canEdit": true,
    "canAdmin": true,
    "canStar": true,
    "canDelete": true,
    "slug": "web-and-app-dashboard-kalender",
    "url": "/d/_9Lcm7XSk/web-and-app-dashboard-kalender",
    "expires": "0001-01-01T00:00:00Z",
    "created": "2024-07-23T13:47:06Z",
    "updated": "2025-05-06T15:46:02Z",
    "updatedBy": "bernd kuch dev",
    "createdBy": "Anonymous",
    "version": 34,
    "hasAcl": false,
    "isFolder": false,
    "folderId": 1177,
    "folderUid": "folder-BlnPG9Q4k",
    "folderTitle": "Piano",
    "folderUrl": "/dashboards/f/folder-BlnPG9Q4k/piano",
    "provisioned": false,
    "provisionedExternalId": "",
    "annotationsPermissions": {
      "dashboard": {
        "canAdd": true,
        "canEdit": true,
        "canDelete": true
      },
      "organization": {
        "canAdd": true,
        "canEdit": true,
        "canDelete": true
      }
    }
  },
  "dashboard": {
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": {
            "type": "grafana",
            "uid": "-- Grafana --"
          },
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "target": {
            "limit": 100,
            "matchAny": false,
            "tags": [],
            "type": "dashboard"
          },
          "type": "dashboard"
        }
      ]
    },
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 0,
    "id": 1097,
    "links": [],
    "panels": [
      {
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 9,
          "x": 0,
          "y": 0
        },
        "id": 115,
        "options": {
          "code": {
            "language": "plaintext",
            "showLineNumbers": false,
            "showMiniMap": false
          },
          "content": "# ðŸ“Š Hinweis\n\n- Audio- und Video-Daten ohne Livestream-Nutzung, mit Ausnahme der Livestream-Tabelle.",
          "mode": "markdown"
        },
        "pluginVersion": "11.3.1",
        "title": "",
        "type": "text"
      },
      {
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 1,
          "w": 1,
          "x": 9,
          "y": 0
        },
        "id": 116,
        "options": {
          "code": {
            "language": "plaintext",
            "showLineNumbers": false,
            "showMiniMap": false
          },
          "content": "<img \n  src=\"${src_url}\" \n  alt=\"Tracking Pixel\" \n  width=\"1\" \n  height=\"1\" \n  style=\"display:none;\"\n/>",
          "mode": "markdown"
        },
        "pluginVersion": "11.3.1",
        "title": "",
        "transparent": true,
        "type": "text"
      },
      {
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 8,
          "x": 16,
          "y": 0
        },
        "id": 110,
        "options": {
          "code": {
            "language": "plaintext",
            "showLineNumbers": false,
            "showMiniMap": false
          },
          "content": " ${hinweis}",
          "mode": "markdown"
        },
        "pluginVersion": "11.3.1",
        "title": "",
        "transparent": true,
        "type": "text"
      },
      {
        "collapsed": false,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 3
        },
        "id": 6,
        "panels": [],
        "title": "Verlaufsdiagramme",
        "type": "row"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "fixed"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "fillOpacity": 80,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineWidth": 1,
              "scaleDistribution": {
                "type": "linear"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "m_visits"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "Web"
                },
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#6aaa96",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "f0_"
              },
              "properties": [
                {
                  "id": "unit",
                  "value": "time: DD.MM"
                },
                {
                  "id": "displayName",
                  "value": "Datum"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Zeitraum"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#82e0bb",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Web"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#a8dad2",
                    "mode": "fixed"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 7,
          "w": 12,
          "x": 0,
          "y": 4
        },
        "id": 100,
        "options": {
          "barRadius": 0,
          "barWidth": 0.63,
          "fullHighlight": false,
          "groupWidth": 0.7,
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "orientation": "auto",
          "showValue": "auto",
          "stacking": "none",
          "text": {
            "valueSize": 0
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          },
          "xTickLabelRotation": 0,
          "xTickLabelSpacing": 100
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "hide": false,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "\n  SELECT \n  TIMESTAMP(date), \n  SUM(m_visits) as m_visits\n  FROM Piano.total_visits\n  WHERE $webFilter\n  AND $Zeitraum\n  GROUP BY date\n  ORDER by date ASC\n",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            },
            "table": "facebookInsightsOwnPosts"
          }
        ],
        "title": "Visits | Web | Time Picker",
        "transparent": true,
        "type": "barchart"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "description": "Hinweis: Momentan keine Web-AV-Messung fÃ¼r die NDR LÃ¤nder mÃ¶glich.",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "fixed"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "fillOpacity": 80,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineWidth": 1,
              "scaleDistribution": {
                "type": "linear"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "m_av_playbacks"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "Web"
                },
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#a8dad2",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "time"
              },
              "properties": [
                {
                  "id": "unit",
                  "value": "time: DD.MM"
                },
                {
                  "id": "displayName",
                  "value": "Datum"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Zeitraum"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#a8dad2",
                    "mode": "fixed"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 7,
          "w": 12,
          "x": 12,
          "y": 4
        },
        "id": 101,
        "options": {
          "barRadius": 0,
          "barWidth": 0.63,
          "fullHighlight": false,
          "groupWidth": 0.7,
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "orientation": "auto",
          "showValue": "auto",
          "stacking": "none",
          "text": {
            "valueSize": 0
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          },
          "xTickLabelRotation": 0,
          "xTickLabelSpacing": 100
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "hide": false,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT date as time, sum(COALESCE(m_av_playbacks,0)) as m_av_playbacks\nFROM  `ndr-code-bi-dashboard.Piano.av_joined_daily`\nWHERE $Zeitraum\nAND $avwebFilter\nGROUP BY date\nORDER BY date\n ",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            },
            "table": "facebookInsightsOwnPosts"
          }
        ],
        "title": "Wiedergaben | Web | Time Picker",
        "transparent": true,
        "type": "barchart"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "fixed"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "fillOpacity": 80,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineWidth": 1,
              "scaleDistribution": {
                "type": "linear"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "m_visits"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "App"
                },
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#0d9685",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "f0_"
              },
              "properties": [
                {
                  "id": "unit",
                  "value": "time: DD.MM"
                },
                {
                  "id": "displayName",
                  "value": "Datum"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 7,
          "w": 12,
          "x": 0,
          "y": 11
        },
        "id": 103,
        "options": {
          "barRadius": 0,
          "barWidth": 0.63,
          "fullHighlight": false,
          "groupWidth": 0.7,
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "orientation": "auto",
          "showValue": "auto",
          "stacking": "none",
          "text": {
            "valueSize": 0
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          },
          "xTickLabelRotation": 0,
          "xTickLabelSpacing": 100
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "hide": false,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": " SELECT \n  TIMESTAMP(date), \n  SUM(m_visits) as m_visits\n  FROM Piano.total_visits\n  WHERE $appFilter\n  AND $Zeitraum\n  GROUP BY date\n  ORDER BY date asc",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            },
            "table": "facebookInsightsOwnPosts"
          }
        ],
        "title": "Visits | App | Time Picker",
        "transparent": true,
        "type": "barchart"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "fixed"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "fillOpacity": 80,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineWidth": 1,
              "scaleDistribution": {
                "type": "linear"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "m_av_playbacks"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "App"
                },
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#0d9685",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "time"
              },
              "properties": [
                {
                  "id": "unit",
                  "value": "time: DD.MM"
                },
                {
                  "id": "displayName",
                  "value": "Datum"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 7,
          "w": 12,
          "x": 12,
          "y": 11
        },
        "id": 104,
        "options": {
          "barRadius": 0,
          "barWidth": 0.63,
          "fullHighlight": false,
          "groupWidth": 0.7,
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "orientation": "auto",
          "showValue": "auto",
          "stacking": "none",
          "text": {
            "valueSize": 0
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          },
          "xTickLabelRotation": 0,
          "xTickLabelSpacing": 100
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "hide": false,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT date as time, SUM(COALESCE(m_playbutton, m_av_playbacks, 0)) as m_av_playbacks\nFROM  `ndr-code-bi-dashboard.Piano.av_joined_daily`\nWHERE $Zeitraum\nAND ${av_condition}\nAND ($av_app_condition_audio OR $av_app_condition_video)\n\nGROUP BY date\nORDER BY date\n",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            },
            "table": "facebookInsightsOwnPosts"
          }
        ],
        "title": "Wiedergaben | App | Time Picker",
        "transparent": true,
        "type": "barchart"
      },
      {
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 24,
          "x": 0,
          "y": 18
        },
        "id": 49,
        "options": {
          "code": {
            "language": "plaintext",
            "showLineNumbers": false,
            "showMiniMap": false
          },
          "content": "",
          "mode": "markdown"
        },
        "pluginVersion": "11.3.1",
        "title": "",
        "transparent": true,
        "type": "text"
      },
      {
        "collapsed": false,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 20
        },
        "id": 14,
        "panels": [],
        "title": "KPI Boxes",
        "type": "row"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "noValue": "App",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "transparent",
                  "value": null
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 4,
          "x": 0,
          "y": 21
        },
        "id": 19,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "refId": "A"
          }
        ],
        "title": "",
        "transparent": true,
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "text",
                  "value": null
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 5,
          "x": 4,
          "y": 21
        },
        "id": 20,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "valueSize": 40
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CONCAT(REPEAT(\" \", $filled_size_headline - CHAR_LENGTH('Visits')), 'Visits')\r\nFROM(\r\nSELECT 'Visits' as Visits\r\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "text",
                  "value": null
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 5,
          "x": 9,
          "y": 21
        },
        "id": 21,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "valueSize": 40
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CONCAT(REPEAT(\" \", $filled_size_headline - CHAR_LENGTH('Page Views / Visit')), 'Page Views / Visit')\r\nFROM(\r\nSELECT 'Page Views / Visit' as pi_visits\r\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "text",
                  "value": null
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 5,
          "x": 14,
          "y": 21
        },
        "id": 22,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "valueSize": 40
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CONCAT(REPEAT(\" \", $filled_size_headline - CHAR_LENGTH('Time spent / Visit in Sec.')), 'Time spent / Visit in Sec.')\r\nFROM(\r\nSELECT 'Time spent / Visit in Sec.' as Visits\r\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "text",
                  "value": null
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 5,
          "x": 19,
          "y": 21
        },
        "id": 23,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "valueSize": 40
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CONCAT(REPEAT(\" \", $filled_size_headline - CHAR_LENGTH('Audio- & Videostarts')), 'Audio- & Videostarts')\r\nFROM(\r\nSELECT 'Audio- & Videostarts' as Visits\r\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "text",
                  "value": null
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 4,
          "x": 0,
          "y": 24
        },
        "id": 16,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "valueSize": 54
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CONCAT(REPEAT(\" \", $filled_size_headline - CHAR_LENGTH('Web & App')), 'Web & App')\r\nFROM(\r\nSELECT 'Web & App' as Visits\r\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#00817e",
                  "value": null
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 5,
          "x": 4,
          "y": 24
        },
        "id": 24,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {},
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "with w as (\r\n  SELECT  SUM(COALESCE(m_visits,0)) as m_visits, 1 as id\r\n    FROM `ndr-code-bi-dashboard.Piano.total_visits` \r\n    WHERE $webFilter AND $Zeitraum),\r\na as (\r\n  SELECT  SUM(m_visits) as m_visits, 1 as id\r\n  FROM `ndr-code-bi-dashboard.Piano.total_visits` \r\n  WHERE $appFilter AND $Zeitraum)\r\nSELECT  w.m_visits + a.m_visits as Zeitraum\r\nFROM w \r\nJOIN a ON w.id = a.id\r\n\r\n",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#00817e",
                  "value": null
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 5,
          "x": 9,
          "y": 24
        },
        "id": 31,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {},
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "with w as (\r\n  SELECT m_visits, date, m_page_loads, 1 as id\r\n  FROM `ndr-code-bi-dashboard.Piano.total_visits` \r\n  WHERE \r\n    ($webFilter\r\n    AND $Zeitraum \r\n    ) \r\n),\r\na as (\r\n  SELECT m_visits, date, m_page_loads, 1 as id\r\n  FROM `ndr-code-bi-dashboard.Piano.total_visits` \r\n  WHERE $appFilter\r\n  AND $Zeitraum\r\n)\r\nSELECT  CONCAT(REPEAT(\" \", $filled_size_big - CHAR_LENGTH(CAST(summe as STRING))), REPLACE(CAST(FORMAT(\"%'.0f\", CAST(ROUND(summe) as NUMERIC)) AS STRING), \",\", \".\")) FROM \r\n(\r\nSELECT ROUND(SUM(w.m_page_loads+a.m_page_loads)/SUM(w.m_visits + a.m_visits),1) as summe\r\nFROM w \r\nJOIN a ON w.id = a.id)\r\n\r\n",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "displayName": "${Zeitraum:text} ${Uhrzeit:text}",
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#00817e",
                  "value": null
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 5,
          "x": 14,
          "y": 24
        },
        "id": 38,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 30
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "with w as (\r\n  SELECT  SUM(m_time_spent_per_visits/1000 * m_visits) as time_spent, SUM(m_visits)as visits, 2 as id\r\n  FROM  `ndr-code-bi-dashboard.Piano.total_visits` \r\n  WHERE $Zeitraum\r\n   AND $webFilter\r\n),\r\na as(\r\n  SELECT  SUM(m_time_spent_per_visits/1000 * m_visits) as time_spent, SUM(m_visits)as visits, 2 as id\r\n  FROM `ndr-code-bi-dashboard.Piano.total_visits`  \r\n   WHERE $Zeitraum \r\n   AND $appFilter\r\n)\r\nSELECT  CONCAT(REPLACE(CAST(ROUND((a.time_spent + w.time_spent)/(a.visits + w.visits),1) as STRING), '.', ','), ' Sek.') as Zeitraum\r\nFROM w \r\nJOIN a ON w.id = a.id",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#00817e",
                  "value": null
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 5,
          "x": 19,
          "y": 24
        },
        "id": 39,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 30
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "with web as \r\n(\r\n  SELECT \r\n    SUM(COALESCE(m_av_playbacks,0)) as Zeitraum, 1 as id\r\n  FROM `ndr-code-bi-dashboard.Piano.av_joined_daily`  \r\n  WHERE $Zeitraum AND $avwebFilter\r\n  AND bi_av_broadcasting_type NOT IN ('live', 'Live')\r\n\r\n  \r\n),\r\napp as (\r\n  SELECT \r\n    SUM(COALESCE(m_playbutton, m_av_playbacks, 0)) as Zeitraum, 1 as id\r\n  FROM `ndr-code-bi-dashboard.Piano.av_joined_daily`  \r\n  WHERE $Zeitraum AND ${av_condition} \r\n  AND bi_av_broadcasting_type NOT IN ('live', 'Live')\r\n  AND ($av_app_condition_audio OR $av_app_condition_video)\r\n\r\n )\r\nSELECT COALESCE(SUM(web.Zeitraum),0) + COALESCE(SUM(app.Zeitraum),0) as Zeitraum\r\nFROM web\r\nJOIN app\r\nON web.id = app.id\r\n\r\n",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "text"
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 4,
          "x": 0,
          "y": 32
        },
        "id": 17,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "valueSize": 54
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CONCAT(REPEAT(\" \", $filled_size_headline - CHAR_LENGTH('Web')), 'Web')\r\nFROM(\r\nSELECT 'Web' as Visits\r\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#00c7c4"
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 3,
          "x": 4,
          "y": 32
        },
        "id": 60,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20,
            "valueSize": 34
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT  SUM(COALESCE(m_visits,0)) as m_visits\r\n    FROM `ndr-code-bi-dashboard.Piano.total_visits` \r\n    WHERE $webFilter AND $Zeitraum",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "semi-dark-blue",
              "mode": "fixed"
            },
            "custom": {
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              }
            },
            "mappings": [],
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Web"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#a0d6c4",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "App"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#1da3a1",
                    "mode": "fixed"
                  }
                },
                {
                  "id": "displayName"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 6,
          "w": 2,
          "x": 7,
          "y": 32
        },
        "id": 30,
        "options": {
          "displayLabels": [
            "percent"
          ],
          "legend": {
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true,
            "values": []
          },
          "pieType": "pie",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "with w as (\r\n  SELECT  SUM(COALESCE(m_visits,0)) as m_visits, 1 as id\r\n    FROM `ndr-code-bi-dashboard.Piano.total_visits` \r\n    WHERE $webFilter AND $Zeitraum),\r\na as (\r\n  SELECT  SUM(m_visits) as m_visits, 1 as id\r\n  FROM `ndr-code-bi-dashboard.Piano.total_visits` \r\n  WHERE $appFilter AND $Zeitraum)\r\nSELECT  w.m_visits as Web, a.m_visits as App\r\nFROM w \r\nJOIN a ON w.id = a.id\r\n\r\n\r\n\r\n",
            "refId": "a",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "transparent": true,
        "type": "piechart"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#00c7c4"
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "${Zeitraum:text} ${Uhrzeit:text}"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "${Zeitraum:text} ${Uhrzeit:text}"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 3,
          "w": 3,
          "x": 9,
          "y": 32
        },
        "id": 40,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20,
            "valueSize": 40
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "  SELECT ROUND(SUM(m_page_loads)/SUM(m_visits),1) as id\r\n  FROM `ndr-code-bi-dashboard.Piano.total_visits` \r\n  WHERE \r\n    ($webFilter\r\n    AND $Zeitraum \r\n    ) ",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "semi-dark-blue",
              "mode": "fixed"
            },
            "decimals": 2,
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green"
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Web"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#a0d6c4",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "App"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#1da3a1",
                    "mode": "fixed"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 6,
          "w": 2,
          "x": 12,
          "y": 32
        },
        "id": 97,
        "options": {
          "displayMode": "gradient",
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": false
          },
          "maxVizHeight": 300,
          "minVizHeight": 10,
          "minVizWidth": 0,
          "namePlacement": "auto",
          "orientation": "vertical",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showUnfilled": true,
          "sizing": "auto",
          "text": {},
          "valueMode": "color"
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "with w as (\r\n  SELECT SUM(m_page_loads)/SUM(m_visits) as m_visits, 1 as id\r\n  FROM `ndr-code-bi-dashboard.Piano.total_visits` \r\n  WHERE $webFilter\r\n    AND $Zeitraum\r\n),\r\na as (\r\n  SELECT SUM(m_page_loads)/SUM(m_visits) as m_visits, 1 as id\r\n  FROM `ndr-code-bi-dashboard.Piano.total_visits` \r\n  WHERE $appFilter\r\n  AND $Zeitraum\r\n)\r\nSELECT  w.m_visits as Web, a.m_visits as App\r\nFROM w \r\nJOIN a ON w.id = a.id\r\n\r\n\r\n",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "transparent": true,
        "type": "bargauge"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "decimals": 1,
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#00c7c4"
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Zeitraum"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "${Zeitraum:text}"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 3,
          "w": 3,
          "x": 14,
          "y": 32
        },
        "id": 41,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20,
            "valueSize": 34
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT  SUM(m_time_spent_per_visits/1000 * m_visits)/SUM(m_visits) as id\r\nFROM `ndr-code-bi-dashboard.Piano.total_visits` \r\nWHERE $Zeitraum AND $webFilter ",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "semi-dark-blue",
              "mode": "fixed"
            },
            "decimals": 1,
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green"
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Web"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#a0d6c4",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "App"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#1da3a1",
                    "mode": "fixed"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 6,
          "w": 2,
          "x": 17,
          "y": 32
        },
        "id": 98,
        "options": {
          "displayMode": "gradient",
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": false
          },
          "maxVizHeight": 300,
          "minVizHeight": 10,
          "minVizWidth": 0,
          "namePlacement": "auto",
          "orientation": "vertical",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showUnfilled": true,
          "sizing": "auto",
          "text": {},
          "valueMode": "color"
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "with w as (\r\n  SELECT  SUM(m_time_spent_per_visits/1000 * m_visits)/SUM(m_visits) as Zeitraum, 1 as id\r\nFROM `ndr-code-bi-dashboard.Piano.total_visits` \r\nWHERE $Zeitraum  AND $webFilter \r\n),\r\na as(\r\n   SELECT  SUM(m_time_spent_per_visits/1000 * m_visits)/SUM(m_visits) as Zeitraum, 1 as id\r\nFROM `ndr-code-bi-dashboard.Piano.total_visits` \r\nWHERE $Zeitraum  AND $appFilter \r\n)\r\nSELECT  w.Zeitraum as Web, a.Zeitraum as App\r\nFROM w \r\nJOIN a ON w.id = a.id",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "transparent": true,
        "type": "bargauge"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#00c7c4"
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 3,
          "x": 19,
          "y": 32
        },
        "id": 42,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20,
            "valueSize": 34
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT \r\n    SUM(COALESCE(m_av_playbacks,0)) as Zeitraum\r\n  FROM `ndr-code-bi-dashboard.Piano.av_joined_daily`  \r\n  WHERE $Zeitraum AND $avwebFilter\r\n  AND bi_av_broadcasting_type NOT IN ('live', 'Live')\r\n",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "semi-dark-blue",
              "mode": "fixed"
            },
            "custom": {
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              }
            },
            "mappings": [],
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Web"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#a0d6c4",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "App"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#1da3a1",
                    "mode": "fixed"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 6,
          "w": 2,
          "x": 22,
          "y": 32
        },
        "id": 48,
        "options": {
          "displayLabels": [
            "percent"
          ],
          "legend": {
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "pieType": "pie",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "with web as \r\n(\r\n  SELECT \r\n    SUM(COALESCE(m_av_playbacks,0)) as Zeitraum, 1 as id\r\n  FROM `ndr-code-bi-dashboard.Piano.av_joined_daily`  \r\n  WHERE $Zeitraum  AND $avwebFilter\r\n  AND bi_av_broadcasting_type NOT IN ('live', 'Live')\r\n\r\n),\r\napp as (\r\n  SELECT \r\n    SUM(COALESCE(m_av_playbacks,0)) as Zeitraum, 1 as id\r\n  FROM `ndr-code-bi-dashboard.Piano.av_joined_daily`  \r\n  WHERE $Zeitraum AND ${av_condition} \r\n  AND bi_av_broadcasting_type NOT IN ('live', 'Live')\r\n\r\n )\r\nSELECT SUM(web.Zeitraum) as Web, SUM(app.Zeitraum) as App\r\nFROM web\r\nJOIN app\r\nON web.id = app.id\r\n\r\n",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "transparent": true,
        "type": "piechart"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "text"
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 4,
          "x": 0,
          "y": 35
        },
        "id": 18,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "valueSize": 54
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CONCAT(REPEAT(\" \", $filled_size_headline - CHAR_LENGTH('App')), 'App')\r\nFROM(\r\nSELECT 'App' as Visits\r\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#00c7c4"
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Zeitraum"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "${Zeitraum:text}"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 3,
          "w": 3,
          "x": 4,
          "y": 35
        },
        "id": 27,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20,
            "valueSize": 34
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT  SUM(m_visits) as m_visits\r\n  FROM `ndr-code-bi-dashboard.Piano.total_visits` \r\n  WHERE $appFilter AND $Zeitraum",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#00c7c4"
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Zeitraum"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "${Zeitraum:text}"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 3,
          "w": 3,
          "x": 9,
          "y": 35
        },
        "id": 43,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20,
            "valueSize": 40
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "  SELECT ROUND(SUM(m_page_loads)/SUM(m_visits),1) as id\r\n  FROM `ndr-code-bi-dashboard.Piano.total_visits` \r\n  WHERE \r\n    ($appFilter\r\n    AND $Zeitraum\r\n    ) ",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "decimals": 1,
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#00c7c4"
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Zeitraum"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "${Zeitraum:text}"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 3,
          "w": 3,
          "x": 14,
          "y": 35
        },
        "id": 44,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20,
            "valueSize": 34
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT  SUM(m_time_spent_per_visits/1000 * m_visits)/SUM(m_visits) as id\r\nFROM `ndr-code-bi-dashboard.Piano.total_visits` \r\nWHERE $Zeitraum AND $appFilter ",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#00c7c4"
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 3,
          "x": 19,
          "y": 35
        },
        "id": 45,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20,
            "valueSize": 34
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT \r\n SUM(COALESCE(m_playbutton, m_av_playbacks, 0)) as Zeitraum\r\nFROM `ndr-code-bi-dashboard.Piano.av_joined_daily`  \r\nWHERE $Zeitraum  AND ${av_condition}\r\nAND ($av_app_condition_audio OR $av_app_condition_video)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 16,
          "x": 0,
          "y": 38
        },
        "id": 113,
        "options": {
          "code": {
            "language": "plaintext",
            "showLineNumbers": false,
            "showMiniMap": false
          },
          "content": "Hinweis: Momentan keine Web-AV-Messung fÃ¼r die NDR LÃ¤nder mÃ¶glich.",
          "mode": "markdown"
        },
        "pluginVersion": "11.3.1",
        "title": "",
        "transparent": true,
        "type": "text"
      },
      {
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 24,
          "x": 0,
          "y": 40
        },
        "id": 84,
        "options": {
          "code": {
            "language": "plaintext",
            "showLineNumbers": false,
            "showMiniMap": false
          },
          "content": "",
          "mode": "markdown"
        },
        "pluginVersion": "11.3.1",
        "title": "",
        "transparent": true,
        "type": "text"
      },
      {
        "collapsed": false,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 42
        },
        "id": 51,
        "panels": [],
        "title": "Top Artikel",
        "type": "row"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "align": "auto",
              "cellOptions": {
                "type": "auto"
              },
              "filterable": true,
              "inspect": false
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green"
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Sophora"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "Sophora ID"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "visits_web"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "Web"
                },
                {
                  "id": "unit",
                  "value": "locale"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "visits_app"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "App"
                },
                {
                  "id": "unit",
                  "value": "locale"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "page_views"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "Page V."
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "page_web"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "Web"
                },
                {
                  "id": "unit",
                  "value": "locale"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "page_app"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "App"
                },
                {
                  "id": "unit",
                  "value": "locale"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Artikel"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 455
                },
                {
                  "id": "links",
                  "value": [
                    {
                      "title": "${__data.fields.url}",
                      "url": "${__data.fields.url}"
                    }
                  ]
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Sophora ID"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 328
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Visits"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 98
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Web"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 91
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "App"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 85
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Page V."
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 95
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Datum"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 251
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "url"
              },
              "properties": [
                {
                  "id": "custom.hidden",
                  "value": true
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Visits"
              },
              "properties": [
                {
                  "id": "unit",
                  "value": "locale"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "page_views"
              },
              "properties": [
                {
                  "id": "unit",
                  "value": "locale"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 13,
          "w": 24,
          "x": 0,
          "y": 43
        },
        "id": 62,
        "options": {
          "cellHeight": "sm",
          "footer": {
            "countRows": false,
            "enablePagination": true,
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "showHeader": true,
          "sortBy": []
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "with web as (\r\n  SELECT publishing_date, content_id_sophora, content_titel, url, IFNULL(SUM(m_visits),0) as m_visits, IFNULL(SUM(m_page_loads),0) as m_page_loads, uuid, page_chapter1 as Kapitel FROM(\r\n  SELECT   \r\n    FIRST_VALUE(publishing_date) OVER (PARTITION BY uuid ORDER BY publishing_date DESC) as publishing_date,\r\n    FIRST_VALUE(content_id_sophora) OVER (PARTITION BY uuid ORDER BY publishing_date DESC) as content_id_sophora,\r\n    FIRST_VALUE(content_titel) OVER (PARTITION BY uuid ORDER BY publishing_date DESC) as content_titel, \r\n    FIRST_VALUE(url) OVER (PARTITION BY uuid ORDER BY publishing_date DESC) as url, \r\n    m_visits,\r\n    m_page_loads, \r\n    uuid,\r\n    page_chapter1\r\n  from `ndr-code-bi-dashboard.Piano.articles_joined_daily` \r\n  WHERE \r\n    $listwebFilter \r\n    AND $Zeitraum\r\n    AND objekt_typ NOT LIKE 'indexPage'\r\n    AND content_id_sophora NOT LIKE '%index%'\r\n    AND content_id_sophora NOT LIKE '%N/A%'\r\n    AND content_id_sophora NOT LIKE '%verteilseite%'\r\n    AND content_id_sophora NOT LIKE '%nachrichtenfeed%'\r\n    )\r\n    GROUP BY uuid, publishing_date, content_id_sophora, content_titel, url, page_chapter1\r\n),\r\napp as (\r\n  SELECT IFNULL(SUM(m_visits),0) as m_visits, publishing_date, content_id_sophora, content_titel, url, IFNULL(SUM(m_page_loads),0) as m_page_loads, uuid FROM (\r\n  SELECT \r\n    m_visits, \r\n    FIRST_VALUE(publishing_date) OVER (PARTITION BY uuid ORDER BY publishing_date DESC) as publishing_date,\r\n    FIRST_VALUE(content_id_sophora) OVER (PARTITION BY uuid ORDER BY publishing_date DESC) as content_id_sophora,\r\n    FIRST_VALUE(content_titel) OVER (PARTITION BY uuid ORDER BY publishing_date DESC) as content_titel, \r\n    FIRST_VALUE(url) OVER (PARTITION BY uuid ORDER BY publishing_date DESC) as url, \r\n    m_page_loads, \r\n    uuid\r\n  from `ndr-code-bi-dashboard.Piano.articles_joined_daily` \r\n  WHERE CONTAINS_SUBSTR(site_level2, '$app_name')\r\n  AND $Zeitraum\r\n  AND content_id_sophora NOT LIKE '%index%'\r\n  AND content_id_sophora NOT LIKE '%N/A%'\r\n   AND (\r\n        CASE \r\n            WHEN \"$LRA\" = 'NDR' THEN\r\n                content_titel NOT LIKE '%Video Livestream%'\r\n            AND content_titel NOT LIKE '%Startteaser%'\r\n            AND content_titel NOT LIKE '%startteaser%'\r\n            AND content_titel NOT LIKE '%-Anmelden%'\r\n            AND content_titel NOT LIKE '%_Start'\r\n            AND content_titel != 'Anmelden'\r\n            AND content_titel != 'Jetzt lÃ¤uft'\r\n        ELSE\r\n          TRUE\r\n        END))\r\n  GROUP BY uuid, publishing_date, content_id_sophora, content_titel, url\r\n  ),\r\nsum_raw as (\r\n  SELECT \r\n  IFNULL(web.publishing_date, app.publishing_date) as publishing_date,\r\n  IFNULL(web.content_titel, app.content_titel) as content_titel, \r\n  IFNULL(web.content_id_sophora,app.content_id_sophora) as content_id_sophora, \r\n  IFNULL(web.url, app.url) as url,\r\n  IFNULL(web.uuid, app.uuid) as uuid,\r\n  IFNULL(web.m_visits,0) as visits_web, \r\n  IFNULL(app.m_visits,0) as visits_app, \r\n  IFNULL(web.m_page_loads,0) as page_web, \r\n  IFNULL(app.m_page_loads,0) as page_app, \r\n  Kapitel\r\n  FROM web\r\n  FULL JOIN app \r\n  ON web.uuid = app.uuid\r\n)\r\nSELECT \r\n  IF(LENGTH(MAX(publishing_date)) > 4,FORMAT_DATETIME('%d.%m.%Y | %R Uhr', DATETIME(MAX(publishing_date))),MAX(publishing_date)) as Datum, \r\n  content_titel as Artikel, \r\n  content_id_sophora as Sophora, \r\n  MAX(url) as url, \r\n  visits_web + visits_app as Visits, \r\n  visits_web as visits_web, \r\n  visits_app as visits_app, \r\n  page_web + page_app as page_views, \r\n  page_web as page_web, \r\n  page_app as page_app, \r\n  Kapitel\r\nFROM sum_raw\r\nGROUP BY content_titel,  content_id_sophora, uuid, Visits, visits_web, visits_app, page_views, page_web, page_app, Kapitel\r\nORDER BY Visits DESC\r\nLIMIT 100",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "Top Artikel",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "includeByName": {},
              "indexByName": {},
              "renameByName": {
                "Datum": "Publiziert"
              }
            }
          }
        ],
        "type": "table"
      },
      {
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 24,
          "x": 0,
          "y": 56
        },
        "id": 85,
        "options": {
          "code": {
            "language": "plaintext",
            "showLineNumbers": false,
            "showMiniMap": false
          },
          "content": "",
          "mode": "markdown"
        },
        "pluginVersion": "11.3.1",
        "title": "",
        "transparent": true,
        "type": "text"
      },
      {
        "collapsed": false,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 58
        },
        "id": 53,
        "panels": [],
        "title": "AV KPI",
        "type": "row"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "noValue": "Web",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "transparent"
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 4,
          "x": 0,
          "y": 59
        },
        "id": 67,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "valueSize": 54
          },
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "refId": "A"
          }
        ],
        "title": "",
        "transparent": true,
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "text"
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 10,
          "x": 4,
          "y": 59
        },
        "id": 68,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "valueSize": 54
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CONCAT(REPEAT(\" \", $filled_size_headline - CHAR_LENGTH('Video - Wiedergaben')), 'Video - Wiedergaben')\r\nFROM(\r\nSELECT 'Video - Wiedergaben' as Visits\r\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "text"
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 10,
          "x": 14,
          "y": 59
        },
        "id": 69,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "valueSize": 54
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CONCAT(REPEAT(\" \", $filled_size_headline - CHAR_LENGTH('Audio - Wiedergaben')), 'Audio - Wiedergaben')\r\nFROM(\r\nSELECT 'Audio - Wiedergaben' as Visits\r\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "text"
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 4,
          "x": 0,
          "y": 62
        },
        "id": 64,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "valueSize": 54
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CONCAT(REPEAT(\" \", $filled_size_headline - CHAR_LENGTH('Web & App')), 'Web & App')\r\nFROM(\r\nSELECT 'Web & App' as Visits\r\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#00817e"
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 5,
          "x": 4,
          "y": 62
        },
        "id": 71,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 30
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "with web as (\r\n  SELECT \r\n  SUM(COALESCE(m_av_playbacks,0)) as Zeitraum,\r\n  1 as id\r\nFROM \r\n  `ndr-code-bi-dashboard.Piano.av_joined_daily` \r\nWHERE \r\n$avwebFilter And\r\n$Zeitraum\r\nAND (av_content_type = \"video\" OR av_content_type = \"Video\")\r\nAND bi_av_broadcasting_type NOT IN ('live', 'Live')\r\n), app as (\r\n  SELECT \r\n  SUM(COALESCE(m_playbutton, m_av_playbacks, 0)) as Zeitraum,\r\n  1 as id\r\nFROM  \r\n  `ndr-code-bi-dashboard.Piano.av_joined_daily`\r\n  WHERE ${av_condition} \r\n  AND $Zeitraum \r\nAND $av_app_condition_video\r\nAND bi_av_broadcasting_type NOT IN ('live', 'Live')\r\n)\r\nSELECT IFNULL(SUM(web.Zeitraum),0) + IFNULL(SUM(app.Zeitraum),0) as Zeitraum\r\nFROM web\r\nJOIN app\r\nON web.id = app.id\r\n\r\n\r\n",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "semi-dark-blue",
              "mode": "fixed"
            },
            "custom": {
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              }
            },
            "mappings": [],
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Web"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#a0d6c4",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "App"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#1da3a1",
                    "mode": "fixed"
                  }
                },
                {
                  "id": "displayName"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 14,
          "w": 5,
          "x": 9,
          "y": 62
        },
        "id": 76,
        "options": {
          "displayLabels": [
            "percent"
          ],
          "legend": {
            "displayMode": "table",
            "placement": "right",
            "showLegend": true,
            "values": []
          },
          "pieType": "pie",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "with web as (\r\n  SELECT \r\n  SUM(COALESCE(m_av_playbacks,0)) as Zeitraum,\r\n  1 as id\r\nFROM \r\n  `ndr-code-bi-dashboard.Piano.av_joined_daily` \r\nWHERE \r\n$avwebFilter And\r\n$Zeitraum\r\nAND (av_content_type = \"video\" OR av_content_type = \"Video\")\r\nAND bi_av_broadcasting_type NOT IN ('live', 'Live')\r\n), app as (\r\n  SELECT \r\n  SUM(COALESCE(m_playbutton, m_av_playbacks, 0)) as Zeitraum,\r\n  1 as id\r\nFROM  \r\n  `ndr-code-bi-dashboard.Piano.av_joined_daily`\r\n  WHERE ${av_condition} \r\n  AND $Zeitraum\r\nAND $av_app_condition_video\r\nAND bi_av_broadcasting_type NOT IN ('live', 'Live')\r\n)\r\nSELECT IFNULL(SUM(web.Zeitraum),0) AS Web, IFNULL(SUM(app.Zeitraum),0) as App\r\nFROM web\r\nJOIN app\r\nON web.id = app.id\r\n\r\n",
            "refId": "a",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "transparent": true,
        "type": "piechart"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#00817e"
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 5,
          "x": 14,
          "y": 62
        },
        "id": 77,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 30
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "with web as (\r\n  SELECT \r\n  SUM(COALESCE(m_av_playbacks,0)) as Zeitraum,\r\n  1 as id\r\nFROM \r\n  `ndr-code-bi-dashboard.Piano.av_joined_daily` \r\nWHERE \r\n$avwebFilter And\r\n$Zeitraum\r\nAND bi_av_broadcasting_type NOT IN ('live', 'Live')\r\nAND (av_content_type = \"audio\" OR av_content_type = \"Audio\")\r\n), app as (\r\n  SELECT \r\n  SUM(COALESCE(m_playbutton, m_av_playbacks, 0)) as Zeitraum,\r\n  1 as id\r\nFROM  \r\n  `ndr-code-bi-dashboard.Piano.av_joined_daily`\r\n  WHERE ${av_condition} \r\n  AND $Zeitraum\r\nAND $av_app_condition_audio\r\nAND bi_av_broadcasting_type NOT IN ('live', 'Live')\r\n)\r\nSELECT IFNULL(SUM(web.Zeitraum),0) + IFNULL(SUM(app.Zeitraum),0) as Zeitraum\r\nFROM web\r\nJOIN app\r\nON web.id = app.id\r\n\r\n",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "semi-dark-blue",
              "mode": "fixed"
            },
            "custom": {
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              }
            },
            "mappings": [],
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Web"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#a0d6c4",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "App"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#1da3a1",
                    "mode": "fixed"
                  }
                },
                {
                  "id": "displayName"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 14,
          "w": 5,
          "x": 19,
          "y": 62
        },
        "id": 80,
        "options": {
          "displayLabels": [
            "percent"
          ],
          "legend": {
            "displayMode": "list",
            "placement": "right",
            "showLegend": true,
            "values": []
          },
          "pieType": "pie",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "with web as (\r\n  SELECT \r\n  SUM(COALESCE(m_av_playbacks,0)) as Zeitraum,\r\n  1 as id\r\nFROM \r\n  `ndr-code-bi-dashboard.Piano.av_joined_daily` \r\nWHERE \r\n$avwebFilter And\r\n$Zeitraum\r\nAND (av_content_type = \"audio\" OR av_content_type = \"Audio\")\r\n), app as (\r\n  SELECT \r\n  SUM(COALESCE(m_playbutton, m_av_playbacks, 0)) as Zeitraum,\r\n  1 as id\r\nFROM  \r\n  `ndr-code-bi-dashboard.Piano.av_joined_daily`\r\n  WHERE ${av_condition} \r\n  AND $Zeitraum \r\nAND $av_app_condition_audio\r\n)\r\nSELECT IFNULL(SUM(web.Zeitraum),0) AS Web, IFNULL(SUM(app.Zeitraum),0) as App\r\nFROM web\r\nJOIN app\r\nON web.id = app.id\r\n\r\n",
            "refId": "a",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "transparent": true,
        "type": "piechart"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "text"
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 4,
          "x": 0,
          "y": 70
        },
        "id": 65,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "valueSize": 54
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CONCAT(REPEAT(\" \", $filled_size_headline - CHAR_LENGTH('Web')), 'Web')\r\nFROM(\r\nSELECT 'Web' as Visits\r\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#00c7c4"
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 5,
          "x": 4,
          "y": 70
        },
        "id": 74,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20,
            "valueSize": 34
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT \r\n  SUM(COALESCE(m_av_playbacks,0)) as Zeitraum,\r\nFROM \r\n  `ndr-code-bi-dashboard.Piano.av_joined_daily` \r\nWHERE \r\n$avwebFilter And\r\n$Zeitraum\r\nAND (av_content_type = \"video\" OR av_content_type = \"Video\")\r\nAND bi_av_broadcasting_type NOT IN ('live', 'Live')\r\n--AND bi_av_broadcasting_type = \"ondemand\"\r\n\r\n",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#00c7c4"
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 5,
          "x": 14,
          "y": 70
        },
        "id": 81,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20,
            "valueSize": 34
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT \r\n  SUM(COALESCE(m_av_playbacks,0)) as Zeitraum,\r\nFROM \r\n  `ndr-code-bi-dashboard.Piano.av_joined_daily` \r\nWHERE \r\n$avwebFilter And\r\n$Zeitraum\r\nAND (av_content_type = \"audio\" OR av_content_type = \"Audio\")\r\n\r\n\r\n",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "text"
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 4,
          "x": 0,
          "y": 73
        },
        "id": 66,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "valueSize": 54
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CONCAT(REPEAT(\" \", $filled_size_headline - CHAR_LENGTH('App')), 'App')\r\nFROM(\r\nSELECT 'App' as Visits\r\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#00c7c4"
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 5,
          "x": 4,
          "y": 73
        },
        "id": 75,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20,
            "valueSize": 34
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT \r\n  SUM(COALESCE(m_playbutton, m_av_playbacks, 0)) as Zeitraum,\r\nFROM  \r\n  `ndr-code-bi-dashboard.Piano.av_joined_daily`\r\n  WHERE ${av_condition} \r\n  AND $Zeitraum \r\nAND $av_app_condition_video\r\n\r\n\r\n",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#00c7c4"
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 5,
          "x": 14,
          "y": 73
        },
        "id": 82,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20,
            "valueSize": 34
          },
          "textMode": "value",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT \r\n  SUM(COALESCE(m_playbutton, m_av_playbacks, 0)) as Zeitraum,\r\nFROM  \r\n  `ndr-code-bi-dashboard.Piano.av_joined_daily`\r\n  WHERE ${av_condition} \r\n  AND $Zeitraum\r\nAND $av_app_condition_audio\r\n\r\n",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "stat"
      },
      {
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 16,
          "x": 0,
          "y": 76
        },
        "id": 114,
        "options": {
          "code": {
            "language": "plaintext",
            "showLineNumbers": false,
            "showMiniMap": false
          },
          "content": "Hinweis: Momentan keine Web-AV-Messung fÃ¼r die NDR LÃ¤nder mÃ¶glich.",
          "mode": "markdown"
        },
        "pluginVersion": "11.3.1",
        "title": "",
        "transparent": true,
        "type": "text"
      },
      {
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 24,
          "x": 0,
          "y": 78
        },
        "id": 12,
        "options": {
          "code": {
            "language": "plaintext",
            "showLineNumbers": false,
            "showMiniMap": false
          },
          "content": "",
          "mode": "markdown"
        },
        "pluginVersion": "11.3.1",
        "title": "",
        "transparent": true,
        "type": "text"
      },
      {
        "collapsed": false,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 80
        },
        "id": 55,
        "panels": [],
        "title": "Top Audios & Videos on Demand",
        "type": "row"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "align": "auto",
              "cellOptions": {
                "type": "auto"
              },
              "filterable": true,
              "inspect": false
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green"
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Titel"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 606
                },
                {
                  "id": "links",
                  "value": [
                    {
                      "targetBlank": true,
                      "title": "${__data.fields.url}",
                      "url": "${__data.fields.url}"
                    }
                  ]
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Sophora ID"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 326
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "url"
              },
              "properties": [
                {
                  "id": "custom.hidden",
                  "value": true
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "MedienlÃ¤nge"
              },
              "properties": [
                {
                  "id": "unit",
                  "value": "dthms"
                },
                {
                  "id": "displayName",
                  "value": "LÃ¤nge"
                },
                {
                  "id": "custom.align",
                  "value": "center"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Publiziert"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 257
                },
                {
                  "id": "unit",
                  "value": "time: DD.MM.YYYY | HH:mm \\U\\h\\r"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Wiederg."
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 100
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Web"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 107
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "App"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 97
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Typ"
              },
              "properties": [
                {
                  "id": "custom.align",
                  "value": "center"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 13,
          "w": 24,
          "x": 0,
          "y": 81
        },
        "id": 87,
        "options": {
          "cellHeight": "sm",
          "footer": {
            "countRows": false,
            "enablePagination": true,
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "showHeader": true,
          "sortBy": []
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "with web as (\r\n  SELECT bi_av_publication_date,\r\n  bi_av_content, \r\n  bi_av_content_id,\r\n  bi_av_url as url,\r\n  sum(m_av_playbacks) as wiedergabe,\r\n  CONCAT(CONCAT(\r\n\r\nÂ  CASE WHEN LENGTH(CAST(DIV(av_content_duration,60) AS String))<2 THEN CONCAT(\"0\",CAST(DIV(av_content_duration,60) AS String)) ELSE CAST(DIV(av_content_duration,60) AS String)Â  END ,\r\n\r\nÂ  \":\",CASE WHEN LENGTH(CAST(MOD(av_content_duration,60) AS String))<2 THEN CONCAT(\"0\",CAST(MOD(av_content_duration,60) AS String)) ELSE CAST(MOD(av_content_duration,60) AS String)Â  END),\" Min\") as av_content_duration,\r\nSUM(m_av_playbacks * m_av_average_playback_completion_rate) / SUM(m_av_playbacks) wiedergaberate,\r\nav_content_type,\r\nbi_av_broadcasting_type,\r\n   FROM(\r\n  SELECT \r\n    FIRST_VALUE(bi_av_publication_date) OVER (PARTITION BY bi_av_content_id ORDER BY m_av_playbacks DESC) as bi_av_publication_date,\r\n    m_av_playbacks,\r\n     CAST(FIRST_VALUE(av_content_duration) OVER (PARTITION BY bi_av_content_id ORDER BY bi_av_publication_date DESC)/1000 AS INT) as av_content_duration,\r\n    bi_av_content_id,\r\n    m_av_average_playback_completion_rate,\r\n    bi_av_broadcasting_type,\r\n    FIRST_VALUE(bi_av_content) OVER (PARTITION BY bi_av_content_id ORDER BY m_av_playbacks DESC) as bi_av_content, \r\n    FIRST_VALUE(bi_av_url) OVER (PARTITION BY bi_av_content_id ORDER BY m_av_playbacks DESC) as bi_av_url, \r\n    av_content_type\r\n  from\r\n    `ndr-code-bi-dashboard.Piano.av_joined_daily`\r\n  WHERE\r\n    $avwebFilter\r\n    AND $Zeitraum\r\n    AND bi_av_content_id NOT LIKE '%index%'\r\n    AND bi_av_broadcasting_type = \"ondemand\"\r\n    )\r\n    WHERE m_av_playbacks > 0\r\n  GROUP By\r\n    bi_av_publication_date,bi_av_content,av_content_duration,av_content_type,bi_av_content_id, bi_av_broadcasting_type, bi_av_url\r\n),\r\napp as (\r\nSELECT \r\nbi_av_publication_date,\r\nbi_av_content, bi_av_content_id,\r\nbi_av_url as url,\r\nsum(m_av_playbacks) as wiedergabe, \r\nCONCAT(CONCAT(\r\n\r\nÂ  CASE WHEN LENGTH(CAST(DIV(MAX(av_content_duration),60) AS String))<2 THEN CONCAT(\"0\",CAST(DIV(MAX(av_content_duration),60) AS String)) ELSE CAST(DIV(MAX(av_content_duration),60) AS String)Â  END ,\r\n\r\nÂ  \":\",CASE WHEN LENGTH(CAST(MOD(MAX(av_content_duration),60) AS String))<2 THEN CONCAT(\"0\",CAST(MOD(MAX(av_content_duration),60) AS String)) ELSE CAST(MOD(MAX(av_content_duration),60) AS String)Â  END),\" Min\") as av_content_duration,\r\nCASE \"$LRA\"\r\nWHEN \"NDR\" THEN NULL\r\nELSE 100*SUM(m_av_playbacks * m_av_average_playback_completion_rate) / SUM(m_av_playbacks) END as wiedergaberate,\r\nav_content_type,\r\nbi_av_broadcasting_type,\r\n--device_type,\r\nFROM\r\n(\r\nSELECT\r\nFIRST_VALUE($av_pub_date) OVER (PARTITION BY bi_av_content_id ORDER BY COALESCE(m_playbutton, m_av_playbacks) DESC) as bi_av_publication_date,  \r\nCOALESCE(m_playbutton,m_av_playbacks) as m_av_playbacks, \r\nCASE  \r\n      WHEN av_content_duration is NULL THEN NULL\r\n      ELSE CAST((av_content_duration/1000) AS INT) END av_content_duration,\r\n--CAST((av_content_duration/1000) AS INT) as av_content_duration,  \r\nm_av_average_playback_completion_rate, \r\nCOALESCE(objekt_typ, av_content_type) as av_content_type, COALESCE(content_id_sophora, bi_av_content_id) as bi_av_content_id,  \r\nCOALESCE(objekt_typ ,bi_av_broadcasting_type) as bi_av_broadcasting_type ,  \r\nFIRST_VALUE(bi_av_url) OVER (PARTITION BY $av_content_id ORDER BY COALESCE(m_playbutton, m_av_playbacks) DESC) as bi_av_url,  \r\n\r\n--device_type,\r\nFIRST_VALUE($av_content) OVER (PARTITION BY COALESCE(content_id_sophora,bi_av_content_id) ORDER BY COALESCE(m_playbutton,m_av_playbacks) DESC) as bi_av_content  \r\nFROM \r\n`ndr-code-bi-dashboard.Piano.av_joined_daily`\r\nWHERE ${av_condition}\r\nAND COALESCE(content_id_sophora, bi_av_content_id) NOT LIKE '%index%'  \r\nAND COALESCE(objekt_typ, bi_av_broadcasting_type) IN $av_on_demand_filter  \r\nAND $Zeitraum)  \r\nWHERE m_av_playbacks > 0\r\nGROUP BY bi_av_publication_date,bi_av_content,av_content_type,bi_av_content_id, bi_av_broadcasting_type, bi_av_url\r\n),\r\nsum_raw as (\r\n  SELECT\r\n    IFNULL(\r\n      web.bi_av_publication_date,\r\n      app.bi_av_publication_date\r\n    ) as Publiziert,\r\n    IFNULL(web.bi_av_content, app.bi_av_content) as Titel,\r\n    IFNULL(web.bi_av_content_id, app.bi_av_content_id) as bi_av_content_id,\r\n    IFNULL(web.av_content_duration, app.av_content_duration) as av_content_duration,\r\n    IFNULL(web.url, app.url) as url,\r\n    IFNULL(web.wiedergabe, 0) as playbacks_web,\r\n    IFNULL(web.wiedergabe, 0) + IFNULL(app.wiedergabe, 0) as playbacks,\r\n    IFNULL(app.wiedergabe, 0) as playbacks_app,\r\n    IFNULL(web.av_content_type, app.av_content_type) as av_content_type\r\n  FROM\r\n    web FULL\r\n    JOIN app ON web.bi_av_content_id = app.bi_av_content_id\r\n)\r\nSELECT\r\n  *\r\nFROM\r\nsum_raw\r\nORDER BY\r\n  playbacks DESC\r\nLIMIT\r\n  100",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "Top 100 App Audios & Videos on Demand",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {
                "Publiziert": 0,
                "Titel": 1,
                "av_content_duration": 6,
                "av_content_type": 8,
                "bi_av_content_id": 2,
                "playbacks": 3,
                "playbacks_app": 5,
                "playbacks_web": 4,
                "url": 7
              },
              "renameByName": {
                "av_content_duration": "MedienlÃ¤nge",
                "av_content_type": "Typ",
                "bi_av_content_id": "Sophora ID",
                "playbacks": "Wiederg.",
                "playbacks_app": "App",
                "playbacks_web": "Web"
              }
            }
          }
        ],
        "type": "table"
      },
      {
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 24,
          "x": 0,
          "y": 94
        },
        "id": 90,
        "options": {
          "code": {
            "language": "plaintext",
            "showLineNumbers": false,
            "showMiniMap": false
          },
          "content": "",
          "mode": "markdown"
        },
        "pluginVersion": "11.3.1",
        "title": "",
        "transparent": true,
        "type": "text"
      },
      {
        "collapsed": false,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 96
        },
        "id": 57,
        "panels": [],
        "title": "Top Audios & Videos Livestream",
        "type": "row"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "align": "auto",
              "cellOptions": {
                "type": "auto"
              },
              "filterable": true,
              "inspect": false
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green"
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Titel"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 606
                },
                {
                  "id": "links",
                  "value": [
                    {
                      "targetBlank": true,
                      "title": "${__data.fields.url}",
                      "url": "${__data.fields.url}"
                    }
                  ]
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Sophora ID"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 235
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "url"
              },
              "properties": [
                {
                  "id": "custom.hidden",
                  "value": true
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "av_content_duration"
              },
              "properties": [
                {
                  "id": "unit",
                  "value": "dthms"
                },
                {
                  "id": "displayName"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Publiziert"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 257
                },
                {
                  "id": "unit",
                  "value": "time: DD.MM.YYYY | HH:mm \\U\\h\\r"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Wiederg."
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 100
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Web"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 107
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "App"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 97
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 13,
          "w": 24,
          "x": 0,
          "y": 97
        },
        "id": 112,
        "options": {
          "cellHeight": "sm",
          "footer": {
            "countRows": false,
            "enablePagination": true,
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "showHeader": true,
          "sortBy": []
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "with web as (\r\n  SELECT \r\nbi_av_publication_date,\r\nbi_av_content, bi_av_content_id,\r\nbi_av_url as url,\r\nsum(m_av_playbacks) as wiedergabe,\r\nav_content_type,\r\nbi_av_broadcasting_type,\r\n\r\nFROM\r\n(\r\nSELECT\r\nFIRST_VALUE(bi_av_publication_date) OVER (PARTITION BY bi_av_content_id ORDER BY m_av_playbacks DESC) as bi_av_publication_date, \r\nm_av_playbacks,\r\nav_content_type, bi_av_content_id,\r\nbi_av_broadcasting_type, \r\nFIRST_VALUE(bi_av_url) OVER (PARTITION BY bi_av_content_id ORDER BY m_av_playbacks DESC) as bi_av_url, \r\n\r\n--device_type,\r\nFIRST_VALUE(bi_av_content) OVER (PARTITION BY bi_av_content_id ORDER BY m_av_playbacks DESC) as bi_av_content, \r\nCAST(av_content_duration/1000 AS INT) as av_content_duration,\r\nFROM \r\n  `ndr-code-bi-dashboard.Piano.av_joined_daily`\r\nWHERE $avwebFilter\r\nAND bi_av_content_id NOT LIKE '%index%'\r\nAND bi_av_broadcasting_type = \"live\"\r\nAND $Zeitraum)\r\nWHERE m_av_playbacks > 0\r\nGROUP BY bi_av_publication_date,bi_av_content,\r\nav_content_type,bi_av_content_id, bi_av_broadcasting_type, bi_av_url, av_content_duration\r\n),\r\napp as (\r\n  SELECT \r\nbi_av_publication_date,\r\nbi_av_content, bi_av_content_id,\r\nbi_av_url as url,\r\nsum(m_av_playbacks) as wiedergabe,\r\nav_content_type,\r\nbi_av_broadcasting_type,\r\nFROM\r\n(\r\nSELECT\r\nFIRST_VALUE($av_pub_date) OVER (PARTITION BY $av_content_id ORDER BY COALESCE(m_playbutton, m_av_playbacks) DESC) as bi_av_publication_date, \r\nCOALESCE(m_playbutton,m_av_playbacks) as m_av_playbacks,\r\nCOALESCE(content_typ, av_content_type) as av_content_type, $av_content_id as bi_av_content_id,\r\nbi_av_broadcasting_type, \r\nFIRST_VALUE(bi_av_url) OVER (PARTITION BY $av_content ORDER BY COALESCE(m_playbutton, m_av_playbacks) DESC) as bi_av_url, \r\nCAST(av_content_duration/1000 AS INT) as av_content_duration,\r\n\r\n--device_type,\r\nFIRST_VALUE($av_content) OVER (PARTITION BY $av_content_id ORDER BY COALESCE(m_playbutton, m_av_playbacks) DESC) as bi_av_content, \r\nFROM \r\n`ndr-code-bi-dashboard.Piano.av_joined_daily`\r\nWHERE ${av_condition}\r\nAND $av_content_id NOT LIKE '%index%'\r\nAND COALESCE(objekt_typ, bi_av_broadcasting_type) IN $av_live_stream_filter\r\nAND $Zeitraum)\r\nWHERE m_av_playbacks > 0\r\nGROUP BY bi_av_publication_date,bi_av_content,\r\nav_content_type,bi_av_content_id, bi_av_broadcasting_type, bi_av_url, av_content_duration\r\n),\r\nsum_raw as (\r\n  SELECT\r\n    IFNULL(\r\n      web.bi_av_publication_date,\r\n      app.bi_av_publication_date\r\n    ) as bi_av_publication_date,\r\n    IFNULL(web.bi_av_content, app.bi_av_content) as content_titel,\r\n    --IFNULL(web.av_content_duration, app.av_content_duration) as av_content_duration,\r\n    IFNULL(web.bi_av_content_id, app.bi_av_content_id) as bi_av_content_id,\r\n    IFNULL(web.url, app.url) as url,\r\n    IFNULL(web.wiedergabe, 0) as playbacks_web,\r\n    IFNULL(app.wiedergabe, 0) as playbacks_app,\r\n    IFNULL(web.wiedergabe, 0) + IFNULL(app.wiedergabe, 0) as playbacks,\r\n    IFNULL(web.av_content_type, app.av_content_type) as av_content_type\r\n  FROM\r\n    web FULL\r\n    JOIN app ON web.bi_av_content_id = app.bi_av_content_id\r\n)\r\nSELECT\r\n  *\r\nFROM\r\nsum_raw\r\nORDER BY\r\n  playbacks DESC\r\nLIMIT\r\n  100",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "Top 100 App Audios & Videos Livestreams",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {
                "av_content_type": 7,
                "bi_av_content_id": 2,
                "bi_av_publication_date": 0,
                "content_titel": 1,
                "playbacks": 3,
                "playbacks_app": 6,
                "playbacks_web": 5,
                "url": 4
              },
              "renameByName": {
                "av_content_type": "Typ",
                "bi_av_content_id": "Sophora ID",
                "bi_av_publication_date": "Publiziert",
                "content_titel": "Titel",
                "playbacks": "Wiederg.",
                "playbacks_app": "App",
                "playbacks_web": "Web"
              }
            }
          }
        ],
        "type": "table"
      },
      {
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 24,
          "x": 0,
          "y": 110
        },
        "id": 91,
        "options": {
          "code": {
            "language": "plaintext",
            "showLineNumbers": false,
            "showMiniMap": false
          },
          "content": "",
          "mode": "markdown"
        },
        "pluginVersion": "11.3.1",
        "title": "",
        "transparent": true,
        "type": "text"
      },
      {
        "collapsed": false,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 112
        },
        "id": 59,
        "panels": [],
        "title": "Distribution",
        "type": "row"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              }
            },
            "mappings": [],
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Desktop"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#75b9b0",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Mobile Phone"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#95c1ac",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Tablet"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#63b7cc",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "N/A"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#a7d9b0",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "TV"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#3c71a6",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Media Player"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#7ca784",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Set Top Box"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#327a8c",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Games Console"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#51e09d",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Vehicle Multimedia System"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#73d9cb",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Sonstige"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#5c6f84",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Data Collection Terminal"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#5c8463",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Digital Home Assistant"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#5c7c84",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "VR Headset"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#5c8471",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Digital Whiteboard"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#a9d9d2",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "eReader"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#a7bfd9",
                    "mode": "fixed"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 13,
          "w": 14,
          "x": 5,
          "y": 113
        },
        "id": 96,
        "options": {
          "displayLabels": [
            "percent"
          ],
          "legend": {
            "displayMode": "table",
            "placement": "right",
            "showLegend": true,
            "values": [
              "percent",
              "value"
            ]
          },
          "pieType": "pie",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "limit": 25,
            "values": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "with web as (\r\nSELECT \r\n  SUM(m_visits) as visits, \r\n  device_type \r\nFROM\r\n  Piano.distro_joined_daily\r\nWHERE $webFilter \r\nAND $Zeitraum\r\nAND device_type NOT LIKE '%N/A%'\r\nAND CASE WHEN \r\n      site_level2 = \"mdr.de\" \r\n      THEN (distribution = \"web\" OR distribution =\"amp\")\r\n      ELSE 1=1 END \r\nGROUP BY device_type),\r\napp as (\r\nSELECT\r\ndevice_type,\r\nSUM(m_visits) as visits\r\nFROM\r\n  Piano.distro_joined_daily\r\nWHERE $appFilter\r\n  AND $Zeitraum\r\n  AND device_type NOT LIKE '%N/A%'\r\nGROUP BY device_type \r\n)\r\nSELECT IFNULL(web.visits,0) + IFNULL(app.visits,0) as visits, IFNULL(web.device_type,app.device_type) as device_type\r\nFROM web\r\nFULL JOIN app\r\nUSING(device_type)\r\n",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "Distribution nach GerÃ¤tetyp",
        "transparent": true,
        "type": "piechart"
      }
    ],
    "preload": false,
    "refresh": false,
    "schemaVersion": 40,
    "tags": [],
    "templating": {
      "list": [
        {
          "current": {
            "text": "MDR",
            "value": "MDR"
          },
          "includeAll": false,
          "name": "LRA",
          "options": [
            {
              "selected": false,
              "text": "NDR",
              "value": "NDR"
            },
            {
              "selected": true,
              "text": "MDR",
              "value": "MDR"
            }
          ],
          "query": "NDR,MDR",
          "type": "custom"
        },
        {
          "current": {
            "text": "Nachrichten",
            "value": "Nachrichten"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "includeAll": false,
          "name": "Redaktionen",
          "options": [],
          "query": {
            "dataset": "Piano",
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "IF ('$LRA' LIKE 'MDR') THEN (\r\n  SELECT 'Nachrichten'\r\n  UNION ALL\r\n  SELECT 'Sport'\r\n  UNION ALL\r\n  SELECT 'Sorbisches Programm'\r\n  UNION ALL\r\n  SELECT 'Jump'\r\n);\r\nELSEIF ('$LRA' LIKE 'NDR') THEN (\r\n  SELECT 'Alle Kapitel 1'\r\n  UNION ALL\r\n  SELECT 'Nachrichten'\r\n  UNION ALL\r\n  SELECT 'Kultur'\r\n);\r\nEND IF",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "page_chapter1",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            },
            "table": "Profiles"
          },
          "refresh": 1,
          "regex": "",
          "type": "query"
        },
        {
          "current": {
            "text": "Aktuell",
            "value": "Aktuell"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "includeAll": false,
          "name": "Unterkapitel",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "IF ('$LRA' LIKE 'MDR' AND '$Redaktionen' LIKE 'Nachrichten') THEN (\r\n  SELECT 'Aktuell'\r\n  UNION ALL\r\n  SELECT 'Sachsen'\r\n  UNION ALL\r\n  SELECT 'Sachsen-Anhalt'\r\n  UNION ALL\r\n  SELECT 'ThÃ¼ringen'\r\n);\r\nELSEIF ('$LRA' LIKE 'NDR' AND '$Redaktionen' LIKE 'Nachrichten') THEN (\r\n  SELECT 'Info'\r\n -- UNION ALL\r\n -- SELECT 'Hamburg'\r\n -- UNION ALL\r\n -- SELECT 'Mecklenburg-Vorpommern'\r\n -- UNION ALL\r\n -- SELECT 'Niedersachsen'\r\n -- UNION ALL\r\n -- SELECT 'Schleswig-Holstein'\r\n);\r\nELSEIF ('$LRA' LIKE 'NDR' AND '$Redaktionen' LIKE 'Alle Kapitel 1') THEN (\r\n  SELECT 'Hamburg'\r\n  UNION ALL\r\n  SELECT 'Mecklenburg-Vorpommern'\r\n  UNION ALL\r\n  SELECT 'Niedersachsen'\r\n  UNION ALL\r\n  SELECT 'Schleswig-Holstein'\r\n);\r\nELSE (SELECT 'Alle Kapitel 2');\r\nEND IF",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "type": "query"
        },
        {
          "current": {
            "text": "date  = DATE_ADD(CURRENT_DATE,INTERVAL 1 DAY)",
            "value": "date  = DATE_ADD(CURRENT_DATE,INTERVAL 1 DAY)"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "Zeitraum",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": " SELECT CASE \r\n\r\n       --  case: \"Last 24 HOURS \"\r\n    WHEN DATE('${__from:date:iso}', \"Europe/Berlin\") >= CURRENT_DATE(\"Europe/Berlin\")  OR TIMESTAMP_DIFF(TIMESTAMP('${__to:date:iso}'), TIMESTAMP('${__from:date:iso}'), HOUR) = 24 AND EXTRACT(DAY FROM DATETIME('${__from:date:iso}', \"Europe/Berlin\")) != EXTRACT(DAY FROM DATETIME('${__to:date:iso}', \"Europe/Berlin\")) OR TIMESTAMP_DIFF(TIMESTAMP('${__to:date:iso}'), TIMESTAMP('${__from:date:iso}'), MINUTE) < 1439\r\n    THEN \"\"\"date  = DATE_ADD(CURRENT_DATE,INTERVAL 1 DAY)\"\"\"\r\n    -- case: CURRENT_DATE()\r\n    WHEN EXTRACT(DATE FROM TIMESTAMP('${__to:date:iso}')) >= CURRENT_DATE(\"Europe/Berlin\") \r\n    THEN  \"\"\"date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE_SUB(\"$HeuteDatum\", INTERVAL 1 DAY)\"\"\"\r\n    ELSE  \"\"\"date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\"\"\"\r\n\r\n    END \r\n",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "app_mdraktuell",
            "value": "app_mdraktuell"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "app_name",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE '$LRA'\r\n  WHEN 'NDR' THEN\r\n    CASE '$Redaktionen'\r\n      WHEN \"Kultur\" THEN \"kultur-app\"\r\n      WHEN \"Nachrichten\" THEN \r\n        CASE '$Unterkapitel'\r\n          WHEN 'Info'  THEN 'ndrinfo-app'\r\n          WHEN 'Hamburg' THEN 'hh-app'\r\n          WHEN 'Mecklenburg-Vorpommern' THEN 'mv-app'\r\n          WHEN 'Niedersachsen' THEN 'nds-app'\r\n          WHEN 'Schleswig-Holstein' THEN 'sh-app'\r\n          ELSE 'KEINE APP'\r\n        END\r\n        WHEN \"Alle Kapitel 1\" THEN \r\n        CASE '$Unterkapitel'\r\n          WHEN 'Info'  THEN 'ndrinfo-app'\r\n          WHEN 'Hamburg' THEN 'hh-app'\r\n          WHEN 'Mecklenburg-Vorpommern' THEN 'mv-app'\r\n          WHEN 'Niedersachsen' THEN 'nds-app'\r\n          WHEN 'Schleswig-Holstein' THEN 'sh-app'\r\n          ELSE 'KEINE APP'\r\n        END\r\n      ELSE 'KEINE APP'\r\n    END\r\n  WHEN 'MDR' THEN \r\n    CASE \"${Redaktionen}\"\r\n      WHEN \"Sport\" THEN 'app_mdrsport'\r\n      WHEN \"Jump\" THEN 'app_mdrjump'\r\n      WHEN \"Nachrichten\" THEN \r\n        CASE '$Unterkapitel'\r\n          WHEN 'Aktuell' THEN 'app_mdraktuell'\r\n          WHEN 'Sachsen' THEN 'app_mdrsachsen'\r\n          WHEN 'Sachsen-Anhalt' THEN 'app_mdrsachsenanhalt'\r\n          WHEN 'ThÃ¼ringen' THEN 'app_mdrthueringen'\r\n          ELSE 'KEINE APP'\r\n      END\r\n      WHEN \"Sorbisches Programm\" THEN 'app_mdrserbja'\r\n      ELSE 'KEINE APP'\r\n    END\r\nEND\r\n-- radio-app, orchester-app, hh-app, kultur-app, sesamstraÃŸen-app, ndrinfo-app, sh-app, nds-app, n-joy-app, mv-app",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "mdr.de",
            "value": "mdr.de"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "site_level2",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE '$LRA'\r\n  WHEN 'MDR' THEN \r\n    CASE '$Redaktionen'\r\n      WHEN 'Jump' THEN 'mdr.de'\r\n      ELSE 'mdr.de'\r\n    END\r\n  WHEN 'NDR' THEN 'ndr.de'\r\nEND",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "nachrichten",
            "value": "nachrichten"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "page_chapter1",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE '$Redaktionen'\r\n  WHEN 'Nachrichten' THEN 'nachrichten'\r\n  WHEN 'Sport' THEN 'sport'\r\n  WHEN 'Sorbisches Programm' THEN 'sorbisches-programm'\r\n  WHEN 'Jump' THEN 'Jump'\r\n  WHEN 'Kultur' THEN 'kultur'\r\n  WHEN 'Alle Kapitel 1' THEN 'Alle Kapitel 1'\r\nEND",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "Alle Kapitel 2",
            "value": "Alle Kapitel 2"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "page_chapter2",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE '$LRA'\r\n  WHEN 'NDR' THEN\r\n    CASE '$Redaktionen'\r\n      WHEN \"Kultur\" THEN 'Alle Kapitel 2'\r\n      WHEN \"Nachrichten\" THEN \r\n        CASE '$Unterkapitel'\r\n          WHEN 'Info'  THEN 'Alle Kapitel 2'\r\n          WHEN 'Hamburg' THEN 'hamburg'\r\n          WHEN 'Mecklenburg-Vorpommern' THEN 'mecklenburg-vorpommern'\r\n          WHEN 'Niedersachsen' THEN 'niedersachsen'\r\n          WHEN 'Schleswig-Holstein' THEN 'schleswig-holstein'\r\n          ELSE 'Alle Kapitel 2'\r\n        END\r\n      WHEN \"Alle Kapitel 1\" THEN 'Alle Kapitel 2'\r\n      ELSE 'Alle Kapitel 2'\r\n    END\r\n  WHEN 'MDR' THEN \r\n    CASE \"${Redaktionen}\"\r\n      WHEN \"Sport\" THEN 'Alle Kapitel 2'\r\n      WHEN \"Jump\" THEN 'Alle Kapitel 2'\r\n      WHEN \"Nachrichten\" THEN \r\n        CASE '$Unterkapitel'\r\n          WHEN 'Aktuell' THEN 'Alle Kapitel 2'\r\n          WHEN 'Sachsen' THEN 'sachsen'\r\n          WHEN 'Sachsen-Anhalt' THEN 'sachsen-anhalt'\r\n          WHEN 'ThÃ¼ringen' THEN 'thueringen'\r\n          ELSE 'Alle Kapitel 2'\r\n      END\r\n      WHEN \"Sorbisches Programm\" THEN ''\r\n      ELSE 'Alle Kapitel 2'\r\n    END\r\nEND\r\n\r\n",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "Alle Sendungs-ID",
            "value": "Alle Sendungs-ID"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "sendungsid",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE '$LRA'\r\n  WHEN 'NDR' THEN\r\n    CASE '$Redaktionen'\r\n      WHEN \"Kultur\" THEN 'Alle Sendungs-ID'\r\n      WHEN \"Alle Kapitel 1\" THEN \r\n        CASE '$Unterkapitel'\r\n          WHEN 'Info'  THEN 'Alle Sendungs-ID'\r\n          WHEN 'Hamburg' THEN 'Hamburg'\r\n          WHEN 'Mecklenburg-Vorpommern' THEN 'Mecklenburg-Vorpommern'\r\n          WHEN 'Niedersachsen' THEN 'Niedersachsen'\r\n          WHEN 'Schleswig-Holstein' THEN 'Schleswig-Holstein'\r\n          ELSE 'Alle Sendungs-ID'\r\n        END\r\n      WHEN \"Nachrichten\" THEN 'Alle Sendungs-ID'\r\n      ELSE 'Alle Sendungs-ID'\r\n    END\r\n  WHEN 'MDR' THEN \r\n    CASE \"${Redaktionen}\"\r\n      WHEN \"Sport\" THEN 'Alle Sendungs-ID'\r\n      WHEN \"Jump\" THEN 'Alle Sendungs-ID'\r\n      WHEN \"Nachrichten\" THEN  'Alle Sendungs-ID'\r\n      WHEN \"Sorbisches Programm\" THEN 'Alle Sendungs-ID'\r\n      ELSE 'Alle Sendungs-ID'\r\n    END\r\nEND\r\n\r\n",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "CONTAINS_SUBSTR(bi_av_url, \"mdrde.nachrichten.app_aktuell\")",
            "value": "CONTAINS_SUBSTR(bi_av_url, \"mdrde.nachrichten.app_aktuell\")"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "av_condition",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE '$LRA'\r\n  WHEN 'MDR' THEN 'CONTAINS_SUBSTR(bi_av_url, \"$app_name_long\") AND  bi_av_broadcasting_type NOT IN (\"live\", \"Live\")'\r\n  WHEN 'NDR' THEN 'CONTAINS_SUBSTR(site_level2, \"$app_name\" ) AND  bi_av_broadcasting_type NOT IN (\"live\", \"Live\")'\r\nEND",
            "refId": "tempvar",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "mdrde.nachrichten.app_aktuell",
            "value": "mdrde.nachrichten.app_aktuell"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "app_name_long",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE '$LRA'\r\n  WHEN 'NDR' THEN\r\n    CASE '$Redaktionen'\r\n      WHEN \"Kultur\" THEN 'kultur-app'\r\n      WHEN \"Nachrichten\" THEN \r\n        CASE '$Unterkapitel'\r\n          WHEN 'Info'  THEN 'ndrinfo-app'\r\n          WHEN 'Hamburg' THEN 'hh-app'\r\n          WHEN 'Mecklenburg-Vorpommern' THEN 'mv-app'\r\n          WHEN 'Niedersachsen' THEN 'nds-app'\r\n          WHEN 'Schleswig-Holstein' THEN 'sh-app'\r\n          ELSE 'KEINE APP'\r\n        END\r\n      ELSE 'KEINE APP'\r\n    END\r\n  WHEN 'MDR' THEN \r\n    CASE \"${Redaktionen}\"\r\n      WHEN \"Sport\" THEN 'mdrde.sport.app_sport'\r\n      WHEN \"Jump\" THEN 'jump.jump.app_jump'\r\n      WHEN \"Nachrichten\" THEN \r\n        CASE '$Unterkapitel'\r\n          WHEN 'Aktuell' THEN 'mdrde.nachrichten.app_aktuell'\r\n          WHEN 'Sachsen' THEN 'mdrde.nachrichten.sachsen.app_sachsen'\r\n          WHEN 'Sachsen-Anhalt' THEN 'mdrde.nachrichten.sachsen-anhalt.app_sachsenanhalt'\r\n          WHEN 'ThÃ¼ringen' THEN 'mdrde.nachrichten.thueringen.app_thueringen'\r\n          ELSE 'KEINE APP'\r\n      END\r\n      WHEN \"Sorbisches Programm\" THEN 'mdrde.serbski-program.app_serbja'\r\n      ELSE 'KEINE APP'\r\n    END\r\nEND\r\n-- radio-app, orchester-app, hh-app, kultur-app, sesamstraÃŸen-app, ndrinfo-app, sh-app, nds-app, n-joy-app, mv-app",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "18.07.24",
            "value": "18.07.24"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "fromDay",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT FORMAT_DATE(\"%d.%m.%y\",DATE(TIMESTAMP('${__from:date:iso}'),'Europe/Berlin'))",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "19.07.24",
            "value": "19.07.24"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "toDay",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \r\n-- case: last x<24 hours\r\n    WHEN TIMESTAMP_DIFF(TIMESTAMP('${__to:date:iso}'), TIMESTAMP('${__from:date:iso}'), HOUR) = 24 AND EXTRACT(DAY FROM DATETIME('${__from:date:iso}', \"Europe/Berlin\")) != EXTRACT(DAY FROM DATETIME('${__to:date:iso}', \"Europe/Berlin\")) OR TIMESTAMP_DIFF(TIMESTAMP('${__to:date:iso}'), TIMESTAMP('${__from:date:iso}'), MINUTE) < 1439\r\n    THEN   FORMAT_DATE(\"%d.%m.%y\",DATE_ADD(CURRENT_DATE,INTERVAL 1 DAY))\r\n-- SECOND case: today or bigger\r\n    WHEN EXTRACT(DATE FROM TIMESTAMP('${__to:date:iso}')) >= CURRENT_DATE(\"Europe/Berlin\") \r\n    THEN FORMAT_DATE(\"%d.%m.%y\",DATE_SUB(CURRENT_DATE(\"Europe/Berlin\"), INTERVAL 1 DAY))\r\nELSE FORMAT_DATE(\"%d.%m.%y\",DATE_SUB(DATE('${__to:date}', \"Europe/Berlin\"), INTERVAL 0 DAY))\r\nEND \r\n\r\n",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "Alle Kapitel 2",
            "value": "Alle Kapitel 2"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "av_page_chapter2",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE '$LRA'\r\n  WHEN 'NDR' THEN\r\n    CASE '$Redaktionen'\r\n      WHEN \"Kultur\" THEN 'Alle Kapitel 2'\r\n      WHEN \"Nachrichten\" THEN \r\n        CASE '$Unterkapitel'\r\n          WHEN 'Info'  THEN 'Alle Kapitel 2'\r\n          WHEN 'Hamburg' THEN 'hamburg'\r\n          WHEN 'Mecklenburg-Vorpommern' THEN 'mecklenburg-vorpommern'\r\n          WHEN 'Niedersachsen' THEN 'niedersachsen'\r\n          WHEN 'Schleswig-Holstein' THEN 'schleswig-holstein'\r\n          ELSE 'Alle Kapitel 2'\r\n        END\r\n      ELSE 'Alle Kapitel 2'\r\n    END\r\n  WHEN 'MDR' THEN \r\n    CASE \"${Redaktionen}\"\r\n      WHEN \"Sport\" THEN 'Alle Kapitel 2'\r\n      WHEN \"Jump\" THEN 'Alle Kapitel 2'\r\n      WHEN \"Nachrichten\" THEN \r\n        CASE '$Unterkapitel'\r\n          WHEN 'Aktuell' THEN 'Alle Kapitel 2'\r\n          WHEN 'Sachsen' THEN 'sachsen'\r\n          WHEN 'Sachsen-Anhalt' THEN 'sachsen-anhalt'\r\n          WHEN 'ThÃ¼ringen' THEN 'thueringen'\r\n          ELSE 'Alle Kapitel 2'\r\n      END\r\n      WHEN \"Sorbisches Programm\" THEN 'Alle Kapitel 2'\r\n      ELSE 'Alle Kapitel 2'\r\n    END\r\nEND\r\n\r\n",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "site_level2 = 'mdr.de' AND CONTAINS_SUBSTR(page_chapter1, 'nachrichten') AND CONTAINS_SUBSTR(page_chapter2,'Alle Kapitel 2') AND CONTAINS_SUBSTR(sendungs_id,'Alle Sendungs-ID')",
            "value": "site_level2 = 'mdr.de' AND CONTAINS_SUBSTR(page_chapter1, 'nachrichten') AND CONTAINS_SUBSTR(page_chapter2,'Alle Kapitel 2') AND CONTAINS_SUBSTR(sendungs_id,'Alle Sendungs-ID')"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "webFilter",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "IF ('$Redaktionen' LIKE 'Sorbisches Programm') THEN (\r\n  SELECT \"CONTAINS_SUBSTR(site_level2, '$site_level2') AND (CONTAINS_SUBSTR(page_chapter1, '$page_chapter1') OR CONTAINS_SUBSTR(page_chapter1, 'serbski-program')) AND CONTAINS_SUBSTR(page_chapter2, '$page_chapter2') AND sendungs_id = '$sendungsid'\"\r\n);\r\n--ELSEIF ('$Unterkapitel' LIKE 'Aktuell') THEN (\r\n--  SELECT \"CONTAINS_SUBSTR(site_level2, '$site_level2') AND CONTAINS_SUBSTR(page_chapter1, '$page_chapter1') AND NOT CONTAINS_SUBSTR(page_chapter2, 'sachsen') AND NOT CONTAINS_SUBSTR(page_chapter2, 'sachsen-anhalt') AND NOT CONTAINS_SUBSTR(page_chapter2, 'thueringen')\"\r\n--);\r\nELSE (\r\n  SELECT \"site_level2 = '$site_level2' AND CONTAINS_SUBSTR(page_chapter1, '$page_chapter1') AND CONTAINS_SUBSTR(page_chapter2,'$page_chapter2') AND CONTAINS_SUBSTR(sendungs_id,'$sendungsid')\"\r\n);\r\nEND IF\r\n\r\n",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "CONTAINS_SUBSTR(site_level2, 'mdr.de') AND 'nachrichten' IN UNNEST(bi_av_page_chapter1_tags) AND 'Alle Kapitel 2' IN UNNEST(bi_av_page_chapter2_tags) AND 'Alle Sendungs-ID' IN UNNEST(sendungs_id_tags)",
            "value": "CONTAINS_SUBSTR(site_level2, 'mdr.de') AND 'nachrichten' IN UNNEST(bi_av_page_chapter1_tags) AND 'Alle Kapitel 2' IN UNNEST(bi_av_page_chapter2_tags) AND 'Alle Sendungs-ID' IN UNNEST(sendungs_id_tags)"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "avwebFilter",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "IF ('$Redaktionen' LIKE 'Sorbisches Programm') THEN (\r\n  SELECT \"CONTAINS_SUBSTR(site_level2, '$site_level2') AND (('$page_chapter1' IN UNNEST(bi_av_page_chapter1_tags) AND '$av_page_chapter2' IN UNNEST(bi_av_page_chapter2_tags)) OR ('serbski-program' IN UNNEST(bi_av_page_chapter1_tags) AND '$av_page_chapter2' IN UNNEST(bi_av_page_chapter2_tags))) AND '$sendungsid' IN UNNEST(sendungs_id_tags)\"\r\n);\r\nELSE (\r\n  SELECT \"CONTAINS_SUBSTR(site_level2, '$site_level2') AND '$page_chapter1' IN UNNEST(bi_av_page_chapter1_tags) AND '$av_page_chapter2' IN UNNEST(bi_av_page_chapter2_tags) AND '$sendungsid' IN UNNEST(sendungs_id_tags)\"\r\n);\r\nEND IF\r\n\r\n\r\n\r\n\r\n",
            "refId": "tempvar",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "CONTAINS_SUBSTR(site_level2, 'mdr.de') AND CONTAINS_SUBSTR(page_chapter1, 'nachrichten') AND 'Alle Kapitel 2' IN UNNEST(page_chapter2_tags) AND 'Alle Sendungs-ID' IN UNNEST(sendungs_id_tags)",
            "value": "CONTAINS_SUBSTR(site_level2, 'mdr.de') AND CONTAINS_SUBSTR(page_chapter1, 'nachrichten') AND 'Alle Kapitel 2' IN UNNEST(page_chapter2_tags) AND 'Alle Sendungs-ID' IN UNNEST(sendungs_id_tags)"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "listwebFilter",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "IF ('$Redaktionen' LIKE 'Sorbisches Programm') THEN (\r\n  SELECT \"CONTAINS_SUBSTR(site_level2, '$site_level2') AND (CONTAINS_SUBSTR(page_chapter1, '$page_chapter1') OR CONTAINS_SUBSTR(page_chapter1, 'serbski-program')) AND CONTAINS_SUBSTR(page_chapter2, '$list_page_chapter2') AND CONTAINS_SUBSTR(sendungs_id, '$sendungsid')\"\r\n);\r\nELSEIF ('$Unterkapitel' LIKE 'Aktuell') THEN (\r\n  SELECT \"CONTAINS_SUBSTR(site_level2, '$site_level2') AND CONTAINS_SUBSTR(page_chapter1, '$page_chapter1') AND 'Alle Kapitel 2' IN UNNEST(page_chapter2_tags) AND '$sendungsid' IN UNNEST(sendungs_id_tags)\"\r\n);\r\nELSEIF ('$LRA' LIKE 'MDR' AND '$Redaktionen' LIKE 'Sport') THEN (\r\n  SELECT \"site_level2 = '$site_level2' AND '$page_chapter1' IN UNNEST(page_chapter1_tags) AND 'Alle Kapitel 2' IN UNNEST(page_chapter2_tags) AND '$sendungsid' IN UNNEST(sendungs_id_tags)\"\r\n);\r\nELSE (\r\n  SELECT \"CONTAINS_SUBSTR(site_level2, '$site_level2') AND '$page_chapter1' IN UNNEST(page_chapter1_tags) AND '$page_chapter2' IN UNNEST(page_chapter2_tags) AND '$sendungsid' in UNNEST(sendungs_id_tags)\"\r\n);\r\nEND IF\r\n\r\n",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "",
            "value": ""
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "list_page_chapter2",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE '$LRA'\r\n  WHEN 'NDR' THEN\r\n    CASE '$Redaktionen'\r\n      WHEN \"Kultur\" THEN ''\r\n      WHEN \"Nachrichten\" THEN \r\n        CASE '$Unterkapitel'\r\n          WHEN 'Info'  THEN 'Alle Kapitel 2'\r\n          WHEN 'Hamburg' THEN 'hamburg'\r\n          WHEN 'Mecklenburg-Vorpommern' THEN 'mecklenburg-vorpommern'\r\n          WHEN 'Niedersachsen' THEN 'niedersachsen'\r\n          WHEN 'Schleswig-Holstein' THEN 'schleswig-holstein'\r\n          ELSE 'Alle Kapitel 2'\r\n        END\r\n      ELSE 'Alle Kapitel 2'\r\n    END\r\n  WHEN 'MDR' THEN \r\n    CASE \"${Redaktionen}\"\r\n      WHEN \"Sport\" THEN 'sport'\r\n      WHEN \"Jump\" THEN ''\r\n      WHEN \"Nachrichten\" THEN \r\n        CASE '$Unterkapitel'\r\n          WHEN 'Aktuell' THEN ''\r\n          WHEN 'Sachsen' THEN 'sachsen'\r\n          WHEN 'Sachsen-Anhalt' THEN 'sachsen-anhalt'\r\n          WHEN 'ThÃ¼ringen' THEN 'thueringen'\r\n          ELSE 'Alle Kapitel 2'\r\n      END\r\n      WHEN \"Sorbisches Programm\" THEN ''\r\n      ELSE 'Alle Kapitel 2'\r\n    END\r\nEND\r\n\r\n",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "site_level2 = 'app_mdraktuell' AND page_chapter1 = 'Alle Kapitel 1' AND page_chapter2 = 'Alle Kapitel 2'  AND sendungs_id = 'Alle Sendungs-ID'",
            "value": "site_level2 = 'app_mdraktuell' AND page_chapter1 = 'Alle Kapitel 1' AND page_chapter2 = 'Alle Kapitel 2'  AND sendungs_id = 'Alle Sendungs-ID'"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "appFilter",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT \"site_level2 = '$app_name' AND page_chapter1 = 'Alle Kapitel 1' AND page_chapter2 = 'Alle Kapitel 2'  AND sendungs_id = 'Alle Sendungs-ID'\"",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "48",
            "value": "48"
          },
          "hide": 2,
          "includeAll": false,
          "name": "filled_size_headline",
          "options": [
            {
              "selected": true,
              "text": "48",
              "value": "48"
            }
          ],
          "query": "48",
          "skipUrlSync": true,
          "type": "custom"
        },
        {
          "current": {
            "text": "",
            "value": ""
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "Uhrzeit",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT \r\nCASE \"${Zeitraum:text}\"\r\nWHEN \"Heute\" THEN FORMAT_DATE('%H:%M', TIMESTAMP_ADD(MAX(tmstp), INTERVAL 1 SECOND))\r\nWHEN \"Heute -7d\" THEN FORMAT_DATE('%H:%M', TIMESTAMP_ADD(MAX(tmstp), INTERVAL 1 SECOND))\r\nELSE \"\" END\r\nFROM Piano.total_visits_today_append",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "10",
            "value": "10"
          },
          "hide": 2,
          "includeAll": false,
          "name": "filled_size_big",
          "options": [
            {
              "selected": true,
              "text": "10",
              "value": "10"
            }
          ],
          "query": "10",
          "skipUrlSync": true,
          "type": "custom"
        },
        {
          "current": {
            "text": "(av_content_type = \"video\" OR av_content_type = \"Video\")",
            "value": "(av_content_type = \"video\" OR av_content_type = \"Video\")"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "av_app_condition_video",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \"$LRA\"\r\n        WHEN \"MDR\" THEN \"\"\"(av_content_type = \"video\" OR av_content_type = \"Video\")\"\"\"\r\n        WHEN \"NDR\" THEN \"\"\"(objekt_typ = \"video\" OR objekt_typ = \"Video\")\"\"\"\r\n        END",
            "refId": "tempvar",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "(av_content_type = \"audio\" OR av_content_type = \"Audio\")",
            "value": "(av_content_type = \"audio\" OR av_content_type = \"Audio\")"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "av_app_condition_audio",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \"$LRA\"\r\n        WHEN \"MDR\" THEN \"\"\"(av_content_type = \"audio\" OR av_content_type = \"Audio\")\"\"\"\r\n        WHEN \"NDR\" THEN \"\"\"(objekt_typ = \"audio\" OR objekt_typ = \"Audio\")\"\"\"\r\n        END",
            "refId": "tempvar",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "bi_av_publication_date",
            "value": "bi_av_publication_date"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "av_pub_date",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \"$LRA\"\r\n        WHEN \"MDR\" THEN \"\"\"bi_av_publication_date\"\"\"\r\n        WHEN \"NDR\" THEN \"\"\"content_last_editoral_update\"\"\"\r\n        END",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "bi_av_content_id",
            "value": "bi_av_content_id"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "av_content_id",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \"$LRA\"\r\n        WHEN \"MDR\" THEN \"\"\"bi_av_content_id\"\"\"\r\n        WHEN \"NDR\" THEN \"\"\"content_id_sophora\"\"\"\r\n        END\r\n        ",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "bi_av_content",
            "value": "bi_av_content"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "av_content",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \"$LRA\"\r\n        WHEN \"MDR\" THEN \"\"\"bi_av_content\"\"\"\r\n        WHEN \"NDR\" THEN \"\"\"content_titel\"\"\"\r\n        END\r\n        ",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "(\"ondemand\") ",
            "value": "(\"ondemand\") "
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "av_on_demand_filter",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \"$LRA\"\r\n        WHEN \"MDR\" THEN \"\"\"(\"ondemand\") \"\"\"\r\n        WHEN \"NDR\" THEN \"\"\"(\"video\",\"audio\",\"podcast\") \"\"\"\r\n        END\r\n        ",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "(\"live\") ",
            "value": "(\"live\") "
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "av_live_stream_filter",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \"$LRA\"\r\n        WHEN \"MDR\" THEN \"\"\"(\"live\") \"\"\"\r\n        WHEN \"NDR\" THEN \"\"\"(\"audioLivestream\",\"videoLivestream\",\"videoEventlivestream\") \"\"\"\r\n        END\r\n        ",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "2024-07-18",
            "value": "2024-07-18"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "HeuteDatum",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CURRENT_DATE(\"Europe/Berlin\")",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "## Der ausgewertete Zeitraum lautet: 18.07.24 - 19.07.24 ",
            "value": "## Der ausgewertete Zeitraum lautet: 18.07.24 - 19.07.24 "
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "hinweis",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE CONTAINS_SUBSTR(\"\"\"${Zeitraum}\"\"\", \"DATE_ADD\")\r\nWHEN True  THEN \"## Hinweis: FÃ¼r den ausgewÃ¤hlten Zeitraum liegen keine Daten vor. Um Daten auswerten zu kÃ¶nnen, bitte gestern oder grÃ¶ÃŸere ZeitrÃ¤ume auswÃ¤hlen.\"\r\nELSE \"\"\"## Der ausgewertete Zeitraum lautet: $fromDay - $toDay \"\"\"\r\nEND",
            "refId": "tempvar",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "https://vqggwrz.pa-cd.com/event?s=645199&idclient=minerva&events=%5B%7B%22name%22%3A%22page.display%22%2C%22data%22%3A%7B%22page%22%3A%22Web & App Dashboard Kalender%22%2C%22m_visits%22%3A1%2C%22minerva_dashboard_id%22%3A%22_9Lcm7XSk%22%2C%22minerva_lra%22%3A%22dev%22%2C%22minerva_filter%22%3A%22\nLRA=MDR|::|Redaktionen=Nachrichten|::|Unterkapitel=Aktuell|::|Zeitraum_von=29.04.25|::|Zeitraum_bis=05.05.25\n%22%7D%7D%5D",
            "value": "https://vqggwrz.pa-cd.com/event?s=645199&idclient=minerva&events=%5B%7B%22name%22%3A%22page.display%22%2C%22data%22%3A%7B%22page%22%3A%22Web & App Dashboard Kalender%22%2C%22m_visits%22%3A1%2C%22minerva_dashboard_id%22%3A%22_9Lcm7XSk%22%2C%22minerva_lra%22%3A%22dev%22%2C%22minerva_filter%22%3A%22\nLRA=MDR|::|Redaktionen=Nachrichten|::|Unterkapitel=Aktuell|::|Zeitraum_von=29.04.25|::|Zeitraum_bis=05.05.25\n%22%7D%7D%5D"
          },
          "definition": "",
          "hide": 2,
          "name": "src_url",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "WITH nutzer AS (\n  SELECT\nCASE\n    WHEN CONTAINS_SUBSTR(\"${__user.login}\", \"dev\") THEN \"dev\"\n    WHEN CONTAINS_SUBSTR(\"${__user.login}\", \"mefo\") THEN \"mefo\"\n    WHEN CONTAINS_SUBSTR(\"${__user.email}\", \"@\") THEN\n      REGEXP_EXTRACT(\"${__user.email}\", r'@([^\\.]+)')  -- Extracts part after '@' and before the first '.' Example: ad.westphal@ndr.de => ndr\n    WHEN NOT CONTAINS_SUBSTR(\"${__user.email}\", \"@\")\n         AND (CONTAINS_SUBSTR(\"${__user.email}\", \"viewer\") \n         OR CONTAINS_SUBSTR(\"${__user.email}\", \"podcast\")) THEN\n            REGEXP_EXTRACT(\"${__user.email}\", r'^([^-\\s]+)')  -- Extracts part before the first '-'. Example: ndr-viewer => ndr\n    ELSE\n      \"Anonym\"\n  END AS nutzer_lra\n),\nfilter_string AS (\n  SELECT \"\"\"\nLRA=${LRA}|::|Redaktionen=${Redaktionen}|::|Unterkapitel=${Unterkapitel}|::|Zeitraum_von=${fromDay}|::|Zeitraum_bis=${toDay}\n\"\"\" AS filter\n)\n\nSELECT CONCAT(\n  \"https://vqggwrz.pa-cd.com/event?s=645199&idclient=minerva&events=%5B%7B%22name%22%3A%22page.display%22%2C%22data%22%3A%7B%22page%22%3A%22\",\n  \"${__dashboard.name}\",\n  \"%22%2C%22m_visits%22%3A1%2C%22minerva_dashboard_id%22%3A%22\",\n  \"${__dashboard.uid}\",\n  \"%22%2C%22minerva_lra%22%3A%22\",\n  nutzer.nutzer_lra,\n  \"%22%2C%22minerva_filter%22%3A%22\",\n  filter_string.filter,\n  \"%22%7D%7D%5D\"\n) AS event_url\nFROM nutzer, filter_string",
            "refId": "tempvar",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "type": "query"
        }
      ]
    },
    "time": {
      "from": "now-7d",
      "to": "now"
    },
    "timepicker": {},
    "timezone": "",
    "title": "Web & App Dashboard Kalender",
    "uid": "_9Lcm7XSk",
    "version": 34,
    "weekStart": "monday"
  }
}

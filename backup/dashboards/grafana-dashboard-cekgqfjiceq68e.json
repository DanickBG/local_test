{
  "meta": {
    "type": "db",
    "canSave": true,
    "canEdit": true,
    "canAdmin": true,
    "canStar": true,
    "canDelete": true,
    "slug": "podcast-mdr-abfragen-optimieren-30-04-2025",
    "url": "/d/cekgqfjiceq68e/podcast-mdr-abfragen-optimieren-30-04-2025",
    "expires": "0001-01-01T00:00:00Z",
    "created": "2025-04-30T10:28:49Z",
    "updated": "2025-04-30T10:54:41Z",
    "updatedBy": "chams khoury dev",
    "createdBy": "chams khoury dev",
    "version": 4,
    "hasAcl": false,
    "isFolder": false,
    "folderId": 660,
    "folderUid": "folder-F9a5Uxn4k",
    "folderTitle": "Prototypes",
    "folderUrl": "/dashboards/f/folder-F9a5Uxn4k/prototypes",
    "provisioned": false,
    "provisionedExternalId": "",
    "annotationsPermissions": {
      "dashboard": {
        "canAdd": true,
        "canEdit": true,
        "canDelete": true
      },
      "organization": {
        "canAdd": true,
        "canEdit": true,
        "canDelete": true
      }
    }
  },
  "dashboard": {
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": {
            "type": "grafana",
            "uid": "-- Grafana --"
          },
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "target": {
            "limit": 100,
            "matchAny": false,
            "tags": [],
            "type": "dashboard"
          },
          "type": "dashboard"
        }
      ]
    },
    "description": "Mapping included",
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 0,
    "id": 1669,
    "links": [],
    "panels": [
      {
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 24,
          "x": 0,
          "y": 0
        },
        "id": 80,
        "options": {
          "code": {
            "language": "plaintext",
            "showLineNumbers": false,
            "showMiniMap": false
          },
          "content": "<div style=\"background-color:rgba(38, 113, 198); color: white; text-align: center; vertical-align: middle; padding: 20px 0; margin-top: 0px; font-size: 15pt;\">\n  <font color=\"#FFFFFF\" size=\"5\">Servicemeldung:</font> <br>\n  <font color=\"#FFFFFF\" size=\"3\">\n    Seit Ende Januar 2025  – im Zuge der Veröffentlichung der neuen Android-App-Versionen für die ARD Audiothek – keine korrekte Zuordnung über UserAgent (Probleme über IOS bereits seit September). Die Audiotheks-Zugriffe sind weiterhin in der Gesamtsumme aller validen Downloads enthalten, die dezidiert für die Audiothek ausgewiesenen VD werden allerdings derzeit massiv unterschätzt.\n  </font>\n</div>\n",
          "mode": "markdown"
        },
        "pluginVersion": "11.3.1",
        "title": "",
        "type": "text"
      },
      {
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 11,
          "x": 13,
          "y": 5
        },
        "id": 74,
        "options": {
          "code": {
            "language": "plaintext",
            "showLineNumbers": false,
            "showMiniMap": false
          },
          "content": " ${hinweis}",
          "mode": "markdown"
        },
        "pluginVersion": "11.3.1",
        "title": "",
        "transparent": true,
        "type": "text"
      },
      {
        "collapsed": false,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 7
        },
        "id": 61,
        "panels": [],
        "title": "",
        "type": "row"
      },
      {
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 3,
          "x": 0,
          "y": 8
        },
        "id": 17,
        "options": {
          "code": {
            "language": "plaintext",
            "showLineNumbers": false,
            "showMiniMap": false
          },
          "content": "\n\n<img width=\"160\" height=\"auto\" src=\"$Image\n\" />\n\n<!-- src=${Image} />",
          "mode": "html"
        },
        "pluginVersion": "11.3.1",
        "title": "",
        "transparent": true,
        "type": "text"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "#f5f5f5",
              "mode": "fixed"
            },
            "decimals": 0,
            "mappings": [],
            "noValue": "N/A",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "string"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 8,
          "x": 3,
          "y": 8
        },
        "id": 64,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "last"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20
          },
          "textMode": "value_and_name",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT  CONCAT(REPEAT(\" \", GREATEST(0,$filled_size_headline - CHAR_LENGTH('$Podcast_title'))), '$Podcast_title'), \nFROM(\nSELECT '$Podcast_title' as Interaktionen\nFROM `ndr-code-bi-dashboard.Quintly.facebook`\nLIMIT 1\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "page_engaged_users",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50,
              "whereJsonTree": {
                "children1": {
                  "baa899a9-cdef-4012-b456-718364767b70": {
                    "properties": {
                      "field": "profileId",
                      "operator": "equal",
                      "value": [
                        null
                      ],
                      "valueSrc": [
                        "value"
                      ],
                      "valueType": [
                        "number"
                      ]
                    },
                    "type": "rule"
                  }
                },
                "id": "b8aaaa8b-0123-4456-b89a-b18364767b70",
                "type": "group"
              }
            },
            "table": "facebookInsights"
          }
        ],
        "title": "",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {},
              "renameByName": {
                "f0_": " "
              }
            }
          }
        ],
        "transparent": true,
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "#f5f5f5",
              "mode": "fixed"
            },
            "decimals": 0,
            "mappings": [],
            "noValue": "N/A",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "string"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 13,
          "x": 11,
          "y": 8
        },
        "id": 37,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "last"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20
          },
          "textMode": "value_and_name",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT  CONCAT(REPEAT(\" \", GREATEST($filled_size_headline_small - CHAR_LENGTH('QApps'),0)), 'Apps')\nFROM(\nSELECT 'Apps' as Interaktionen\nFROM `ndr-code-bi-dashboard.Quintly.facebook`\nLIMIT 1\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "page_engaged_users",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50,
              "whereJsonTree": {
                "children1": {
                  "baa899a9-cdef-4012-b456-718364767b70": {
                    "properties": {
                      "field": "profileId",
                      "operator": "equal",
                      "value": [
                        null
                      ],
                      "valueSrc": [
                        "value"
                      ],
                      "valueType": [
                        "number"
                      ]
                    },
                    "type": "rule"
                  }
                },
                "id": "b8aaaa8b-0123-4456-b89a-b18364767b70",
                "type": "group"
              }
            },
            "table": "facebookInsights"
          }
        ],
        "title": "",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {},
              "renameByName": {
                "f0_": " "
              }
            }
          }
        ],
        "transparent": true,
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "description": "Zugriffe gesamt im Analysezeitraum",
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "dark-blue",
              "mode": "fixed"
            },
            "decimals": 0,
            "mappings": [],
            "noValue": "–",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "string"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Interaktionen"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "∑ Interaktionen"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 4,
          "w": 4,
          "x": 3,
          "y": 10
        },
        "id": 15,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "last"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {},
          "textMode": "value_and_name",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT  CONCAT(REPEAT(\" \", $filled_size - CHAR_LENGTH(CAST(summe as STRING))), REPLACE(CAST(FORMAT(\"%'.0f\", CAST(ROUND(summe) as NUMERIC)) AS STRING), \",\", \".\"))FROM\n(\n  SELECT \n    SUM(m_zugriffe_1) AS summe \n  FROM \n    $episode_dataset\n  WHERE \n    broadcast_id IN ($podcast_ids)\n    AND date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "page_engaged_users",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50,
              "whereJsonTree": {
                "children1": {
                  "baa899a9-cdef-4012-b456-718364767b70": {
                    "properties": {
                      "field": "profileId",
                      "operator": "equal",
                      "value": [
                        null
                      ],
                      "valueSrc": [
                        "value"
                      ],
                      "valueType": [
                        "number"
                      ]
                    },
                    "type": "rule"
                  }
                },
                "id": "b8aaaa8b-0123-4456-b89a-b18364767b70",
                "type": "group"
              }
            },
            "table": "facebookInsights"
          }
        ],
        "title": "",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {},
              "renameByName": {
                "f0_": "Zugriffe",
                "page_impressions_unique": "Potentielle Reichweite"
              }
            }
          }
        ],
        "transparent": true,
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "description": "Durchschnitt pro Episode für die im ausgewählten Analysezeitraum veröffentlichten Episoden.",
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "dark-blue",
              "mode": "fixed"
            },
            "decimals": 0,
            "mappings": [],
            "noValue": "–",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "string"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Interaktionen"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "∑ Interaktionen"
                },
                {
                  "id": "unit",
                  "value": "locale"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 4,
          "w": 4,
          "x": 7,
          "y": 10
        },
        "id": 83,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "last"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "valueSize": 30
          },
          "textMode": "value_and_name",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CONCAT(REPEAT(\" \", $filled_size_big - CHAR_LENGTH(CAST(ROUND(summe,0) as STRING))), REPLACE(CAST(FORMAT(\"%'.0f\", CAST(ROUND(summe) as NUMERIC)) AS STRING), \",\", \".\"))FROM\n(\n  SELECT\n    SUM(m_zugriffe_1)/COUNT(DISTINCT headline) AS summe,\n  FROM \n    $episode_dataset as ed\n  LEFT JOIN \n    $profiles_dataset AS pd\n  USING(podcast_title)\n  WHERE \n    ed.broadcast_id IN ($podcast_ids)\n    AND date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\n    AND $episodenschnitt_condition\n    AND DATE(publication_date_1) BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\n    AND publication_date_1 != '22-11-07 14:57:28.000'\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "page_engaged_users",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50,
              "whereJsonTree": {
                "children1": {
                  "baa899a9-cdef-4012-b456-718364767b70": {
                    "properties": {
                      "field": "profileId",
                      "operator": "equal",
                      "value": [
                        null
                      ],
                      "valueSrc": [
                        "value"
                      ],
                      "valueType": [
                        "number"
                      ]
                    },
                    "type": "rule"
                  }
                },
                "id": "b8aaaa8b-0123-4456-b89a-b18364767b70",
                "type": "group"
              }
            },
            "table": "facebookInsights"
          }
        ],
        "title": "",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "includeByName": {},
              "indexByName": {},
              "renameByName": {
                "f0_": "Ø neue Episoden",
                "page_impressions_unique": "Potentielle Reichweite"
              }
            }
          }
        ],
        "transparent": true,
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "description": "Zugriffe über ausgewählte Apps auf Basis von User Agents. Im Vergleich zu den eigenen Metriken der jeweiligen Plattform-Anbieter kann es aufgrund verschiedener Messmethoden zu Abweichungen kommen.",
        "fieldConfig": {
          "defaults": {},
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "ARD Audiothek"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "AntennaPod"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Podcast & Radio Addict"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "TuneIn"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Juice"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Stagefright"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "gPodder"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Player FM"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Player FM"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Pocket Casts"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Overcast"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Castbox"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Amazon Alexa"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "iTunes"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Podbean"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "other"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Spotify"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "AndroidDownloadManager"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Apple Podcasts"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Deezer"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "RTL+ Music"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Google Podcasts"
              },
              "properties": []
            },
            {
              "__systemRef": "hideSeriesFrom",
              "matcher": {
                "id": "byNames",
                "options": {
                  "mode": "exclude",
                  "names": [
                    "summe",
                    "Apple Podcasts"
                  ],
                  "prefix": "All except:",
                  "readOnly": true
                }
              },
              "properties": []
            }
          ]
        },
        "gridPos": {
          "h": 10,
          "w": 7,
          "x": 11,
          "y": 10
        },
        "id": 85,
        "options": {
          "baidu": {
            "callback": "bmapReady",
            "key": ""
          },
          "editor": {
            "format": "auto"
          },
          "editorMode": "code",
          "gaode": {
            "key": "",
            "plugin": "AMap.Scale,AMap.ToolBar"
          },
          "getOption": "const platformColorMapping = [\n  { platform: \"ARD Audiothek\", color: \"#2873ED\" },\n  { platform: \"AntennaPod\", color: \"#3F51B5\" },\n  { platform: \"Podcast & Radio Addict\", color: \"#00BCD4\" },\n  { platform: \"TuneIn\", color: \"#2196F3\" },\n  { platform: \"Juice\", color: \"#E91E63\" },\n  { platform: \"Stagefright\", color: \"#607D8B\" },\n  { platform: \"gPodder\", color: \"#FFC107\" },\n  { platform: \"Player FM\", color: \"#4CAF50\" },\n  { platform: \"Pocket Casts\", color: \"#FF5722\" },\n  { platform: \"Overcast\", color: \"#FFEB3B\" },\n  { platform: \"Castbox\", color: \"#673AB7\" },\n  { platform: \"Amazon Alexa\", color: \"#FFA000\" },\n  { platform: \"iTunes\", color: \"#D63384\" },\n  { platform: \"Podbean\", color: \"#8BC34A\" },\n  { platform: \"other\", color: \"#9E9E9E\" },\n  { platform: \"Spotify\", color: \"#59A94D\" },\n  { platform: \"AndroidDownloadManager\", color: \"#D32F2F\" },\n  { platform: \"Apple Podcasts\", color: \"#A64DCC\" },\n  { platform: \"Deezer\", color: \"#a30101\" },\n  { platform: \"RTL+\", color: \"#b8c600\" },\n  { platform: \"Google Podcasts\", color: \"#02f0de\" },\n  { platform: \"AmazonMusic\", color: \"#1B5E20\" },\n  { platform: \"Downcast\", color: \"#736614\" },\n  { platform: \"NDR Apps\", color: \"#00695C\" },\n  { platform: \"Amazon Music\", color: \"#1B5E20\" },\n  { platform: \"RTL+ Music\", color: \"#b8c600\" },\n  { platform: \"Browser\", color: \"#c48d30\" }\n];\n\nconst series = context.panel.data.series.map((s) => {\n  const platform = s.fields.find((f) => f.name === 'platform').values.buffer || s.fields.find((f) => f.name === 'platform').values;\n  const summe = s.fields.find((f) => f.name === 'summe').values.buffer || s.fields.find((f) => f.name === 'summe').values;\n\n  // Calculate the total sum of all values\n  const totalSum = summe.reduce((total, currentValue) => total + currentValue, 0);\n\n  const data = platform.map((p, i) => {\n    const platformColor = platformColorMapping.find((mapping) => mapping.platform === p)?.color || '#9E9E9E';\n    const percentage = (summe[i] / totalSum) * 100;  // Calculate the percentage for each platform\n\n    return {\n      name: p,\n      value: summe[i],\n      percentage: percentage, // Add the percentage to each item\n      itemStyle: {\n        color: platformColor,\n      },\n    };\n  });\n\n  // Sort the data based on 'value' (summe) in descending order\n  const sortedData = data.sort((a, b) => b.value - a.value);\n\n  return {\n    name: \"\",\n    type: 'pie',\n    left: '55%',\n    radius: '99%',\n    data: sortedData,\n    label: {\n      show: false\n    }\n  };\n});\n\n/**\n * Enable Data Zoom by default\n */\nsetTimeout(() => context.panel.chart.dispatchAction({\n  type: 'takeGlobalCursor',\n  key: 'dataZoomSelect',\n  dataZoomSelectActive: true,\n}), 500);\n\n/**\n * Update Time Range on Zoom\n */\ncontext.panel.chart.on('datazoom', function (params) {\n  const startValue = params.batch[0]?.startValue;\n  const endValue = params.batch[0]?.endValue;\n  locationService.partial({ from: startValue, to: endValue });\n});\n\nreturn {\n  backgroundColor: 'transparent',\n  tooltip: {\n    trigger: 'item',\n    formatter: function (params) {\n      // Create a number formatter for German locale\n      const numberFormat = new Intl.NumberFormat('de-DE');\n\n      // Format the value and percentage\n      const valueFormatted = numberFormat.format(params.value);\n      return `${params.name}: ${valueFormatted}`;\n    },\n    textStyle: {\n      rich: {\n        b: {\n          fontWeight: 'bold'\n        },\n        c: {\n          fontSize: 12,\n          color: '#ccc'  // Styling for the percentage part in legend\n        }\n      }\n    }\n  },\n  legend: {\n    type: 'scroll',  // Enable scrollbar\n    orient: 'vertical',  // Align legend in a vertical list\n    left: 'left',  // Position legend on the right side\n    top: '10%',  // Center the legend vertically\n    itemGap: 10,  // Adjust spacing between legend items\n    textStyle: {\n      color: 'rgba(128, 128, 128, .9)'\n    },\n    pageIconColor: '#999',  // Scroll button color\n    pageIconInactiveColor: '#555',  // Disabled button color\n    pageTextStyle: {\n      color: '#ddd',\n    },\n    // Use the sorted order of names for the legend\n    data: series[0]?.data.map((item) => item.name),\n    formatter: function (name) {\n      const item = series[0].data.find((d) => d.name === name);\n\n      // Create a number formatter for German locale\n      const numberFormat = new Intl.NumberFormat('de-DE');\n\n      return `{b|${name}:}  {c|${item.percentage.toFixed(0)}%}`;  // Display the percentage with two decimal places\n    },\n    textStyle: {\n      rich: {\n        b: {\n          fontWeight: 'bold'\n        },\n        c: {\n          fontSize: 12,\n          //color: '#ccc'  // Styling for the percentage part in legend\n        }\n      }\n    }\n  },\n  toolbox: {\n    feature: {\n      saveAsImage: {},\n    },\n  },\n  series,\n};\n",
          "google": {
            "callback": "gmapReady",
            "key": ""
          },
          "map": "none",
          "renderer": "canvas",
          "themeEditor": {
            "config": "{}",
            "name": "default"
          },
          "visualEditor": {
            "code": "return {\n  dataset: context.editor.dataset,\n  series: context.editor.series,\n  xAxis: {\n    type: 'time',\n  },\n  yAxis: {\n    type: 'value',\n    min: 'dataMin',\n  },\n}\n",
            "dataset": [],
            "series": []
          }
        },
        "pluginVersion": "6.1.0",
        "targets": [
          {
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT\n    SUM(m_zugriffe_1) AS summe,\n    platform\nFROM \n    $platform_dataset\nWHERE\n    broadcast_id IN ($podcast_ids)\n    AND date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\nGROUP BY platform",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          }
        ],
        "title": "",
        "type": "volkovlabs-echarts-panel"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "#5794F2",
              "mode": "fixed"
            },
            "decimals": 0,
            "mappings": [],
            "noValue": "N/A",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "string"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 2,
          "x": 18,
          "y": 10
        },
        "id": 20,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "last"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20
          },
          "textMode": "value_and_name",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT  CONCAT(REPEAT(\" \", $filled_size - CHAR_LENGTH('ARD Audiothek')), 'ARD Audiothek')\nFROM(\nSELECT 'ARD Audiothek' as Interaktionen\nFROM `ndr-code-bi-dashboard.Quintly.facebook`\nLIMIT 1\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "page_engaged_users",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50,
              "whereJsonTree": {
                "children1": {
                  "baa899a9-cdef-4012-b456-718364767b70": {
                    "properties": {
                      "field": "profileId",
                      "operator": "equal",
                      "value": [
                        null
                      ],
                      "valueSrc": [
                        "value"
                      ],
                      "valueType": [
                        "number"
                      ]
                    },
                    "type": "rule"
                  }
                },
                "id": "b8aaaa8b-0123-4456-b89a-b18364767b70",
                "type": "group"
              }
            },
            "table": "facebookInsights"
          }
        ],
        "title": "",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {},
              "renameByName": {
                "f0_": " "
              }
            }
          }
        ],
        "transparent": true,
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "description": "Spotify-Daten ab August 2023 verfügbar",
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "green",
              "mode": "fixed"
            },
            "decimals": 0,
            "mappings": [],
            "noValue": "N/A",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "string"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 2,
          "x": 20,
          "y": 10
        },
        "id": 21,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "last"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20
          },
          "textMode": "value_and_name",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT  CONCAT(REPEAT(\" \", $filled_size - CHAR_LENGTH('Spotify')), 'Spotify')\nFROM(\nSELECT 'Spotify' as Interaktionen\nFROM `ndr-code-bi-dashboard.Quintly.facebook`\nLIMIT 1\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "page_engaged_users",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50,
              "whereJsonTree": {
                "children1": {
                  "baa899a9-cdef-4012-b456-718364767b70": {
                    "properties": {
                      "field": "profileId",
                      "operator": "equal",
                      "value": [
                        null
                      ],
                      "valueSrc": [
                        "value"
                      ],
                      "valueType": [
                        "number"
                      ]
                    },
                    "type": "rule"
                  }
                },
                "id": "b8aaaa8b-0123-4456-b89a-b18364767b70",
                "type": "group"
              }
            },
            "table": "facebookInsights"
          }
        ],
        "title": "",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {},
              "renameByName": {
                "f0_": " "
              }
            }
          }
        ],
        "transparent": true,
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "purple",
              "mode": "fixed"
            },
            "decimals": 0,
            "mappings": [],
            "noValue": "N/A",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "string"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 2,
          "x": 22,
          "y": 10
        },
        "id": 22,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "last"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20
          },
          "textMode": "value_and_name",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT  CONCAT(REPEAT(\" \", GREATEST(0,$filled_size - CHAR_LENGTH('Apple Podcasts'))), 'Apple Podcasts')\nFROM(\nSELECT 'Apple Podcasts' as Interaktionen\nFROM `ndr-code-bi-dashboard.Quintly.facebook`\nLIMIT 1\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "page_engaged_users",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50,
              "whereJsonTree": {
                "children1": {
                  "baa899a9-cdef-4012-b456-718364767b70": {
                    "properties": {
                      "field": "profileId",
                      "operator": "equal",
                      "value": [
                        null
                      ],
                      "valueSrc": [
                        "value"
                      ],
                      "valueType": [
                        "number"
                      ]
                    },
                    "type": "rule"
                  }
                },
                "id": "b8aaaa8b-0123-4456-b89a-b18364767b70",
                "type": "group"
              }
            },
            "table": "facebookInsights"
          }
        ],
        "title": "",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {},
              "renameByName": {
                "f0_": " "
              }
            }
          }
        ],
        "transparent": true,
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "#5794F2",
              "mode": "fixed"
            },
            "decimals": 0,
            "mappings": [],
            "noValue": "–",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "string"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Interaktionen"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "∑ Interaktionen"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 3,
          "w": 2,
          "x": 18,
          "y": 12
        },
        "id": 23,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "last"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {},
          "textMode": "value_and_name",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "WITH broadcastids AS (\n    SELECT DISTINCT CAST(broadcast_id[0] AS STRING) AS broadcast_id\n    FROM $profiles_dataset\n    WHERE CASE \"$Bereich\"\n    WHEN \"Alle Bereiche\" THEN TRUE \n    ELSE branding = \"$Bereich\" END \n    ORDER BY broadcast_id DESC\n),\nall_titles_platforms AS(\nSELECT \n    SUM(m_zugriffe_1) AS summe, \n    platform\nFROM $platform_dataset AS pd\nINNER JOIN broadcastids ON pd.broadcast_id = broadcastids.broadcast_id\nWHERE platform = \"ARD Audiothek\" AND date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\nGROUP BY platform),\nnot_all_titles_platforms AS(\n    SELECT\n  sum(m_zugriffe_1) AS summe, platform\nFROM $platform_dataset\nWHERE\nbroadcast_id = \"$broadcast_id_branding\"\nAND platform = \"ARD Audiothek\" AND date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\ngroup by platform\n)\nSELECT  CONCAT(REPEAT(\" \", $filled_size_big - CHAR_LENGTH(CAST(summe as STRING))), REPLACE(CAST(FORMAT(\"%'.0f\", CAST(ROUND(summe) as NUMERIC)) AS STRING), \",\", \".\")) FROM \n(\nSELECT summe FROM ${dataset}\n)\n\n\n",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "page_engaged_users",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50,
              "whereJsonTree": {
                "children1": {
                  "baa899a9-cdef-4012-b456-718364767b70": {
                    "properties": {
                      "field": "profileId",
                      "operator": "equal",
                      "value": [
                        null
                      ],
                      "valueSrc": [
                        "value"
                      ],
                      "valueType": [
                        "number"
                      ]
                    },
                    "type": "rule"
                  }
                },
                "id": "b8aaaa8b-0123-4456-b89a-b18364767b70",
                "type": "group"
              }
            },
            "table": "facebookInsights"
          }
        ],
        "title": "",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {},
              "renameByName": {
                "f0_": "Zugriffe App",
                "page_impressions_unique": "Potentielle Reichweite"
              }
            }
          }
        ],
        "transparent": true,
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "green",
              "mode": "fixed"
            },
            "decimals": 0,
            "mappings": [],
            "noValue": "–",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "string"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Interaktionen"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "∑ Interaktionen"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 3,
          "w": 2,
          "x": 20,
          "y": 12
        },
        "id": 26,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "last"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {},
          "textMode": "value_and_name",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "WITH broadcastids AS (\n    SELECT DISTINCT CAST(broadcast_id[0] AS STRING) AS broadcast_id\n    FROM $profiles_dataset\n    WHERE CASE \"$Bereich\"\n    WHEN \"Alle Bereiche\" THEN TRUE\n    ELSE branding = \"$Bereich\" END \n    ORDER BY broadcast_id DESC\n),\nall_titles_platforms AS(\nSELECT \n    SUM(m_zugriffe_1) AS summe, \n    platform\nFROM $platform_dataset as pd\nINNER JOIN broadcastids ON pd.broadcast_id = broadcastids.broadcast_id\nWHERE platform = \"Spotify\" AND date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\nGROUP BY platform),\nnot_all_titles_platforms AS(\n    SELECT\n  sum(m_zugriffe_1) AS summe, platform\nFROM $platform_dataset\nWHERE\nbroadcast_id = \"$broadcast_id_branding\"\nAND platform = \"Spotify\" AND date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\ngroup by platform\n)\nSELECT  CONCAT(REPEAT(\" \", $filled_size_big - CHAR_LENGTH(CAST(summe as STRING))), REPLACE(CAST(FORMAT(\"%'.0f\", CAST(ROUND(summe) as NUMERIC)) AS STRING), \",\", \".\")) FROM \n(\nSELECT summe FROM ${dataset}\n)\n\n\n",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "page_engaged_users",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50,
              "whereJsonTree": {
                "children1": {
                  "baa899a9-cdef-4012-b456-718364767b70": {
                    "properties": {
                      "field": "profileId",
                      "operator": "equal",
                      "value": [
                        null
                      ],
                      "valueSrc": [
                        "value"
                      ],
                      "valueType": [
                        "number"
                      ]
                    },
                    "type": "rule"
                  }
                },
                "id": "b8aaaa8b-0123-4456-b89a-b18364767b70",
                "type": "group"
              }
            },
            "table": "facebookInsights"
          }
        ],
        "title": "",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {},
              "renameByName": {
                "f0_": "Zugriffe App",
                "page_impressions_unique": "Potentielle Reichweite"
              }
            }
          }
        ],
        "transparent": true,
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "description": "",
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "purple",
              "mode": "fixed"
            },
            "decimals": 0,
            "mappings": [],
            "noValue": "–",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "string"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Interaktionen"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "∑ Interaktionen"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 3,
          "w": 2,
          "x": 22,
          "y": 12
        },
        "id": 27,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "last"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {},
          "textMode": "value_and_name",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "WITH broadcastids AS (\n    SELECT DISTINCT CAST(broadcast_id[0] AS STRING) AS broadcast_id\n    FROM $profiles_dataset\n    WHERE CASE \"$Bereich\"\n    WHEN \"Alle Bereiche\" THEN TRUE\n    ELSE branding = \"$Bereich\" END \n    ORDER BY broadcast_id DESC\n),\nall_titles_platforms AS(\nSELECT \n    SUM(m_zugriffe_1) AS summe, \n    platform\nFROM $platform_dataset as pd\nINNER JOIN broadcastids ON pd.broadcast_id = broadcastids.broadcast_id\nWHERE platform = \"Apple Podcasts\" AND date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\nGROUP BY platform),\nnot_all_titles_platforms AS(\n    SELECT\n  sum(m_zugriffe_1) AS summe, platform\nFROM $platform_dataset\nWHERE\nbroadcast_id = \"$broadcast_id_branding\"\nAND platform = \"Apple Podcasts\" AND date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\ngroup by platform\n)\nSELECT  CONCAT(REPEAT(\" \", $filled_size_big - CHAR_LENGTH(CAST(summe as STRING))), REPLACE(CAST(FORMAT(\"%'.0f\", CAST(ROUND(summe) as NUMERIC)) AS STRING), \",\", \".\")) FROM \n(\nSELECT summe FROM ${dataset}\n)\n\n\n",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "page_engaged_users",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50,
              "whereJsonTree": {
                "children1": {
                  "baa899a9-cdef-4012-b456-718364767b70": {
                    "properties": {
                      "field": "profileId",
                      "operator": "equal",
                      "value": [
                        null
                      ],
                      "valueSrc": [
                        "value"
                      ],
                      "valueType": [
                        "number"
                      ]
                    },
                    "type": "rule"
                  }
                },
                "id": "b8aaaa8b-0123-4456-b89a-b18364767b70",
                "type": "group"
              }
            },
            "table": "facebookInsights"
          }
        ],
        "title": "",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {},
              "renameByName": {
                "f0_": "Zugriffe App",
                "page_impressions_unique": "Potentielle Reichweite"
              }
            }
          }
        ],
        "transparent": true,
        "type": "stat"
      },
      {
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 4,
          "w": 3,
          "x": 0,
          "y": 13
        },
        "id": 51,
        "options": {
          "code": {
            "language": "plaintext",
            "showLineNumbers": false,
            "showMiniMap": false
          },
          "content": "Letztes Update: <br> \r\n${lastUpdate}\r\n<br> <br> \r\nDatenstand: <br> \r\n${fromDay} – ${datenstand}",
          "mode": "markdown"
        },
        "pluginVersion": "11.3.1",
        "title": "",
        "transparent": true,
        "type": "text"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "#7d7d7d",
              "mode": "fixed"
            },
            "decimals": 0,
            "mappings": [],
            "noValue": "N/A",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "string"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 4,
          "x": 3,
          "y": 14
        },
        "id": 56,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "last"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20
          },
          "textMode": "value_and_name",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT  CONCAT(REPEAT(\" \", GREATEST($filled_size_headline_small - CHAR_LENGTH('Bereich: $Bereich'),0)), 'Bereich: $Bereich')\nFROM(\nSELECT 'Bereich: $Bereich' as Interaktionen\nFROM `ndr-code-bi-dashboard.Quintly.facebook`\nLIMIT 1\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "page_engaged_users",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50,
              "whereJsonTree": {
                "children1": {
                  "baa899a9-cdef-4012-b456-718364767b70": {
                    "properties": {
                      "field": "profileId",
                      "operator": "equal",
                      "value": [
                        null
                      ],
                      "valueSrc": [
                        "value"
                      ],
                      "valueType": [
                        "number"
                      ]
                    },
                    "type": "rule"
                  }
                },
                "id": "b8aaaa8b-0123-4456-b89a-b18364767b70",
                "type": "group"
              }
            },
            "table": "facebookInsights"
          }
        ],
        "title": "",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {},
              "renameByName": {
                "f0_": " "
              }
            }
          }
        ],
        "transparent": true,
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "#ffffff",
              "mode": "fixed"
            },
            "decimals": 0,
            "mappings": [],
            "noValue": "N/A",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "string"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 4,
          "x": 7,
          "y": 14
        },
        "id": 57,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "last"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 20
          },
          "textMode": "value_and_name",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT  CONCAT(REPEAT(\" \", GREATEST($filled_size_headline_small - CHAR_LENGTH('Ausgewählte Episoden'),0)), 'Ausgewählte Episoden')\nFROM(\nSELECT 'Ausgewählte Episoden' as Interaktionen\nFROM `ndr-code-bi-dashboard.Quintly.facebook`\nLIMIT 1\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "page_engaged_users",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50,
              "whereJsonTree": {
                "children1": {
                  "baa899a9-cdef-4012-b456-718364767b70": {
                    "properties": {
                      "field": "profileId",
                      "operator": "equal",
                      "value": [
                        null
                      ],
                      "valueSrc": [
                        "value"
                      ],
                      "valueType": [
                        "number"
                      ]
                    },
                    "type": "rule"
                  }
                },
                "id": "b8aaaa8b-0123-4456-b89a-b18364767b70",
                "type": "group"
              }
            },
            "table": "facebookInsights"
          }
        ],
        "title": "",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {},
              "renameByName": {
                "f0_": " "
              }
            }
          }
        ],
        "transparent": true,
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "description": "Zugriffe gesamt aller Podcast-Reihen im ausgewählten Bereich",
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "#1F60C4",
              "mode": "fixed"
            },
            "decimals": 0,
            "mappings": [],
            "noValue": "–",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "string"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Interaktionen"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "∑ Interaktionen"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 4,
          "w": 4,
          "x": 3,
          "y": 16
        },
        "id": 84,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "last"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "valueSize": 30
          },
          "textMode": "value_and_name",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT  CONCAT(REPEAT(\" \", $filled_size_big - CHAR_LENGTH(CAST(summe as STRING))), REPLACE(CAST(FORMAT(\"%'.0f\", CAST(ROUND(summe) as NUMERIC)) AS STRING), \",\", \".\"))FROM\n(\n  SELECT\n    SUM(m_zugriffe_1) AS summe\n  FROM \n    $episode_dataset\n  WHERE\n    (\"$Bereich\" = \"Alle Bereiche\" OR branding = \"$Bereich\")\n    AND date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "page_engaged_users",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50,
              "whereJsonTree": {
                "children1": {
                  "baa899a9-cdef-4012-b456-718364767b70": {
                    "properties": {
                      "field": "profileId",
                      "operator": "equal",
                      "value": [
                        null
                      ],
                      "valueSrc": [
                        "value"
                      ],
                      "valueType": [
                        "number"
                      ]
                    },
                    "type": "rule"
                  }
                },
                "id": "b8aaaa8b-0123-4456-b89a-b18364767b70",
                "type": "group"
              }
            },
            "table": "facebookInsights"
          }
        ],
        "title": "",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {},
              "renameByName": {
                "f0_": "Zugriffe",
                "page_impressions_unique": "Potentielle Reichweite"
              }
            }
          }
        ],
        "transparent": true,
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "description": "Zugriffe gesamt für die in der Navigation unter Episode ausgewählten Audios",
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "dark-blue",
              "mode": "fixed"
            },
            "decimals": 0,
            "mappings": [],
            "noValue": "–",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "string"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Interaktionen"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "∑ Interaktionen"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 4,
          "w": 2,
          "x": 7,
          "y": 16
        },
        "id": 81,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "last"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 17,
            "valueSize": 20
          },
          "textMode": "value_and_name",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT  CONCAT(REPEAT(\" \", $filled_size - CHAR_LENGTH(CAST(summe as STRING))), REPLACE(CAST(FORMAT(\"%'.0f\", CAST(ROUND(summe) as NUMERIC)) AS STRING), \",\", \".\"))FROM\n(\n  SELECT \n    SUM(m_zugriffe_1) AS summe \n  FROM \n    $episode_dataset\n  WHERE \n    (\"$Bereich\" = \"Alle Bereiche\" OR branding = \"$Bereich\")\n    AND (\"\"\"$Podcast\"\"\" = \"All titles\" OR REPLACE(headline, \"'\", \"\") IN UNNEST(ARRAY[$Episode]))\n    AND date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "page_engaged_users",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50,
              "whereJsonTree": {
                "children1": {
                  "baa899a9-cdef-4012-b456-718364767b70": {
                    "properties": {
                      "field": "profileId",
                      "operator": "equal",
                      "value": [
                        null
                      ],
                      "valueSrc": [
                        "value"
                      ],
                      "valueType": [
                        "number"
                      ]
                    },
                    "type": "rule"
                  }
                },
                "id": "b8aaaa8b-0123-4456-b89a-b18364767b70",
                "type": "group"
              }
            },
            "table": "facebookInsights"
          }
        ],
        "title": "",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {},
              "renameByName": {
                "f0_": "Zugriffe",
                "page_impressions_unique": "Potentielle Reichweite"
              }
            }
          }
        ],
        "transparent": true,
        "type": "stat"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "description": "Durchschnitt pro Episode für die die in der Navigation unter Episode ausgewählten Audios ",
        "fieldConfig": {
          "defaults": {
            "color": {
              "fixedColor": "dark-blue",
              "mode": "fixed"
            },
            "decimals": 0,
            "mappings": [],
            "noValue": "–",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "string"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Interaktionen"
              },
              "properties": [
                {
                  "id": "displayName",
                  "value": "∑ Interaktionen"
                },
                {
                  "id": "unit",
                  "value": "locale"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 4,
          "w": 2,
          "x": 9,
          "y": 16
        },
        "id": 82,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "center",
          "orientation": "auto",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "last"
            ],
            "fields": "/.*/",
            "values": false
          },
          "showPercentChange": false,
          "text": {
            "titleSize": 17,
            "valueSize": 20
          },
          "textMode": "value_and_name",
          "wideLayout": true
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Quintly",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT  CONCAT(REPEAT(\" \", $filled_size - CHAR_LENGTH(CAST(summe as STRING))), REPLACE(CAST(FORMAT(\"%'.0f\", CAST(ROUND(summe) as NUMERIC)) AS STRING), \",\", \".\"))FROM\n(\n  SELECT \n    SAFE_DIVIDE(SUM(m_zugriffe_1),COUNT(DISTINCT headline)) AS summe \n  FROM \n    $episode_dataset\n  WHERE \n    (\"$Bereich\" = \"Alle Bereiche\" OR branding = \"$Bereich\")\n    AND (\"\"\"$Podcast\"\"\" = \"All titles\" OR REPLACE(headline, \"'\", \"\") IN UNNEST(ARRAY[$Episode]))\n    AND date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\n)",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "page_engaged_users",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50,
              "whereJsonTree": {
                "children1": {
                  "baa899a9-cdef-4012-b456-718364767b70": {
                    "properties": {
                      "field": "profileId",
                      "operator": "equal",
                      "value": [
                        null
                      ],
                      "valueSrc": [
                        "value"
                      ],
                      "valueType": [
                        "number"
                      ]
                    },
                    "type": "rule"
                  }
                },
                "id": "b8aaaa8b-0123-4456-b89a-b18364767b70",
                "type": "group"
              }
            },
            "table": "facebookInsights"
          }
        ],
        "title": "",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {},
              "indexByName": {},
              "renameByName": {
                "f0_": "Ø Episode",
                "page_impressions_unique": "Potentielle Reichweite"
              }
            }
          }
        ],
        "transparent": true,
        "type": "stat"
      },
      {
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 3,
          "x": 0,
          "y": 17
        },
        "id": 75,
        "options": {
          "code": {
            "language": "plaintext",
            "showLineNumbers": false,
            "showMiniMap": false
          },
          "content": "${delay_text}",
          "mode": "markdown"
        },
        "pluginVersion": "11.3.1",
        "title": "",
        "transparent": true,
        "type": "text"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 9,
          "w": 24,
          "x": 0,
          "y": 20
        },
        "id": 45,
        "options": {
          "baidu": {
            "callback": "bmapReady",
            "key": ""
          },
          "editor": {
            "format": "auto",
            "height": 2000
          },
          "editorMode": "code",
          "gaode": {
            "key": "",
            "plugin": "AMap.Scale,AMap.ToolBar"
          },
          "getOption": "function formatDate(timestamp) {\n  const date = new Date(timestamp);\n  let day = ('0' + date.getDate()).slice(-2);\n  let month = ('0' + (date.getMonth() + 1)).slice(-2);\n  let year = date.getFullYear();\n  return `${day}.${month}.${year}`;\n}\n\nconst allSumData = context.panel.data.series.flatMap((s) => {\n  const allSum = s.fields.find((f) => f.name === 'zugriffe').values;\n  return allSum;\n})\n\nconst series = context.panel.data.series.map((s) => {\n  const timeValues = s.fields.find((f) => f.name === 'date').values;\n  const type = s.fields.find((f) => f.name === 'type').values[0];\n  const zugriffe = s.fields.find((f) => f.name === 'zugriffe').values;\n  const ard_sum = s.fields.find((f) => f.name === 'ard_summe').values;\n  const apple_sum = s.fields.find((f) => f.name === 'apple_summe').values;\n  const spotify_sum = s.fields.find((f) => f.name === 'spotify_summe').values;\n  const rest_sum = s.fields.find((f) => f.name === 'rest_summe').values;\n  console.log(\"Date\", timeValues);\n  console.log(\"Type\", type);\n  console.log(\"Zugriffe Gesamt\", zugriffe);\n  console.log(\"ARD Summe\", ard_sum);\n  console.log(\"Apple Summe\", apple_sum);\n  console.log(\"Spotify Summe\", spotify_sum);\n  console.log(\"Rest Summe\", rest_sum);\n\n  if (type === \"bar\") {\n    return [\n      //{\n      //  name: 'Zugriffe',\n      //  type: type,\n      //  stack: 'total',\n      //  smooth: true,\n      // showSymbol: false,\n      //data: zugriffe.map((value, index) => [timeValues[index], value])\n      //},\n      {\n        name: 'ARD Audiothek',\n        type: type,\n        stack: 'total',\n        smooth: true,\n        showSymbol: false,\n        itemStyle: {\n          color: \"rgb(40, 115, 237)\"\n        },\n        data: ard_sum.map((value, index) => [timeValues[index], value])\n      },\n      {\n        name: 'Apple Podcasts',\n        type: type,\n        stack: 'total',\n        smooth: true,\n        showSymbol: false,\n        itemStyle: {\n          color: \"rgb(166, 77, 204)\"\n        },\n        data: apple_sum.map((value, index) => [timeValues[index], value])\n      },\n      {\n        name: 'Spotify',\n        type: type,\n        stack: 'total',\n        smooth: true,\n        showSymbol: false,\n        itemStyle: {\n          color: \"rgb(89, 169, 77)\"\n        },\n        data: spotify_sum.map((value, index) => [timeValues[index], value])\n      },\n      {\n        name: 'Rest',\n        type: type,\n        stack: 'total',\n        label: {\n          show: true,\n          position: 'top',\n          formatter: function (params) {\n            const allSumValue = allSumData[params.dataIndex];\n            let number = Math.floor(allSumValue);\n            let formattedNumber = new Intl.NumberFormat('de-DE').format(number);\n            return formattedNumber;\n          }\n        },\n        itemStyle: {\n          color: \"rgb(158, 158, 158)\"\n        },\n        smooth: true,\n        showSymbol: false,\n        data: rest_sum.map((value, index) => [timeValues[index], value])\n      }\n    ]\n  } else {\n    return [\n      {\n        name: 'Zugriffe Gesamt',\n        type: type,\n        smooth: true,\n        showSymbol: false,\n        itemStyle: {\n          color: \"rgb(255,0, 0)\"\n        },\n        data: zugriffe.map((value, index) => [timeValues[index], value])\n      },\n      {\n        name: 'ARD Audiothek',\n        type: type,\n        smooth: true,\n        showSymbol: false,\n        itemStyle: {\n          color: \"rgb(40, 115, 237)\"\n        },\n        data: ard_sum.map((value, index) => [timeValues[index], value])\n      },\n      {\n        name: 'Apple Podcasts',\n        type: type,\n        smooth: true,\n        showSymbol: false,\n        itemStyle: {\n          color: \"rgb(166, 77, 204)\"\n        },\n        data: apple_sum.map((value, index) => [timeValues[index], value])\n      },\n      {\n        name: 'Spotify',\n        type: type,\n        smooth: true,\n        showSymbol: false,\n        itemStyle: {\n          color: \"rgb(89, 169, 77)\"\n        },\n        data: spotify_sum.map((value, index) => [timeValues[index], value])\n      },\n      {\n        name: 'Rest',\n        type: type,\n        smooth: true,\n        showSymbol: false,\n        itemStyle: {\n          color: \"rgb(158, 158, 158)\"\n        },\n        data: rest_sum.map((value, index) => [timeValues[index], value])\n      }\n    ]\n  }\n}).flat();\n\n\n\n/**\n * Enable Data Zoom by default\n */\nsetTimeout(() => context.panel.chart.dispatchAction({\n  type: 'takeGlobalCursor',\n  key: 'dataZoomSelect',\n  dataZoomSelectActive: true,\n}), 500);\n\n/**\n * Update Time Range on Zoom\n */\ncontext.panel.chart.on('datazoom', function (params) {\n  const startIndex = params.batch[0]?.startValue;\n  const endIndex = params.batch[0]?.endValue;\n\n  const timeValues = context.panel.data.series[0].fields.find((f) => f.name === 'date').values;\n\n  const startTime = new Date(timeValues[startIndex]).getTime();\n  const endTime = new Date(timeValues[endIndex]).getTime();\n\n  if (!isNaN(startTime) && !isNaN(endTime)) {\n    context.grafana.locationService.partial({ from: startTime, to: endTime });\n  } else {\n    console.error(\"Invalid start or end time:\", { startIndex, endIndex });\n  }\n});\n\nreturn {\n  backgroundColor: 'transparent',\n  tooltip: {\n    trigger: 'axis',\n    axisPointer: {\n      type: 'none'\n    },\n    formatter: function (params) {\n      let tooltipContent = formatDate(params[0].axisValue) + '<br/>'; // Datumsformatierung\n      params.forEach(function (item) {\n        //let formattedValue = item.data[1].toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.'); // Tausendertrennzeichen einfügen\n        let number = Math.floor(item.data[1]);\n        let formattedValue = new Intl.NumberFormat('de-DE').format(number);\n        tooltipContent += item.marker + item.seriesName + ': ' + formattedValue + '<br/>';\n      });\n      return tooltipContent;\n    }\n  },\n  legend: {\n    orient: 'horizontal',\n    left: 'center',\n    bottom: '0%',\n    itemGap: 40,\n    textStyle: {\n      fontSize: 16\n    }\n  },\n  toolbox: {\n    feature: {\n      dataZoom: {\n        yAxisIndex: 'none',\n        icon: {\n          zoom: 'path://',\n          back: 'path://',\n        },\n      },\n      saveAsImage: {},\n    }\n  },\n  xAxis: {\n    type: 'category',\n    axisLabel: {\n      hideOverlap: true,\n      formatter: function (value) {\n        const date = new Date(value);\n        let day = ('0' + date.getDate()).slice(-2);\n        let month = ('0' + (date.getMonth() + 1)).slice(-2);\n        let year = date.getFullYear();\n        return `${day}.${month}.${year}`;\n      },\n      //showMaxLabel: '20'\n    },\n  },\n  yAxis: {\n    type: 'value',\n    min: '0',\n    axisLabel: {\n      formatter: function (value) {\n        // Umwandeln des Werts in einen String und Ersetzen von Kommas durch Punkte\n        return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.');\n      }\n    },\n  },\n  grid: {\n    left: '2%',\n    right: '2%',\n    top: '2%',\n    bottom: 34,\n    containLabel: true,\n  },\n  series,\n};",
          "google": {
            "callback": "gmapReady",
            "key": ""
          },
          "map": "none",
          "renderer": "canvas",
          "themeEditor": {
            "config": "{}",
            "height": 400,
            "name": "default"
          },
          "visualEditor": {
            "code": "return {\n  dataset: context.editor.dataset,\n  series: context.editor.series,\n  xAxis: {\n    type: 'time',\n  },\n  yAxis: {\n    type: 'value',\n    min: 'dataMin',\n  },\n}\n",
            "dataset": [],
            "series": []
          }
        },
        "pluginVersion": "6.1.0",
        "targets": [
          {
            "dataset": "Piano",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT\n    date,\n    SUM(CASE WHEN platform = 'ARD Audiothek' THEN m_zugriffe_1 ELSE 0 END) AS ard_summe,\n    SUM(CASE WHEN platform = 'Apple Podcasts' THEN m_zugriffe_1 ELSE 0 END) AS apple_summe,\n    SUM(CASE WHEN platform = 'Spotify' THEN m_zugriffe_1 ELSE 0 END) AS spotify_summe,\n    SUM(CASE WHEN platform NOT IN ('ARD Audiothek', 'Spotify', 'Apple Podcasts') THEN m_zugriffe_1 ELSE 0 END) AS rest_summe,\n    SUM(m_zugriffe_1) as zugriffe,\n    \"${type}\" as type,\n    DATE_DIFF(DATE('${__to:date}', \"Europe/Berlin\"),DATE('${__from:date}', \"Europe/Berlin\"),DAY) + 1 as timeRange\nFROM \n    $platform_dataset\nWHERE\n    broadcast_id IN ($podcast_ids)\n    AND date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\nGROUP BY date\nORDER BY date ASC",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "*",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            },
            "table": "NDR_spotify_episodes"
          }
        ],
        "title": "Zugriffe pro Tag für \"$Podcast_title\"",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {
                "branding": true,
                "broadcast_id": false,
                "date": false,
                "f0_": false,
                "podcast_title": false,
                "publication_date_1": false,
                "ressource": true,
                "sophora_id": true,
                "tmstp": true,
                "zugriffe": false
              },
              "indexByName": {
                "f0_": 3,
                "f1_": 4,
                "headline": 2,
                "podcast_title": 1,
                "publication_date_2": 0
              },
              "renameByName": {
                "f0_": "",
                "f1_": "Tenchnische Nutzer",
                "headline": "Episode",
                "podcast_title": "Podcast",
                "publication_date_1": "Datum",
                "publication_date_2": "Datum",
                "technische_nutzer": "Technische Nutzer",
                "zugriffe": "Zugriffe gesamt"
              }
            }
          }
        ],
        "type": "volkovlabs-echarts-panel"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 6,
          "w": 24,
          "x": 0,
          "y": 29
        },
        "id": 42,
        "options": {
          "baidu": {
            "callback": "bmapReady",
            "key": ""
          },
          "editor": {
            "format": "auto",
            "height": 600
          },
          "editorMode": "code",
          "gaode": {
            "key": "",
            "plugin": "AMap.Scale,AMap.ToolBar"
          },
          "getOption": "const allSumData = context.panel.data.series.flatMap((s) => {\n  const allSum = s.fields.find((f) => f.name === 'zugriffe').values;\n  return allSum;\n})\n\nconst option = {\n  tooltip: {\n    trigger: 'axis',\n    axisPointer: {\n      type: 'shadow'\n    },\n    formatter: function (params) {\n      const allSumValue = allSumData[params[0].dataIndex];\n      let formattedNumber = new Intl.NumberFormat('de-DE').format(allSumValue);\n      return `Zugriffe: ${formattedNumber}`;\n    }\n  },\n  //legend: {},\n  grid: {\n    left: '3%',\n    right: '4%',\n    bottom: '3%',\n    containLabel: true\n  },\n  yAxis: { // Switched to yAxis\n    type: 'value'\n  },\n  xAxis: { // Switched to xAxis\n    type: 'category',\n    data: [...new Set(context.panel.data.series.flatMap((s) => {\n      const headlines = s.fields.find((f) => f.name === 'headline').values;\n      return headlines;\n    }))]\n  },\n  series: [\n    {\n      name: 'Zugriffe',\n      type: 'bar',\n      label: {\n        show: true,\n        position: 'top',\n        formatter: function (params) {\n          const allSumValue = allSumData[params.dataIndex];\n          let number = Math.floor(allSumValue);\n          let formattedNumber = new Intl.NumberFormat('de-DE').format(number);\n          return formattedNumber;\n        }\n      },\n      itemStyle: {\n        color: \"rgb(31, 96, 196)\"\n      },\n      data: context.panel.data.series.flatMap((s) => {\n        const zugriffe = s.fields.find((f) => f.name === 'zugriffe').values;\n        return zugriffe;\n      })\n    }\n  ]\n};\n\nreturn option;\n",
          "google": {
            "callback": "gmapReady",
            "key": ""
          },
          "map": "none",
          "renderer": "canvas",
          "themeEditor": {
            "config": "{}",
            "height": 400,
            "name": "default"
          },
          "visualEditor": {
            "code": "return {\n  dataset: context.editor.dataset,\n  series: context.editor.series,\n  xAxis: {\n    type: 'time',\n  },\n  yAxis: {\n    type: 'value',\n    min: 'dataMin',\n  },\n}\n",
            "dataset": [],
            "series": []
          }
        },
        "pluginVersion": "6.1.0",
        "targets": [
          {
            "dataset": "Piano",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT\n  headline,\n  SUM(m_zugriffe_1) AS zugriffe,\nFROM $episode_dataset\nWHERE \n  broadcast_id IN ($podcast_ids)\n  AND date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\nGROUP BY headline\nORDER BY zugriffe DESC\nLIMIT 3",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "*",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            },
            "table": "NDR_spotify_episodes"
          }
        ],
        "title": "Top 3 Episoden von \"$Podcast_title\"",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {
                "branding": true,
                "broadcast_id": false,
                "date": false,
                "f0_": false,
                "podcast_title": false,
                "publication_date_1": false,
                "ressource": true,
                "sophora_id": true,
                "tmstp": true
              },
              "indexByName": {
                "f0_": 3,
                "f1_": 4,
                "headline": 2,
                "podcast_title": 1,
                "publication_date_2": 0
              },
              "renameByName": {
                "f0_": "",
                "f1_": "Tenchnische Nutzer",
                "headline": "Episode",
                "podcast_title": "Podcast",
                "publication_date_1": "Datum",
                "publication_date_2": "Datum",
                "technische_nutzer": "Technische Nutzer",
                "zugriffe": "Zugriffe"
              }
            }
          }
        ],
        "type": "volkovlabs-echarts-panel"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "custom": {
              "align": "auto",
              "cellOptions": {
                "type": "auto"
              },
              "filterable": true,
              "inspect": false
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Episode"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 530
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Podcast"
              },
              "properties": [
                {
                  "id": "custom.width",
                  "value": 451
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Zugriffe"
              },
              "properties": [
                {
                  "id": "custom.minWidth",
                  "value": 200
                },
                {
                  "id": "custom.align",
                  "value": "left"
                }
              ]
            },
            {
              "matcher": {
                "id": "byName",
                "options": "VÖ Datum"
              },
              "properties": [
                {
                  "id": "unit",
                  "value": "time: DD.MM.YYYY"
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 12,
          "w": 24,
          "x": 0,
          "y": 35
        },
        "id": 66,
        "options": {
          "cellHeight": "sm",
          "footer": {
            "countRows": false,
            "enablePagination": true,
            "fields": "",
            "reducer": [
              "sum"
            ],
            "show": false
          },
          "showHeader": true,
          "sortBy": []
        },
        "pluginVersion": "11.3.1",
        "targets": [
          {
            "dataset": "Piano",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT\n  podcast_title,\n  headline,\n  publication_date_1,\n  SUM(m_zugriffe_1) as zugriffe\nFROM $episode_dataset\nWHERE \n  (\"$Bereich\" = \"Alle Bereiche\" OR branding = \"$Bereich\")\n  AND (\"\"\"$Podcast\"\"\" = \"All titles\" OR REPLACE(headline, \"'\", \"\") IN UNNEST(ARRAY[$Episode]))\n  AND date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\nGROUP BY podcast_title, headline, publication_date_1\nORDER BY zugriffe DESC",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "*",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            },
            "table": "NDR_spotify_episodes"
          }
        ],
        "title": "Episoden",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {
                "branding": true,
                "broadcast_id": true,
                "date": false,
                "f0_": true,
                "podcast_title": false,
                "publication_date_1": false,
                "ressource": true,
                "sophora_id": true,
                "technische_nutzer": true,
                "tmstp": true
              },
              "includeByName": {},
              "indexByName": {
                "headline": 1,
                "podcast_title": 0,
                "publication_date_1": 2,
                "zugriffe": 3
              },
              "renameByName": {
                "f0_": "Technische Nutzer",
                "f1_": "Technische Nutzer",
                "headline": "Episode",
                "podcast_title": "Podcast",
                "publication_date_1": "VÖ Datum",
                "publication_date_2": "VÖ Datum",
                "technische_nutzer": "Technische Nutzer pro Tag",
                "zugriffe": "Zugriffe"
              }
            }
          }
        ],
        "type": "table"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "mappings": [],
            "noValue": "-",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "locale"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byName",
                "options": "Episode"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Podcast"
              },
              "properties": []
            },
            {
              "matcher": {
                "id": "byName",
                "options": "Zugriffe"
              },
              "properties": []
            }
          ]
        },
        "gridPos": {
          "h": 13,
          "w": 24,
          "x": 0,
          "y": 47
        },
        "id": 86,
        "options": {
          "nestedObjects": [],
          "tables": [
            {
              "actionsColumnConfig": {
                "alignment": "start",
                "fontSize": "sm",
                "label": "",
                "width": {
                  "auto": false,
                  "value": 100
                }
              },
              "addRow": {
                "enabled": false,
                "permission": {
                  "mode": "",
                  "userRole": []
                },
                "request": {
                  "datasource": "",
                  "payload": {}
                }
              },
              "deleteRow": {
                "enabled": false,
                "permission": {
                  "mode": "",
                  "userRole": []
                },
                "request": {
                  "datasource": "",
                  "payload": {}
                }
              },
              "expanded": false,
              "items": [
                {
                  "aggregation": "none",
                  "appearance": {
                    "alignment": "start",
                    "background": {
                      "applyToRow": false
                    },
                    "colors": {},
                    "header": {
                      "backgroundColor": "#ff0000",
                      "fontSize": "md"
                    },
                    "width": {
                      "auto": true,
                      "min": 20,
                      "value": 100
                    },
                    "wrap": true
                  },
                  "edit": {
                    "editor": {
                      "type": "string"
                    },
                    "enabled": false,
                    "permission": {
                      "mode": "",
                      "userRole": []
                    }
                  },
                  "enabled": true,
                  "field": {
                    "name": "zugriffe",
                    "source": "A"
                  },
                  "filter": {
                    "enabled": false,
                    "mode": "client",
                    "variable": ""
                  },
                  "footer": [],
                  "gauge": {
                    "mode": "basic",
                    "valueDisplayMode": "text",
                    "valueSize": 14
                  },
                  "group": false,
                  "label": "",
                  "newRowEdit": {
                    "editor": {
                      "type": "string"
                    },
                    "enabled": false
                  },
                  "objectId": "",
                  "pin": "",
                  "preformattedStyle": false,
                  "scale": "auto",
                  "showingRows": 20,
                  "sort": {
                    "descFirst": true,
                    "enabled": true
                  },
                  "type": "auto"
                },
                {
                  "aggregation": "none",
                  "appearance": {
                    "alignment": "start",
                    "background": {
                      "applyToRow": false
                    },
                    "colors": {},
                    "header": {
                      "fontSize": "md"
                    },
                    "width": {
                      "auto": false,
                      "min": 20,
                      "value": 474
                    },
                    "wrap": true
                  },
                  "edit": {
                    "editor": {
                      "type": "string"
                    },
                    "enabled": false,
                    "permission": {
                      "mode": "",
                      "userRole": []
                    }
                  },
                  "enabled": true,
                  "field": {
                    "name": "Title",
                    "source": "A"
                  },
                  "filter": {
                    "enabled": true,
                    "mode": "client",
                    "variable": ""
                  },
                  "footer": [],
                  "gauge": {
                    "mode": "basic",
                    "valueDisplayMode": "text",
                    "valueSize": 14
                  },
                  "group": false,
                  "label": "",
                  "newRowEdit": {
                    "editor": {
                      "type": "string"
                    },
                    "enabled": false
                  },
                  "objectId": "",
                  "pin": "left",
                  "showingRows": 20,
                  "sort": {
                    "descFirst": false,
                    "enabled": true
                  },
                  "type": "auto"
                },
                {
                  "aggregation": "none",
                  "appearance": {
                    "alignment": "start",
                    "background": {
                      "applyToRow": false
                    },
                    "colors": {},
                    "header": {
                      "backgroundColor": "#5794f2",
                      "fontSize": "md"
                    },
                    "width": {
                      "auto": true,
                      "min": 20,
                      "value": 100
                    },
                    "wrap": true
                  },
                  "edit": {
                    "editor": {
                      "type": "string"
                    },
                    "enabled": false,
                    "permission": {
                      "mode": "",
                      "userRole": []
                    }
                  },
                  "enabled": true,
                  "field": {
                    "name": "ard_summe",
                    "source": "A"
                  },
                  "filter": {
                    "enabled": true,
                    "mode": "client",
                    "variable": ""
                  },
                  "footer": [],
                  "gauge": {
                    "mode": "basic",
                    "valueDisplayMode": "text",
                    "valueSize": 14
                  },
                  "group": false,
                  "label": "",
                  "newRowEdit": {
                    "editor": {
                      "type": "string"
                    },
                    "enabled": false
                  },
                  "objectId": "",
                  "pin": "",
                  "preformattedStyle": false,
                  "scale": "auto",
                  "showingRows": 20,
                  "sort": {
                    "descFirst": false,
                    "enabled": true
                  },
                  "type": "auto"
                },
                {
                  "aggregation": "none",
                  "appearance": {
                    "alignment": "start",
                    "background": {
                      "applyToRow": false
                    },
                    "colors": {},
                    "header": {
                      "backgroundColor": "#73bf69",
                      "fontSize": "md"
                    },
                    "width": {
                      "auto": true,
                      "min": 20,
                      "value": 100
                    },
                    "wrap": true
                  },
                  "edit": {
                    "editor": {
                      "type": "string"
                    },
                    "enabled": false,
                    "permission": {
                      "mode": "",
                      "userRole": []
                    }
                  },
                  "enabled": true,
                  "field": {
                    "name": "spotify_summe",
                    "source": "A"
                  },
                  "filter": {
                    "enabled": true,
                    "mode": "client",
                    "variable": ""
                  },
                  "footer": [],
                  "gauge": {
                    "mode": "basic",
                    "valueDisplayMode": "text",
                    "valueSize": 14
                  },
                  "group": false,
                  "label": "",
                  "newRowEdit": {
                    "editor": {
                      "type": "string"
                    },
                    "enabled": false
                  },
                  "objectId": "",
                  "pin": "",
                  "showingRows": 20,
                  "sort": {
                    "descFirst": false,
                    "enabled": true
                  },
                  "type": "auto"
                },
                {
                  "aggregation": "none",
                  "appearance": {
                    "alignment": "start",
                    "background": {
                      "applyToRow": false
                    },
                    "colors": {},
                    "header": {
                      "backgroundColor": "#b877d9",
                      "fontSize": "md"
                    },
                    "width": {
                      "auto": true,
                      "min": 20,
                      "value": 100
                    },
                    "wrap": true
                  },
                  "edit": {
                    "editor": {
                      "type": "string"
                    },
                    "enabled": false,
                    "permission": {
                      "mode": "",
                      "userRole": []
                    }
                  },
                  "enabled": true,
                  "field": {
                    "name": "apple_summe",
                    "source": "A"
                  },
                  "filter": {
                    "enabled": true,
                    "mode": "client",
                    "variable": ""
                  },
                  "footer": [],
                  "gauge": {
                    "mode": "basic",
                    "valueDisplayMode": "text",
                    "valueSize": 14
                  },
                  "group": false,
                  "label": "",
                  "newRowEdit": {
                    "editor": {
                      "type": "string"
                    },
                    "enabled": false
                  },
                  "objectId": "",
                  "pin": "",
                  "showingRows": 20,
                  "sort": {
                    "descFirst": false,
                    "enabled": true
                  },
                  "type": "auto"
                }
              ],
              "name": "Podcasts",
              "pagination": {
                "enabled": true,
                "mode": "client"
              },
              "rowHighlight": {
                "backgroundColor": "transparent",
                "columnId": "",
                "enabled": false,
                "scrollTo": "",
                "smooth": false,
                "variable": ""
              },
              "showHeader": true,
              "update": {
                "datasource": "",
                "payload": {}
              }
            }
          ],
          "tabsSorting": false,
          "toolbar": {
            "alignment": "left",
            "export": false
          }
        },
        "pluginVersion": "1.9.0",
        "targets": [
          {
            "dataset": "Piano",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT\n    podcast_title AS Title,\n    SUM(CASE WHEN platform = 'ARD Audiothek' THEN m_zugriffe_1 ELSE NULL END) AS ard_summe,\n    SUM(CASE WHEN platform = 'Apple Podcasts' THEN m_zugriffe_1 ELSE NULL END) AS apple_summe,\n    SUM(CASE WHEN platform = 'Spotify' THEN m_zugriffe_1 ELSE NULL END) AS spotify_summe,\n    SUM(m_zugriffe_1) AS zugriffe,\nFROM \n    $platform_dataset AS platform_table\nLEFT JOIN $profiles_dataset AS profiles_table\nON platform_table.broadcast_id = profiles_table.broadcast_id[0]\nWHERE\n    platform_table.broadcast_id IN ($podcast_ids)\n    AND date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\nGROUP BY podcast_title\nORDER BY zugriffe DESC",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "*",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            },
            "table": "NDR_spotify_episodes"
          }
        ],
        "title": "",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {
                "branding": true,
                "broadcast_id": true,
                "date": false,
                "f0_": true,
                "podcast_title": false,
                "publication_date_1": false,
                "ressource": true,
                "sophora_id": true,
                "technische_nutzer": true,
                "tmstp": true
              },
              "includeByName": {},
              "indexByName": {
                "Title": 0,
                "apple_summe": 2,
                "ard_summe": 1,
                "spotify_summe": 3,
                "zugriffe": 4
              },
              "renameByName": {
                "Title": "Podcast",
                "apple_summe": "Apple Podcasts",
                "ard_summe": "ARD Audiothek",
                "f0_": "Technische Nutzer",
                "f1_": "Technische Nutzer",
                "headline": "Episode",
                "podcast_title": "Podcast",
                "publication_date_1": "Datum",
                "publication_date_2": "VÖ Datum",
                "spotify_summe": "Spotify",
                "technische_nutzer": "Technische Nutzer pro Tag",
                "zugriffe": "Zugriffe Gesamt"
              }
            }
          }
        ],
        "type": "volkovlabs-table-panel"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {
            "custom": {
              "thresholdsStyle": {
                "mode": "color",
                "thresholds": []
              }
            },
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 5,
          "x": 0,
          "y": 60
        },
        "id": 77,
        "options": {
          "alwaysVisibleFilter": false,
          "autoScroll": false,
          "collapsedByDefault": false,
          "customValue": false,
          "displayMode": "minimize",
          "emptyValue": false,
          "favorites": {
            "addQuery": {},
            "datasource": "",
            "deleteQuery": {},
            "enabled": false,
            "getQuery": {},
            "storage": "browser"
          },
          "filter": false,
          "groupSelection": false,
          "header": true,
          "isUseLocalTime": false,
          "minimizeOutputFormat": "text",
          "padding": 20,
          "persistent": false,
          "saveSelectedGroup": false,
          "saveSelectedGroupKey": "",
          "showGroupTotal": false,
          "showLabel": true,
          "showName": false,
          "showResetButton": false,
          "showTotal": false,
          "statusSort": false,
          "sticky": false,
          "tabsInOrder": true,
          "variable": "Plattformen"
        },
        "pluginVersion": "3.6.0",
        "targets": [
          {
            "refId": "A"
          }
        ],
        "title": "",
        "transparent": true,
        "type": "volkovlabs-variable-panel"
      },
      {
        "datasource": {
          "type": "grafana-bigquery-datasource",
          "uid": "qUaUqEk4k"
        },
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 9,
          "w": 24,
          "x": 0,
          "y": 62
        },
        "id": 79,
        "options": {
          "baidu": {
            "callback": "bmapReady",
            "key": ""
          },
          "editor": {
            "format": "auto",
            "height": 2000
          },
          "editorMode": "code",
          "gaode": {
            "key": "",
            "plugin": "AMap.Scale,AMap.ToolBar"
          },
          "getOption": "function formatDate(timestamp) {\n  const date = new Date(timestamp);\n  let day = ('0' + date.getDate()).slice(-2);\n  let month = ('0' + (date.getMonth() + 1)).slice(-2);\n  let year = date.getFullYear();\n  return `${day}.${month}.${year}`;\n}\n\nconst allSumData = context.panel.data.series.flatMap((s) => {\n  const allSum = s.fields.find((f) => f.name === 'zugriffe').values;\n  return allSum;\n})\n\nconst series = context.panel.data.series.map((s) => {\n  const timeValues = s.fields.find((f) => f.name === 'date').values;\n  const type = s.fields.find((f) => f.name === 'type').values[0];\n  const zugriffe = s.fields.find((f) => f.name === 'zugriffe').values;\n  const platform = s.fields.find((f) => f.name === 'platform').values[0];\n\n\n\n  if (type === \"bar\") {\n    return [\n      //{\n      //  name: 'Zugriffe',\n      //  type: type,\n      //  stack: 'total',\n      //  smooth: true,\n      // showSymbol: false,\n      //data: zugriffe.map((value, index) => [timeValues[index], value])\n      //},\n      {\n        name: platform,\n        type: type,\n        stack: 'total',\n        smooth: true,\n        showSymbol: false,\n        itemStyle: {\n          color: \"rgb(143, 178, 231)\"\n        },\n        data: zugriffe.map((value, index) => [timeValues[index], value])\n      },\n    ]\n  } else {\n    return [\n      {\n        name: platform,\n        type: type,\n        smooth: true,\n        showSymbol: false,\n        itemStyle: {\n          color: \"rgb(143, 178, 231)\"\n        },\n        data: zugriffe.map((value, index) => [timeValues[index], value])\n      },\n    ]\n  }\n}).flat();\n\n\n\n/**\n * Enable Data Zoom by default\n */\nsetTimeout(() => context.panel.chart.dispatchAction({\n  type: 'takeGlobalCursor',\n  key: 'dataZoomSelect',\n  dataZoomSelectActive: true,\n}), 500);\n\n/**\n * Update Time Range on Zoom\n */\ncontext.panel.chart.on('datazoom', function (params) {\n  const startValue = params.batch[0]?.startValue;\n  const endValue = params.batch[0]?.endValue;\n  context.grafana.locationService.partial({ from: startValue, to: endValue });\n});\n\n\nreturn {\n  backgroundColor: 'transparent',\n  tooltip: {\n    trigger: 'axis',\n    axisPointer: {\n      type: 'none'\n    },\n    formatter: function (params) {\n      let tooltipContent = formatDate(params[0].axisValue) + '<br/>'; // Datumsformatierung\n      params.forEach(function (item) {\n        //let formattedValue = item.data[1].toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.'); // Tausendertrennzeichen einfügen\n        let number = Math.floor(item.data[1]);\n        let formattedValue = new Intl.NumberFormat('de-DE').format(number);\n        tooltipContent += item.marker + item.seriesName + ': ' + formattedValue + '<br/>';\n      });\n      return tooltipContent;\n    }\n  },\n  legend: {\n    orient: 'horizontal',\n    left: 'center',\n    bottom: '0%',\n    itemGap: 40,\n    textStyle: {\n      fontSize: 16\n    }\n  },\n  toolbox: {\n    feature: {\n      dataZoom: {\n        yAxisIndex: 'none',\n        icon: {\n          zoom: 'path://',\n          back: 'path://',\n        },\n      },\n      saveAsImage: {},\n    }\n  },\n  xAxis: {\n    type: 'category',\n    axisLabel: {\n      hideOverlap: true,\n      formatter: function (value) {\n        const date = new Date(value);\n        let day = ('0' + date.getDate()).slice(-2);\n        let month = ('0' + (date.getMonth() + 1)).slice(-2);\n        let year = date.getFullYear();\n        return `${day}.${month}.${year}`;\n      },\n      //showMaxLabel: '20'\n    },\n  },\n  yAxis: {\n    type: 'value',\n    min: '0',\n    axisLabel: {\n      formatter: function (value) {\n        // Umwandeln des Werts in einen String und Ersetzen von Kommas durch Punkte\n        return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.');\n      }\n    },\n  },\n  grid: {\n    left: '2%',\n    right: '2%',\n    top: '2%',\n    bottom: 34,\n    containLabel: true,\n  },\n  series,\n};",
          "google": {
            "callback": "gmapReady",
            "key": ""
          },
          "map": "none",
          "renderer": "canvas",
          "themeEditor": {
            "config": "{}",
            "height": 400,
            "name": "default"
          },
          "visualEditor": {
            "code": "return {\n  dataset: context.editor.dataset,\n  series: context.editor.series,\n  xAxis: {\n    type: 'time',\n  },\n  yAxis: {\n    type: 'value',\n    min: 'dataMin',\n  },\n}\n",
            "dataset": [],
            "series": []
          }
        },
        "pluginVersion": "6.1.0",
        "targets": [
          {
            "dataset": "Piano",
            "datasource": {
              "type": "grafana-bigquery-datasource",
              "uid": "qUaUqEk4k"
            },
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT\n    date,\n    \"${type}\" as type,\n    SUM(m_zugriffe_1) AS zugriffe,\n    \"$Plattformen\" as platform,\n    DATE_DIFF(DATE('${__to:date}', \"Europe/Berlin\"),DATE('${__from:date}', \"Europe/Berlin\"),DAY) + 1 as timeRange\nFROM \n    $platform_dataset\nWHERE\n    broadcast_id IN ($podcast_ids)\n    AND (\"$Plattformen\" = \"Alle Plattformen\" OR platform = \"$Plattformen\")\n    AND date BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\")\nGROUP BY date\nORDER BY date ASC",
            "refId": "A",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "*",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            },
            "table": "NDR_spotify_episodes"
          }
        ],
        "title": "Zugriffe pro Tag für \"$Podcast_title\"",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {
                "branding": true,
                "broadcast_id": false,
                "date": false,
                "f0_": false,
                "podcast_title": false,
                "publication_date_1": false,
                "ressource": true,
                "sophora_id": true,
                "tmstp": true,
                "zugriffe": false
              },
              "indexByName": {
                "f0_": 3,
                "f1_": 4,
                "headline": 2,
                "podcast_title": 1,
                "publication_date_2": 0
              },
              "renameByName": {
                "f0_": "",
                "f1_": "Tenchnische Nutzer",
                "headline": "Episode",
                "podcast_title": "Podcast",
                "publication_date_1": "Datum",
                "publication_date_2": "Datum",
                "technische_nutzer": "Technische Nutzer",
                "zugriffe": "Zugriffe gesamt "
              }
            }
          }
        ],
        "type": "volkovlabs-echarts-panel"
      }
    ],
    "preload": false,
    "refresh": "",
    "schemaVersion": 40,
    "tags": [],
    "templating": {
      "list": [
        {
          "current": {
            "text": "MDR",
            "value": "MDR"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "includeAll": false,
          "label": "LRA:",
          "name": "LRA",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT a.LRA\r\nFROM (\r\nSELECT \"MDR\" as LRA\r\n) as a\r\nORDER BY (\r\n  CASE\r\n    WHEN REGEXP_CONTAINS(LOWER(\"${__user.email}\"), LOWER(a.LRA))\r\n    THEN 1\r\n    ELSE 0\r\n  END\r\n) DESC",
            "refId": "tempvar",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "type": "query"
        },
        {
          "current": {
            "text": "27.07.2024",
            "value": "27.07.2024"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "datenstand",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT \nFORMAT_DATETIME(\"%d.%m.%Y\", DATE(MAX(date)))\nFROM $episode_dataset\nWHERE CASE WHEN \"$Bereich\" = \"Alle Bereiche\" THEN TRUE\nELSE CASE WHEN \"$Podcast\" = \"All titles\" THEN TRUE\nELSE broadcast_id = \"${broadcast_id_branding}\" END END",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "Alle Bereiche – alle Podcastreihen",
            "value": "Alle Bereiche – alle Podcastreihen"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "Podcast_title",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT \nCASE \n  WHEN '$Podcast' = 'All titles' \n  THEN '$Bereich – alle Podcastreihen'\n  ELSE '$Podcast'\nEND \n",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "True",
            "value": "True"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "AllePodcastsCondition",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT \n    CASE \"\"\"$AllePodcasts\"\"\"\n    WHEN \"None\"\n    THEN \"True\"\n    ELSE CAST(\"\"\" REPLACE(podcast_title,'\"','') = \"$AllePodcasts\" \"\"\" as string) \n    END",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "all_titles_platforms",
            "value": "all_titles_platforms"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "dataset",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \"\"\"${Podcast}\"\"\"\r\nWHEN \"All titles\" THEN \"all_titles_platforms\"\r\nELSE \"not_all_titles_platforms\" END",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "allValue": "*",
          "current": {
            "text": "Alle Bereiche",
            "value": "Alle Bereiche"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "includeAll": false,
          "label": "Bereich:",
          "name": "Bereich",
          "options": [],
          "query": {
            "dataset": "Piano",
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT branding FROM (SELECT DISTINCT branding, 1 as sort \nFROM   $profiles_dataset\nWHERE $AllePodcastsCondition\nUNION DISTINCT\nSELECT CASE\nWHEN \"$AllePodcasts\" = \"None\" THEN \"Alle Bereiche\" END, 0 as sort)\nWHERE branding != \"\"\nOrder by sort, branding ASC",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "branding",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            },
            "table": "NDR_spotify_podcasts"
          },
          "refresh": 1,
          "regex": "",
          "type": "query"
        },
        {
          "current": {
            "text": "All titles",
            "value": "All titles"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "includeAll": false,
          "label": "Podcast:",
          "name": "Podcast",
          "options": [],
          "query": {
            "dataset": "Piano",
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "WITH all_podcasts AS(\n  SELECT podcast_title FROM $profiles_dataset\n  WHERE branding = \"$Bereich\"\n  UNION ALL\n  SELECT \"All titles\" as podcast_title \n)\nSELECT podcast_title FROM(\nSELECT DISTINCT REPLACE(podcast_title,'\"','') AS podcast_title, CASE podcast_title WHEN \"All titles\" THEN 0 ELSE 1 END AS sort  FROM all_podcasts\nWHERE $AllePodcastsCondition\nORDER BY sort,podcast_title DESC\n)\nORDER BY SORT, LOWER(podcast_title) ASC",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "podcast_title",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            },
            "table": "NDR_spotify_podcasts"
          },
          "refresh": 1,
          "regex": "",
          "type": "query"
        },
        {
          "current": {
            "text": [
              "All"
            ],
            "value": [
              "$__all"
            ]
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "includeAll": true,
          "label": "Episode:",
          "multi": true,
          "name": "Episode",
          "options": [],
          "query": {
            "dataset": "Piano",
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT REPLACE(headline,\"'\",\"\") FROM(\nSELECT DISTINCT headline, CASE headline WHEN \"All headlines\" THEN 0 ELSE 1 END AS sort  FROM $episode_dataset\nWHERE \nbranding = \"$Bereich\" \nAND REPLACE(podcast_title,'\"','') = \"\"\"$Podcast\"\"\"\nAND date > \"2022-01-01\"\nAND headline != \"All headlines\"\nORDER BY sort,headline DESC\n--ORDER BY podcast_title ASC\n)\nORDER BY SORT, headline ASC",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "headline",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            },
            "table": "NDR_spotify_episodes"
          },
          "refresh": 1,
          "regex": "",
          "type": "query"
        },
        {
          "current": {
            "text": "10",
            "value": "10"
          },
          "description": "",
          "hide": 2,
          "includeAll": false,
          "name": "filled_size_big",
          "options": [
            {
              "selected": true,
              "text": "10",
              "value": "10"
            }
          ],
          "query": "10",
          "skipUrlSync": true,
          "type": "custom"
        },
        {
          "current": {
            "text": "20",
            "value": "20"
          },
          "hide": 2,
          "includeAll": false,
          "name": "filled_size",
          "options": [
            {
              "selected": true,
              "text": "20",
              "value": "20"
            }
          ],
          "query": "20",
          "skipUrlSync": true,
          "type": "custom"
        },
        {
          "current": {
            "text": "44",
            "value": "44"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "filled_size_headline",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CAST(CHAR_LENGTH('$Podcast_title') + 10 AS STRING)",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "44",
            "value": "44"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "filled_size_headline_small",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CAST(CHAR_LENGTH('$Podcast_title') + 10 AS STRING)",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "isNone": true,
            "text": "None",
            "value": ""
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "broadcast_id_branding",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT COALESCE(broadcast_id[0]) \nFROM $profiles_dataset\nWHERE \nbranding = \"$Bereich\" \nAND REPLACE(podcast_title,'\"','') = \"\"\"$Podcast\"\"\"",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "https://share.ard-zdf-box.de/apps/files_sharing/publicpreview/Sxorbc6WLzk84iy?file=/&fileId=257042098&x=2132&y=1104&a=true&etag=31cb74f497586f722c788a3861963167",
            "value": "https://share.ard-zdf-box.de/apps/files_sharing/publicpreview/Sxorbc6WLzk84iy?file=/&fileId=257042098&x=2132&y=1104&a=true&etag=31cb74f497586f722c788a3861963167"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "Image",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "WITH image AS (\n    SELECT coverart\n    FROM $profiles_dataset\n \n    WHERE broadcast_id[0] = \"$broadcast_id_branding\"\n)\nSELECT\n    CASE\n        WHEN COUNT(*) = 0 AND \"$LRA\" = \"NDR\" AND \"$Bereich\" = \"N-JOY\" AND \"$broadcast_id_branding\" = \"\" THEN \"https://cdn-assets-eu.frontify.com/s3/frontify-enterprise-files-eu/eyJwYXRoIjoibm9yZGRldXRzY2hlci1ydW5kZnVua1wvYWNjb3VudHNcL2E1XC80MDAxMTgyXC9wcm9qZWN0c1wvNVwvYXNzZXRzXC8wOFwvMTk2XC9iYTlkZTc1MWZlZWMwNmViZDM0NDM2ODhmOGY0NzYxZS0xNjM2NjE2ODc3LmpwZyJ9:norddeutscher-rundfunk:uUTFFV1WGpZwfUFx0sn3hdp1-H5CQITeEe_0gdQHSHg?width=2400\"\n        WHEN COUNT(*) = 0 AND \"$LRA\" = \"NDR\" AND \"$Bereich\" = \"NDR Info\" AND \"$broadcast_id_branding\" = \"\" THEN \"https://cdn-assets-eu.frontify.com/s3/frontify-enterprise-files-eu/eyJwYXRoIjoibm9yZGRldXRzY2hlci1ydW5kZnVua1wvYWNjb3VudHNcL2E1XC80MDAxMTgyXC9wcm9qZWN0c1wvMThcL2Fzc2V0c1wvM2VcLzkxOVwvNjRhZjYzMmI2N2ZkYmVmZWJmY2Y0YThhNzAyNWIwZTAtMTY1MDQ0ODIzNS5qcGcifQ:norddeutscher-rundfunk:M9tIBD7laDLn0TY8Noqz3TQpSz1MpVJusNud1OhIXf4?width=2400\"\n        WHEN COUNT(*) = 0 AND \"$LRA\" = \"NDR\" AND \"$Bereich\" = \"NDR 1 Niedersachsen\" AND \"$broadcast_id_branding\" = \"\" THEN \"https://cdn-assets-eu.frontify.com/s3/frontify-enterprise-files-eu/eyJwYXRoIjoibm9yZGRldXRzY2hlci1ydW5kZnVua1wvYWNjb3VudHNcL2E1XC80MDAxMTgyXC9wcm9qZWN0c1wvMThcL2Fzc2V0c1wvYzRcLzkyM1wvMTcxMDY2ZmJhZDhjNDMxYmFiMDQ0Y2U2MWM0Mzg3OTEtMTY1MDQ0ODI2MC5qcGcifQ:norddeutscher-rundfunk:ZzBYV5x3vQVySQGINjGO7Nn1rD2IBf2U-aVvkcGLUKQ?width=2400\"\n        WHEN COUNT(*) = 0 AND \"$LRA\" = \"NDR\" AND \"$Bereich\" = \"NDR Kultur\" AND \"$broadcast_id_branding\" = \"\" THEN \"https://cdn-assets-eu.frontify.com/s3/frontify-enterprise-files-eu/eyJwYXRoIjoibm9yZGRldXRzY2hlci1ydW5kZnVua1wvYWNjb3VudHNcL2E1XC80MDAxMTgyXC9wcm9qZWN0c1wvMTNcL2Fzc2V0c1wvNzlcLzgyNlwvZGIyN2FjYWU0Yzg2OGM3ZTI3NTQxZDkxNzE0MjAwNGEtMTY1MDQ0MjE4NC5qcGcifQ:norddeutscher-rundfunk:25eKPn2M3tFARjFh3t6R-bPmSLoLn9wyrjcjYV2PDUU?width=2400\"\n        WHEN COUNT(*) = 0 AND \"$LRA\" = \"NDR\" AND \"$Bereich\" = \"NDR Schlager\" AND \"$broadcast_id_branding\" = \"\" THEN \"https://cdn-assets-eu.frontify.com/s3/frontify-enterprise-files-eu/eyJwYXRoIjoibm9yZGRldXRzY2hlci1ydW5kZnVua1wvYWNjb3VudHNcL2E1XC80MDAxMTgyXC9wcm9qZWN0c1wvMTNcL2Fzc2V0c1wvMGJcLzMzNTFcLzE3ODVkMGRhMWE4ODgzYmI0NDY2MDVkM2YzZTg1MzFlLTE2NTIwODIyNzkuanBnIn0:norddeutscher-rundfunk:VwGM84mU2ky8KhCMjG-Pi_TspF6g3RlDWjXLax_ldtg?width=2400\"\n        WHEN COUNT(*) = 0 AND \"$LRA\" = \"NDR\" AND \"$Bereich\" = \"NDR Blue\" AND \"$broadcast_id_branding\" = \"\" THEN \"https://cdn-assets-eu.frontify.com/s3/frontify-enterprise-files-eu/eyJwYXRoIjoibm9yZGRldXRzY2hlci1ydW5kZnVua1wvYWNjb3VudHNcL2E1XC80MDAxMTgyXC9wcm9qZWN0c1wvMTNcL2Fzc2V0c1wvZTJcLzgyMFwvOWIzM2FlYTk0MTc0NWRhMjg0N2Q0ZDAzMjk1NTBiZDUtMTY1MDQ0MjI5My5qcGcifQ:norddeutscher-rundfunk:_MP-DSfjU7vkyKTBphNKu6e1DpkneV6XbqU0p0jMTTc?width=2400\"\n        WHEN COUNT(*) = 0 AND \"$LRA\" = \"NDR\" AND \"$Bereich\" = \"NDR 2\" AND \"$broadcast_id_branding\" = \"\" THEN \"https://cdn-assets-eu.frontify.com/s3/frontify-enterprise-files-eu/eyJwYXRoIjoibm9yZGRldXRzY2hlci1ydW5kZnVua1wvYWNjb3VudHNcL2E1XC80MDAxMTgyXC9wcm9qZWN0c1wvMThcL2Fzc2V0c1wvN2ZcLzkyNVwvYWZmN2M4NDRlODA5YzZiZTc2M2VmOTQ3NmJkYzk2MjQtMTY1MDQ0ODI3NC5qcGcifQ:norddeutscher-rundfunk:mMzYVpGonLkg92QxTPEk_FRMnQSvl2YLWJUn9AO1MCw?width=2400\"\n        WHEN COUNT(*) = 0 AND \"$LRA\" = \"NDR\" AND \"$Bereich\" = \"NDR 1 Welle Nord\" AND \"$broadcast_id_branding\" = \"\" THEN \"https://cdn-assets-eu.frontify.com/s3/frontify-enterprise-files-eu/eyJwYXRoIjoibm9yZGRldXRzY2hlci1ydW5kZnVua1wvYWNjb3VudHNcL2E1XC80MDAxMTgyXC9wcm9qZWN0c1wvMThcL2Fzc2V0c1wvYmVcLzkyNFwvOGU3YmYyNGMwODMyYTE3OWIxMWMwZmFjNTVjNDc1YjItMTY1MDQ0ODI2Ny5qcGcifQ:norddeutscher-rundfunk:_ErYbOOYoM-EZW2RkoB8hGeCVRp_QREQd88PJUsWVmA?width=2400\"\n        WHEN COUNT(*) = 0 AND \"$LRA\" = \"NDR\" AND \"$Bereich\" = \"NDR 90,3\" AND \"$broadcast_id_branding\" = \"\" THEN \"https://cdn-assets-eu.frontify.com/s3/frontify-enterprise-files-eu/eyJwYXRoIjoibm9yZGRldXRzY2hlci1ydW5kZnVua1wvYWNjb3VudHNcL2E1XC80MDAxMTgyXC9wcm9qZWN0c1wvMTNcL2Fzc2V0c1wvM2JcLzgxOVwvMmY0ZDczYTFkYWU1OWVmYmM4NWY3YzhlODgwNTgwYmMtMTY1MDQ0MjMwMy5qcGcifQ:norddeutscher-rundfunk:oCxfVO8es9CwKcWtE71_1X0jed2e7AuB6zWTIClXjQU?width=2400\"\n        WHEN COUNT(*) = 0 AND \"$LRA\" = \"NDR\" AND \"$Bereich\" = \"NDR 1 Radio MV\" AND \"$broadcast_id_branding\" = \"\" THEN \"https://cdn-assets-eu.frontify.com/s3/frontify-enterprise-files-eu/eyJwYXRoIjoibm9yZGRldXRzY2hlci1ydW5kZnVua1wvYWNjb3VudHNcL2E1XC80MDAxMTgyXC9wcm9qZWN0c1wvMThcL2Fzc2V0c1wvY2NcLzkyMlwvNTQ5OWEyOGJkYmMxZTY2YjlmYTBhOTUyNmU0YzUzOGYtMTY1MDQ0ODI1NC5qcGcifQ:norddeutscher-rundfunk:XNlgWY1sGUwnrol98RYiWpBC3RxRi24hwB_pmYOjGxY?width=2400\"\n        --WHEN COUNT(*) = 0 AND \"$LRA\" = \"NDR\" AND \"$Bereich\" = \"N-JOY\" AND \"$broadcast_id_branding\" = \"\" THEN \"\"\n        --WHEN COUNT(*) = 0 AND \"$LRA\" = \"NDR\" AND \"$Bereich\" = \"N-JOY\" AND \"$broadcast_id_branding\" = \"\" THEN \"\"\n        WHEN COUNT(*) = 0 AND \"$LRA\" = \"NDR\" THEN '$NDR_default_image'\n        WHEN COUNT(*) = 0 AND \"$LRA\" = \"MDR\" THEN '$MDR_default_image'\n        ELSE MAX(coverart)\n    END AS coverart\nFROM image;",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "line",
            "value": "line"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "type",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT  \r\n  CASE \r\n    WHEN (DATE_DIFF(DATE('${__to:date}', \"Europe/Berlin\"), DATE('${__from:date}', \"Europe/Berlin\"), DAY) + 1) < 7 THEN \"bar\"\r\n    ELSE \"line\"\r\n  END;\r\n",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "https://cdn-assets-eu.frontify.com/s3/frontify-enterprise-files-eu/eyJwYXRoIjoibm9yZGRldXRzY2hlci1ydW5kZnVua1wvZmlsZVwvUXhLeVZObTkxemdFTTkxcmhIbnAuanBnIn0:norddeutscher-rundfunk:180WVEn3aprq-qhbFSwOtq-KZKuRXLnHIopbn4yYmvk?width=2400",
            "value": "https://cdn-assets-eu.frontify.com/s3/frontify-enterprise-files-eu/eyJwYXRoIjoibm9yZGRldXRzY2hlci1ydW5kZnVua1wvZmlsZVwvUXhLeVZObTkxemdFTTkxcmhIbnAuanBnIn0:norddeutscher-rundfunk:180WVEn3aprq-qhbFSwOtq-KZKuRXLnHIopbn4yYmvk?width=2400"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "NDR_default_image",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT \"https://cdn-assets-eu.frontify.com/s3/frontify-enterprise-files-eu/eyJwYXRoIjoibm9yZGRldXRzY2hlci1ydW5kZnVua1wvZmlsZVwvUXhLeVZObTkxemdFTTkxcmhIbnAuanBnIn0:norddeutscher-rundfunk:180WVEn3aprq-qhbFSwOtq-KZKuRXLnHIopbn4yYmvk?width=2400\" -- rechteckiges Social Media NDR\n--\"https://api.ardmediathek.de/image-service/images/urn:ard:image:02f00fc2617f6b55?w=256&ch=e14976ec4f71faec\" Quadratische NDR Dachmarke\n--\"https://www.ndr.de/der_ndr/unternehmen/logoihrndr100_v-contentxl.jpg\" Rechteckickes NDR Logo",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "01.08.2024 | 05:18 Uhr",
            "value": "01.08.2024 | 05:18 Uhr"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "lastUpdate",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT \nCASE MAX(tmstp)\n  WHEN NULL THEN \"N/A\"\n  ELSE FORMAT_DATETIME(\"%d.%m.%Y | %H:%M Uhr\", DATETIME((TIMESTAMP(MAX(tmstp))),\"Europe/Berlin\") )\n  END\nFROM `ndr-code-bi-dashboard.Piano.NDR_podcast_episode_daily_f`\nWHERE date > DATE_SUB(CURRENT_DATE(), INTERVAL 10 day)\nAND CASE WHEN \"$Bereich\" = \"Alle Bereiche\" THEN TRUE\nELSE CASE WHEN \"$Podcast\" = \"All titles\" THEN TRUE\nELSE broadcast_id = \"${broadcast_id_branding}\" END END",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "",
            "value": ""
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "mapping_dataset",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \"$Podcast\"\r\nWHEN \"All titles\" THEN \"\"\r\nELSE \"_mapped\" END",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "https://share.ard-zdf-box.de/apps/files_sharing/publicpreview/Sxorbc6WLzk84iy?file=/&fileId=257042098&x=2132&y=1104&a=true&etag=31cb74f497586f722c788a3861963167",
            "value": "https://share.ard-zdf-box.de/apps/files_sharing/publicpreview/Sxorbc6WLzk84iy?file=/&fileId=257042098&x=2132&y=1104&a=true&etag=31cb74f497586f722c788a3861963167"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "MDR_default_image",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "-- SELECT \"https://cdn.mdr.de/presse/logos/mdr-dachmarke-100_v-variantBig16x9_wm-true_zc-ecbbafc6.png?version=17833\"\nSELECT \"https://share.ard-zdf-box.de/apps/files_sharing/publicpreview/Sxorbc6WLzk84iy?file=/&fileId=257042098&x=2132&y=1104&a=true&etag=31cb74f497586f722c788a3861963167\"",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "None",
            "value": "None"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "description": "Verwenden Sie das Dropdown-Menü \"AllePodcasts\". In diesem Menü finden Sie alle von uns geführten Podcasts. Soll diese Option nicht verwendet werden, muss der Wert auf \"None\" gesetzt werden.",
          "includeAll": false,
          "label": "Podcastsuche:",
          "name": "AllePodcasts",
          "options": [],
          "query": {
            "dataset": "Piano",
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT podcast_title FROM(\n(SELECT DISTINCT REPLACE(podcast_title,'\"','') AS podcast_title,  1 AS sort  FROM $profiles_dataset\nORDER BY sort,podcast_title DESC\n)\nUNION ALL (SELECT \"None\", -1 as sort)\n)\nORDER BY SORT, LOWER(podcast_title) ASC\n\n",
            "sql": {
              "columns": [
                {
                  "parameters": [
                    {
                      "name": "podcast_title",
                      "type": "functionParameter"
                    }
                  ],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            },
            "table": "NDR_spotify_podcasts"
          },
          "refresh": 1,
          "regex": "",
          "type": "query"
        },
        {
          "current": {
            "text": "27",
            "value": "27"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "number_of_days",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "WITH toDate AS(\r\n  SELECT CASE \r\n  WHEN DATE(TIMESTAMP('${__to:date:iso}'),'Europe/Berlin') >= DATE_SUB(CURRENT_DATE(), INTERVAL 5 DAY) THEN DATE_SUB(CURRENT_DATE(), INTERVAL 5 DAY)\r\n  ELSE DATE(TIMESTAMP('${__to:date:iso}'),'Europe/Berlin') END AS bisDatum\r\n)\r\nSELECT CAST(DATE_DIFF(bisDatum,DATE(TIMESTAMP('${__from:date:iso}'),'Europe/Berlin'), DAY) + 1 AS STRING)\r\nFROM toDate",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "",
            "value": ""
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "dataset_suffix",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \"$LRA\"\nWHEN \"NDR\" THEN \"_mapped\"\nWHEN \"MDR\" THEN \"\" END",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "Piano.MDR_podcast_episode_daily_f",
            "value": "Piano.MDR_podcast_episode_daily_f"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "episode_dataset",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \"$LRA\"\nWHEN \"NDR\" THEN \"Piano.NDR_podcast_episode_daily_f_mapped\"\nWHEN \"MDR\" THEN \"Piano.MDR_podcast_episode_daily_f\" END",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "Piano.MDR_podcast_platform_daily_f",
            "value": "Piano.MDR_podcast_platform_daily_f"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "platform_dataset",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \"$LRA\"\nWHEN \"NDR\" THEN \"Piano.NDR_podcast_platform_daily_f_mapped\"\nWHEN \"MDR\" THEN \"Piano.MDR_podcast_platform_daily_f\" END",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "Piano.MDR_podcast_profiles_mapping",
            "value": "Piano.MDR_podcast_profiles_mapping"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "profiles_dataset",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \"$LRA\"\nWHEN \"NDR\" THEN \"Piano.NDR_podcast_profiles\"\nWHEN \"MDR\" THEN \"Piano.MDR_podcast_profiles_mapping\" END",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "## Der ausgewertete Zeitraum lautet: 01.07.24 - 27.07.2024 ",
            "value": "## Der ausgewertete Zeitraum lautet: 01.07.24 - 27.07.2024 "
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "hinweis",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE CONTAINS_SUBSTR(\"\"\"${zeitraum}\"\"\", \"DATE_ADD\")\nWHEN True  THEN \"## Hinweis: Für den ausgewählten Zeitraum liegen keine Daten vor.\"\nELSE \"\"\"## Der ausgewählte Zeitraum lautet: $fromDay - $toDay \"\"\"\nEND\n\n--Um Daten auswerten zu können, bitte gestern oder größere Zeiträume auswählen.",
            "refId": "tempvar",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "01.07.24",
            "value": "01.07.24"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "fromDay",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "--SELECT FORMAT_DATE(\"%d.%m.%y\",DATE(TIMESTAMP('${__from:date:iso}'),'Europe/Berlin'))\r\n\r\nWITH min_date AS(\r\n  SELECT MIN(date) as m_date FROM $episode_dataset\r\n  WHERE CASE \"$Bereich\"\r\n  WHEN \"Alle Bereiche\" THEN TRUE\r\n  ELSE branding = \"$Bereich\" END\r\n  AND CASE \"$Podcast\"\r\n  WHEN \"All titles\" THEN TRUE\r\n  ELSE podcast_title = \"$Podcast\" END\r\n)\r\nSELECT FORMAT_DATE(\"%d.%m.%y\",from_day) FROM(\r\nSELECT CASE \r\nWHEN m_date >= DATE(TIMESTAMP('${__from:date:iso}'),'Europe/Berlin') THEN m_date\r\nELSE DATE(TIMESTAMP('${__from:date:iso}'),'Europe/Berlin') END AS from_day\r\nFROM min_date\r\n)",
            "refId": "tempvar",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "27.07.2024",
            "value": "27.07.2024"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "toDay_NDR",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \n-- case: last x<24 hours\n    WHEN TIMESTAMP_DIFF(TIMESTAMP('${__to:date:iso}'), TIMESTAMP('${__from:date:iso}'), HOUR) = 24 AND EXTRACT(DAY FROM DATETIME('${__from:date:iso}', \"Europe/Berlin\")) != EXTRACT(DAY FROM DATETIME('${__to:date:iso}', \"Europe/Berlin\")) OR TIMESTAMP_DIFF(TIMESTAMP('${__to:date:iso}'), TIMESTAMP('${__from:date:iso}'), MINUTE) < 1439\n    THEN   FORMAT_DATE(\"%d.%m.%y\",DATE_ADD(CURRENT_DATE,INTERVAL 1 DAY))\n-- SECOND case: today or bigger\n    WHEN EXTRACT(DATE FROM TIMESTAMP('${__to:date:iso}')) >= DATE_SUB(CURRENT_DATE(\"Europe/Berlin\"), INTERVAL 4 DAY) AND EXTRACT(DATE FROM TIMESTAMP('${__to:date:iso}')) >= \"$datenstand_not_formated\"\n    THEN \"$datenstand\"\n    WHEN EXTRACT(DATE FROM TIMESTAMP('${__to:date:iso}')) >= DATE_SUB(CURRENT_DATE(\"Europe/Berlin\"), INTERVAL 4 DAY) AND EXTRACT(DATE FROM TIMESTAMP('${__to:date:iso}')) < \"$datenstand_not_formated\"\n    THEN FORMAT_DATE(\"%d.%m.%y\",DATE_SUB(CURRENT_DATE(\"Europe/Berlin\"), INTERVAL 5 DAY))\nELSE CASE \nWHEN EXTRACT(DATE FROM TIMESTAMP('${__to:date:iso}')) >= \"$datenstand_not_formated\" THEN \"$datenstand\"\nELSE FORMAT_DATE(\"%d.%m.%y\",DATE_SUB(DATE('${__to:date}', \"Europe/Berlin\"), INTERVAL 0 DAY))\nEND \nEND\n--    WHEN EXTRACT(DATE FROM TIMESTAMP('${__to:date:iso}')) >= DATE_SUB(CURRENT_DATE(\"Europe/Berlin\"), INTERVAL 4 DAY) \n--    THEN FORMAT_DATE(\"%d.%m.%y\",DATE_SUB(CURRENT_DATE(\"Europe/Berlin\"), INTERVAL 5 DAY))\n--ELSE FORMAT_DATE(\"%d.%m.%y\",DATE_SUB(DATE('${__to:date}', \"Europe/Berlin\"), INTERVAL 0 DAY))\n--END \n\n",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "(EXTRACT(DATE from DATETIME(time, \"Europe/Berlin\")) BETWEEN DATE('2024-06-30T22:00:00.000Z', \"Europe/Berlin\") AND DATE_SUB(\"2024-08-01\", INTERVAL 5 DAY))",
            "value": "(EXTRACT(DATE from DATETIME(time, \"Europe/Berlin\")) BETWEEN DATE('2024-06-30T22:00:00.000Z', \"Europe/Berlin\") AND DATE_SUB(\"2024-08-01\", INTERVAL 5 DAY))"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "zeitraum_NDR",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": " SELECT CASE \n\n       --  case: \"Last 24 HOURS \"\n    WHEN DATE('${__from:date:iso}', \"Europe/Berlin\") >= DATE_SUB(CURRENT_DATE(\"Europe/Berlin\"), INTERVAL 4 DAY)  OR TIMESTAMP_DIFF(TIMESTAMP('${__to:date:iso}'), TIMESTAMP('${__from:date:iso}'), HOUR) = 24 AND EXTRACT(DAY FROM DATETIME('${__from:date:iso}', \"Europe/Berlin\")) != EXTRACT(DAY FROM DATETIME('${__to:date:iso}', \"Europe/Berlin\")) OR TIMESTAMP_DIFF(TIMESTAMP('${__to:date:iso}'), TIMESTAMP('${__from:date:iso}'), MINUTE) < 1439\n    THEN \"\"\"(EXTRACT(DATE from DATETIME(time, \"Europe/Berlin\"))  = DATE_ADD(CURRENT_DATE,INTERVAL 1 DAY))\"\"\"\n    -- case: CURRENT_DATE()\n    WHEN EXTRACT(DATE FROM TIMESTAMP('${__to:date:iso}')) >= DATE_SUB(CURRENT_DATE(\"Europe/Berlin\"), INTERVAL 4 DAY) \n    THEN  \"\"\"(EXTRACT(DATE from DATETIME(time, \"Europe/Berlin\")) BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE_SUB(\"$HeuteDatum\", INTERVAL 5 DAY))\"\"\"\n    ELSE  \"\"\"(EXTRACT(DATE from DATETIME(time, \"Europe/Berlin\")) BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\"))\"\"\"\n\n    END \n",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "2024-08-01",
            "value": "2024-08-01"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "HeuteDatum",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CURRENT_DATE(\"Europe/Berlin\")",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "TRUE = TRUE",
            "value": "TRUE = TRUE"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "episodenschnitt_condition",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \"$LRA\"\r\nWHEN \"NDR\" THEN \"episodenschnitt = 1\"\r\nELSE \"TRUE = TRUE\" END",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "Podcast-Daten werden mit 5 Tagen Verzögerung zur Verfügung gestellt.",
            "value": "Podcast-Daten werden mit 5 Tagen Verzögerung zur Verfügung gestellt."
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "delay_text",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \"$LRA\"\r\nWHEN \"NDR\" THEN \"Podcast-Daten werden mit 5 Tagen Verzögerung zur Verfügung gestellt.\"\r\nWHEN \"MDR\" THEN \"Podcast-Daten werden mit 5 Tagen Verzögerung zur Verfügung gestellt.\" END",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "(EXTRACT(DATE from DATETIME(time, \"Europe/Berlin\")) BETWEEN DATE('2024-06-30T22:00:00.000Z', \"Europe/Berlin\") AND DATE_SUB(\"2024-08-01\", INTERVAL 3 DAY))",
            "value": "(EXTRACT(DATE from DATETIME(time, \"Europe/Berlin\")) BETWEEN DATE('2024-06-30T22:00:00.000Z', \"Europe/Berlin\") AND DATE_SUB(\"2024-08-01\", INTERVAL 3 DAY))"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "zeitraum_MDR",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": " SELECT CASE \n\n       --  case: \"Last 24 HOURS \"\n    WHEN DATE('${__from:date:iso}', \"Europe/Berlin\") >= DATE_SUB(CURRENT_DATE(\"Europe/Berlin\"), INTERVAL 2 DAY)  OR TIMESTAMP_DIFF(TIMESTAMP('${__to:date:iso}'), TIMESTAMP('${__from:date:iso}'), HOUR) = 24 AND EXTRACT(DAY FROM DATETIME('${__from:date:iso}', \"Europe/Berlin\")) != EXTRACT(DAY FROM DATETIME('${__to:date:iso}', \"Europe/Berlin\")) OR TIMESTAMP_DIFF(TIMESTAMP('${__to:date:iso}'), TIMESTAMP('${__from:date:iso}'), MINUTE) < 1439\n    THEN \"\"\"(EXTRACT(DATE from DATETIME(time, \"Europe/Berlin\"))  = DATE_ADD(CURRENT_DATE,INTERVAL 1 DAY))\"\"\"\n    -- case: CURRENT_DATE()\n    WHEN EXTRACT(DATE FROM TIMESTAMP('${__to:date:iso}')) >= DATE_SUB(CURRENT_DATE(\"Europe/Berlin\"), INTERVAL 2 DAY) \n    THEN  \"\"\"(EXTRACT(DATE from DATETIME(time, \"Europe/Berlin\")) BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE_SUB(\"$HeuteDatum\", INTERVAL 3 DAY))\"\"\"\n    ELSE  \"\"\"(EXTRACT(DATE from DATETIME(time, \"Europe/Berlin\")) BETWEEN DATE('${__from:date}', \"Europe/Berlin\") AND DATE('${__to:date}', \"Europe/Berlin\"))\"\"\"\n\n    END \n",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "(EXTRACT(DATE from DATETIME(time, \"Europe/Berlin\")) BETWEEN DATE('2024-06-30T22:00:00.000Z', \"Europe/Berlin\") AND DATE_SUB(\"2024-08-01\", INTERVAL 3 DAY))",
            "value": "(EXTRACT(DATE from DATETIME(time, \"Europe/Berlin\")) BETWEEN DATE('2024-06-30T22:00:00.000Z', \"Europe/Berlin\") AND DATE_SUB(\"2024-08-01\", INTERVAL 3 DAY))"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "zeitraum",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \"$LRA\"\r\nWHEN \"NDR\" THEN \"\"\"$zeitraum_NDR\"\"\"\r\nWHEN \"MDR\" THEN \"\"\"$zeitraum_MDR\"\"\"\r\nEND",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "27.07.2024",
            "value": "27.07.2024"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "toDay_MDR",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \n-- case: last x<24 hours\n    WHEN TIMESTAMP_DIFF(TIMESTAMP('${__to:date:iso}'), TIMESTAMP('${__from:date:iso}'), HOUR) = 24 AND EXTRACT(DAY FROM DATETIME('${__from:date:iso}', \"Europe/Berlin\")) != EXTRACT(DAY FROM DATETIME('${__to:date:iso}', \"Europe/Berlin\")) OR TIMESTAMP_DIFF(TIMESTAMP('${__to:date:iso}'), TIMESTAMP('${__from:date:iso}'), MINUTE) < 1439\n    THEN   FORMAT_DATE(\"%d.%m.%y\",DATE_ADD(CURRENT_DATE,INTERVAL 1 DAY))\n-- SECOND case: today or bigger\n    WHEN EXTRACT(DATE FROM TIMESTAMP('${__to:date:iso}')) >= DATE_SUB(CURRENT_DATE(\"Europe/Berlin\"), INTERVAL 2 DAY) AND EXTRACT(DATE FROM TIMESTAMP('${__to:date:iso}')) >= \"$datenstand_not_formated\"\n    THEN \"$datenstand\"\n    WHEN EXTRACT(DATE FROM TIMESTAMP('${__to:date:iso}')) >= DATE_SUB(CURRENT_DATE(\"Europe/Berlin\"), INTERVAL 2 DAY) AND EXTRACT(DATE FROM TIMESTAMP('${__to:date:iso}')) < \"$datenstand_not_formated\"\n    THEN FORMAT_DATE(\"%d.%m.%y\",DATE_SUB(CURRENT_DATE(\"Europe/Berlin\"), INTERVAL 3 DAY))\nELSE CASE \nWHEN EXTRACT(DATE FROM TIMESTAMP('${__to:date:iso}')) >= \"$datenstand_not_formated\" THEN \"$datenstand\"\nELSE FORMAT_DATE(\"%d.%m.%y\",DATE_SUB(DATE('${__to:date}', \"Europe/Berlin\"), INTERVAL 0 DAY))\nEND \nEND\n\n--FORMAT_DATETIME(\"%d.%m.%Y\", )\n",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "27.07.2024",
            "value": "27.07.2024"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "toDay",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT CASE \"$LRA\"\r\nWHEN \"NDR\" THEN \"\"\"$toDay_NDR\"\"\"\r\nWHEN \"MDR\" THEN \"\"\"$toDay_MDR\"\"\" END",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "2024-07-27",
            "value": "2024-07-27"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "datenstand_not_formated",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT \nDATE(MAX(date))\nFROM $episode_dataset\nWHERE CASE WHEN \"$Bereich\" = \"Alle Bereiche\" THEN TRUE\nELSE CASE WHEN \"$Podcast\" = \"All titles\" THEN TRUE\nELSE broadcast_id = \"${broadcast_id_branding}\" END END",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        },
        {
          "current": {
            "text": "Alle Plattformen",
            "value": "Alle Plattformen"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "Plattformen",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT platform FROM (SELECT DISTINCT platform, 1 as sort \r\nFROM   $platform_dataset\r\nUNION DISTINCT\r\nSELECT \"Alle Plattformen\", 0 as sort)\r\nWHERE platform != \"\"\r\nOrder by sort, platform ASC",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 1,
          "regex": "",
          "type": "query"
        },
        {
          "current": {
            "text": "'audio-polizeibericht-thueringen130','audiogalerie-106-podcast','audiogalerie-118','audiogalerie-122','audiogalerie-146','audiogalerie-148','audiogalerie-154','audiogalerie-daily-update-100','audiogalerie-garten100','audiogalerie-hausarzt100','audiogalerie-kruemel100','audiogalerie-podcast-oehrchen-100','audiogalerie-tierarzt100','audiogalerie-wetterbauer100','audiogalerie-wzt100','audiogalerie102','audiogalerie128','audiogalerie132','audiogalerie140','audiogalerie146','audiogalerie174','audiogalerie190','audiogalerie218','audiogalerie354','audiogalerie376','audiogalerie450','audiogalerie926','audiogalerie966','audios-aufgefallen-100','backstage-110','badkurven-versteher-hfc-podcast100','big-baem-wissen-ohne-filter-100','blechbezaubert-102','buch-live-literatur-autor-autorin-100','bundestag-wahl-pieper-maier-100','challenge-meines-lebens-mdr-wissen-100','das-attentat-von-halle-100','das-interview-100','ddr-arbeiteraufstand-juni-100','ddr-grenze-flucht-wiedervereinigung-100','dennis-russell-davies-musikalische-begegnungen-100','der-brand-in-der-anna-amalia-bibliothek-100','deutschlands-erste-cyberkatastrophe-hack-anhalt-bitterfeld-100','diagnose-unangepasst-albtraum-tripperburg100','die-faschojaegerin-linksextremismus-100','die-grossen-fragen-in-zehn-minuten-100','die-taylor-swift-story-100','dienstags-direkt--100','digitanhalt-102','diskurs-podcast-100','dzecacy-serijal-witka100','eliten-ddr-100','exquisit-100','extrem-rechts-100','fahrradladen102','familiengeheimnisse-106','fiction-podcast-alpakakaka-kiffen-kot-und-kloesse-100','filme-der-woche-112','flugmodus-100','folk-welt-podcast-100','freundschaft-auf-rezept-100','fuenfunddreissig-jahre-mauerfall-100','galerie-das-grosse-ganze-100','gamecheck--100','gen-z-generation-grenzenlos-ost-west-klischees100','geschichten-aus-sachsen-anhalt-104','gutenberg-amok-bluttat-erfurt-100','haus-eigenheim-sanierung-energie-solar-daemmung-heizung-100','haus-mit-gaesten-100','heute-im-osten-144','hinter-den-nachrichten-100','hitversteher-112','hoerer-machen-programm-104','hormongesteuert-menopause-frauen-podcast-100','intra-mdr-strategietalk-podcast-100','intra-podcast-mittendrin-100','iron-east-heavy-metal-im-osten100','iron-east-heavy-metal-in-der-ddr-100','jogiseleven100','kant-fuer-eilige-116','kekule-gesundheit-politik-deutschland-100','kind-im-blick-podcast-100','kino-to-100','klimawandel-aktuell-klimapolitik-100','kluges-proberaum-100','kolonialzeit-raubkunst-in-deutschen-museen100','kompass-104','kriminalfaelle-queere-menschen-100','landtagswahl-sachsen-thueringen-wahlprogramme-100','lesung-symphonie-pathetique-100','lost-art-podcast-100','magisches-mikro-der-powerfrauen-podcast-100','mailbox--100','medizin-von-morgen-100','meine-challenge-mdr-wissen-100','melody-of-crime-podcast-100','mensch-nachbar-audios-100','mission-to-mars-132','mit-himmelblauem-herz-chemnitzer-fc-podcast-100','musik-business-beef-markus-kavka-jennifer-weist-100','nachrichten-des-tages-sonntag-106','nachrichten-leichte-sprache-100','neues-vom-kruegel-platz-fcm-podcast100','ostball-basketball-osten-100','ostwaerts-reisen-zwischen-fernweh-und-fettnaepfchen100','philomelos-serijal-102','pinocchio-144','podcast-angedacht-100','podcast-angeklagt-vor-gericht-reporter-verbrechen-100','podcast-boettchers-tagebuch-100','podcast-carlo-von-tiedemann-wie-war-die-woche-alter-100','podcast-coronavirus-gesellschaft-interview-100','podcast-die-bach-kantate-102','podcast-duo-deluxe-100','podcast-dzeci-100','podcast-eisenbahn-bahn-zug-abenteuer-100','podcast-elefant-tiger-und-co-100','podcast-elternabend-100','podcast-fakt-oder-fake-100','podcast-friede-freunde-eierkuchen-102','podcast-generation-zukunftsangst-100','podcast-henkel-und-eimer-100','podcast-klassisch-modern-100','podcast-komm-mit-in-den-garten-102','podcast-marios-genuesse-100','podcast-mdr-investigativ-100','podcast-mdr-klassik-gespraech-100','podcast-mdr-serbja-100','podcast-monis-menschen-100','podcast-nachsitzen-mit-herr-schroeder-100','podcast-oeko-logisch-100','podcast-promi-gruppe-102','podcast-radieschen-von-unten-100','podcast-sagen-und-mythen-mitteldeutschland-100','podcast-sonntagsbrunch-102','podcast-sounds-like-schuetz-100','podcast-stolpertexte-100','podcast-unheimliche-heimat-gruselgeschichten-100','podcast-was-sachsen-bewegt-100','podcast156','profisport-plan-b-karriere-100','putins--krieg-100','radio-macht-geschichte-134','radio-sender-weltweit-100','rasenball-podcast-100','reportage-114','rike-schloss-einstein-freundschaft-liebe-schule-zukunft-102','russland-angriff-krieg-ukraine100','sachsen-politik-talk-100','sahra-wagenknecht-bsw-linke-100','schall-und-rauch130','schlaflieder-mdr-kinderchor-100','schloss-einstein-podcast-100','springerstiefel-fascho-oder-punk-100','spurdertaeter-104','sputnik-pride-102','thaelmannstrasse-neunundachtzig-100','timothy-truckle-ermittelt-100','todesangst-100','tschuess-kohle-100','tween-screen-102','twoonthefloor-westbam-100','unter-buechern-podcast-100','usa-brinkbaeumer-havertz-talk-100-podcast','von-drueben-und-drueben-100','von-menschen-und-moerdern-100','waldbrand-460','was-bleibt-wochenrueckblick-100','weltgeschichte-vor-der-haustuer-podcast-100','winnetou-ist-kein-apache-podcast-100','wissen-zum-weitersagen-102','work-life-bach-komponistenalltag-im-achtzehnten-jahrhundert-100'",
            "value": "'audio-polizeibericht-thueringen130','audiogalerie-106-podcast','audiogalerie-118','audiogalerie-122','audiogalerie-146','audiogalerie-148','audiogalerie-154','audiogalerie-daily-update-100','audiogalerie-garten100','audiogalerie-hausarzt100','audiogalerie-kruemel100','audiogalerie-podcast-oehrchen-100','audiogalerie-tierarzt100','audiogalerie-wetterbauer100','audiogalerie-wzt100','audiogalerie102','audiogalerie128','audiogalerie132','audiogalerie140','audiogalerie146','audiogalerie174','audiogalerie190','audiogalerie218','audiogalerie354','audiogalerie376','audiogalerie450','audiogalerie926','audiogalerie966','audios-aufgefallen-100','backstage-110','badkurven-versteher-hfc-podcast100','big-baem-wissen-ohne-filter-100','blechbezaubert-102','buch-live-literatur-autor-autorin-100','bundestag-wahl-pieper-maier-100','challenge-meines-lebens-mdr-wissen-100','das-attentat-von-halle-100','das-interview-100','ddr-arbeiteraufstand-juni-100','ddr-grenze-flucht-wiedervereinigung-100','dennis-russell-davies-musikalische-begegnungen-100','der-brand-in-der-anna-amalia-bibliothek-100','deutschlands-erste-cyberkatastrophe-hack-anhalt-bitterfeld-100','diagnose-unangepasst-albtraum-tripperburg100','die-faschojaegerin-linksextremismus-100','die-grossen-fragen-in-zehn-minuten-100','die-taylor-swift-story-100','dienstags-direkt--100','digitanhalt-102','diskurs-podcast-100','dzecacy-serijal-witka100','eliten-ddr-100','exquisit-100','extrem-rechts-100','fahrradladen102','familiengeheimnisse-106','fiction-podcast-alpakakaka-kiffen-kot-und-kloesse-100','filme-der-woche-112','flugmodus-100','folk-welt-podcast-100','freundschaft-auf-rezept-100','fuenfunddreissig-jahre-mauerfall-100','galerie-das-grosse-ganze-100','gamecheck--100','gen-z-generation-grenzenlos-ost-west-klischees100','geschichten-aus-sachsen-anhalt-104','gutenberg-amok-bluttat-erfurt-100','haus-eigenheim-sanierung-energie-solar-daemmung-heizung-100','haus-mit-gaesten-100','heute-im-osten-144','hinter-den-nachrichten-100','hitversteher-112','hoerer-machen-programm-104','hormongesteuert-menopause-frauen-podcast-100','intra-mdr-strategietalk-podcast-100','intra-podcast-mittendrin-100','iron-east-heavy-metal-im-osten100','iron-east-heavy-metal-in-der-ddr-100','jogiseleven100','kant-fuer-eilige-116','kekule-gesundheit-politik-deutschland-100','kind-im-blick-podcast-100','kino-to-100','klimawandel-aktuell-klimapolitik-100','kluges-proberaum-100','kolonialzeit-raubkunst-in-deutschen-museen100','kompass-104','kriminalfaelle-queere-menschen-100','landtagswahl-sachsen-thueringen-wahlprogramme-100','lesung-symphonie-pathetique-100','lost-art-podcast-100','magisches-mikro-der-powerfrauen-podcast-100','mailbox--100','medizin-von-morgen-100','meine-challenge-mdr-wissen-100','melody-of-crime-podcast-100','mensch-nachbar-audios-100','mission-to-mars-132','mit-himmelblauem-herz-chemnitzer-fc-podcast-100','musik-business-beef-markus-kavka-jennifer-weist-100','nachrichten-des-tages-sonntag-106','nachrichten-leichte-sprache-100','neues-vom-kruegel-platz-fcm-podcast100','ostball-basketball-osten-100','ostwaerts-reisen-zwischen-fernweh-und-fettnaepfchen100','philomelos-serijal-102','pinocchio-144','podcast-angedacht-100','podcast-angeklagt-vor-gericht-reporter-verbrechen-100','podcast-boettchers-tagebuch-100','podcast-carlo-von-tiedemann-wie-war-die-woche-alter-100','podcast-coronavirus-gesellschaft-interview-100','podcast-die-bach-kantate-102','podcast-duo-deluxe-100','podcast-dzeci-100','podcast-eisenbahn-bahn-zug-abenteuer-100','podcast-elefant-tiger-und-co-100','podcast-elternabend-100','podcast-fakt-oder-fake-100','podcast-friede-freunde-eierkuchen-102','podcast-generation-zukunftsangst-100','podcast-henkel-und-eimer-100','podcast-klassisch-modern-100','podcast-komm-mit-in-den-garten-102','podcast-marios-genuesse-100','podcast-mdr-investigativ-100','podcast-mdr-klassik-gespraech-100','podcast-mdr-serbja-100','podcast-monis-menschen-100','podcast-nachsitzen-mit-herr-schroeder-100','podcast-oeko-logisch-100','podcast-promi-gruppe-102','podcast-radieschen-von-unten-100','podcast-sagen-und-mythen-mitteldeutschland-100','podcast-sonntagsbrunch-102','podcast-sounds-like-schuetz-100','podcast-stolpertexte-100','podcast-unheimliche-heimat-gruselgeschichten-100','podcast-was-sachsen-bewegt-100','podcast156','profisport-plan-b-karriere-100','putins--krieg-100','radio-macht-geschichte-134','radio-sender-weltweit-100','rasenball-podcast-100','reportage-114','rike-schloss-einstein-freundschaft-liebe-schule-zukunft-102','russland-angriff-krieg-ukraine100','sachsen-politik-talk-100','sahra-wagenknecht-bsw-linke-100','schall-und-rauch130','schlaflieder-mdr-kinderchor-100','schloss-einstein-podcast-100','springerstiefel-fascho-oder-punk-100','spurdertaeter-104','sputnik-pride-102','thaelmannstrasse-neunundachtzig-100','timothy-truckle-ermittelt-100','todesangst-100','tschuess-kohle-100','tween-screen-102','twoonthefloor-westbam-100','unter-buechern-podcast-100','usa-brinkbaeumer-havertz-talk-100-podcast','von-drueben-und-drueben-100','von-menschen-und-moerdern-100','waldbrand-460','was-bleibt-wochenrueckblick-100','weltgeschichte-vor-der-haustuer-podcast-100','winnetou-ist-kein-apache-podcast-100','wissen-zum-weitersagen-102','work-life-bach-komponistenalltag-im-achtzehnten-jahrhundert-100'"
          },
          "datasource": {
            "type": "grafana-bigquery-datasource",
            "uid": "qUaUqEk4k"
          },
          "definition": "",
          "hide": 2,
          "includeAll": false,
          "name": "podcast_ids",
          "options": [],
          "query": {
            "editorMode": "code",
            "format": 1,
            "location": "europe-west3",
            "project": "ndr-code-bi-dashboard",
            "rawQuery": true,
            "rawSql": "SELECT \r\n  CONCAT(\"'\",STRING_AGG(broadcast_id, \"','\" ORDER BY broadcast_id ASC), \"'\") \r\nFROM\r\n  (\r\n    SELECT \r\n      DISTINCT CAST(broadcast_id[0] AS STRING) AS broadcast_id\r\n    FROM \r\n      $profiles_dataset\r\n    WHERE \r\n      (\"$Bereich\" = \"Alle Bereiche\" OR branding = \"$Bereich\")\r\n      AND (\"\"\"$Podcast\"\"\" = \"All titles\" OR broadcast_id[0] = \"$broadcast_id_branding\")\r\n  )",
            "refId": "tempvar",
            "sql": {
              "columns": [
                {
                  "parameters": [],
                  "type": "function"
                }
              ],
              "groupBy": [
                {
                  "property": {
                    "type": "string"
                  },
                  "type": "groupBy"
                }
              ],
              "limit": 50
            }
          },
          "refresh": 2,
          "regex": "",
          "skipUrlSync": true,
          "type": "query"
        }
      ]
    },
    "time": {
      "from": "now-1M/M",
      "to": "now-1M/M"
    },
    "timepicker": {},
    "timezone": "",
    "title": "Podcast MDR - Abfragen Optimieren (30.04.2025)",
    "uid": "cekgqfjiceq68e",
    "version": 4,
    "weekStart": ""
  }
}
